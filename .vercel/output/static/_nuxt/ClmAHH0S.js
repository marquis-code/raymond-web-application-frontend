import{_ as Y}from"./C2MT19gt.js";import{g as q,r as a,j as R,k as E,z as G,y as W,N as X,c as m,a as e,v as b,b as x,w as M,T as C,F,q as z,o as p,l as T,n as B,t as _,_ as J,O as c}from"./Bd31R1Od.js";const K={class:"absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-blue-50/30"},Q={class:"floating-orbs"},Z={class:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10"},ee={key:0,class:"loading-container"},se={key:1,class:"promo-card-container"},te={class:"discount-badge-container"},oe={class:"discount-badge"},ae={class:"badge-content"},ne={class:"discount-number"},le={class:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center"},ie={class:"content-section space-y-6"},re={class:"promo-title"},de={class:"title-text"},ce={class:"promo-description"},ue={key:0,class:"countdown-container"},ve={class:"countdown-grid"},me={class:"countdown-number"},pe={class:"number-display"},ge={class:"countdown-unit"},_e={class:"cta-container"},fe={class:"button-content"},ye={class:"button-text"},he={class:"image-section"},be={class:"image-frame"},we={class:""},$e=["src","alt"],ke={key:0,class:"urgency-banner"},xe={class:"particles-container"},Me=q({__name:"PromoSection",props:{promosale:{},loading:{}},setup(o){const n=o,l=a(),w=a(),g=a(),f=a(!1),i=a(!1),y=a({x:0,y:0}),$=a(!1),u=a({days:0,hours:0,minutes:0,seconds:0,total:0}),V={days:"Days",hours:"Hrs",minutes:"Min",seconds:"Sec"},I=()=>{var d,h;if((d=n.promosale)!=null&&d.isLifetime||!((h=n.promosale)!=null&&h.endDate)){u.value={days:0,hours:0,minutes:0,seconds:0,total:0};return}const t=new Date().getTime(),r=new Date(n.promosale.endDate).getTime()-t;r>0?u.value={days:Math.floor(r/(1e3*60*60*24)),hours:Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(r%(1e3*60*60)/(1e3*60)),seconds:Math.floor(r%(1e3*60)/1e3),total:Math.floor(r/1e3)}:u.value={days:0,hours:0,minutes:0,seconds:0,total:0}},U=t=>{if(!l.value)return;const s=l.value.getBoundingClientRect();y.value={x:((t.clientX-s.left)/s.width-.5)*2,y:((t.clientY-s.top)/s.height-.5)*2}},j=()=>{i.value=!0},A=()=>{if(!l.value)return;new IntersectionObserver(s=>{s.forEach(r=>{r.isIntersecting&&(f.value=!0)})},{threshold:.1}).observe(l.value)},k=R(()=>({transform:`translate(${y.value.x*15}px, ${y.value.y*15}px)`})),H=R(()=>({transform:`translate(${y.value.x*8}px, ${y.value.y*8}px) scale(${$.value?1.05:1})`}));return E(()=>{I(),g.value=G(I,1e3),W(()=>{A()})}),X(()=>{g.value&&clearInterval(g.value)}),(t,s)=>{const r=Y;return p(),m("section",{ref_key:"sectionRef",ref:l,class:"promo-section relative py-8 lg:py-16 overflow-hidden",onMousemove:U,onMouseenter:s[0]||(s[0]=d=>$.value=!0),onMouseleave:s[1]||(s[1]=d=>$.value=!1)},[e("div",K,[e("div",Q,[e("div",{class:"orb orb-1",style:b(k.value)},null,4),e("div",{class:"orb orb-2",style:b(k.value)},null,4),e("div",{class:"orb orb-3",style:b(k.value)},null,4)]),s[2]||(s[2]=e("div",{class:"absolute inset-0 opacity-[0.02]"},[e("div",{class:"grid-pattern"})],-1))]),e("div",Z,[x(C,{name:"fade",mode:"out-in"},{default:M(()=>{var d,h,L,D,P,S,N;return[t.loading?(p(),m("div",ee,s[3]||(s[3]=[e("div",{class:"advanced-loader"},[e("div",{class:"loader-ring"}),e("div",{class:"loader-ring loader-ring-2"}),e("div",{class:"loader-ring loader-ring-3"}),e("div",{class:"loader-center"},[e("div",{class:"loader-dot"})])],-1),e("p",{class:"loading-text"},"Preparing amazing deals...",-1)]))):(d=Object.keys(t.promosale))!=null&&d.length?(p(),m("div",se,[e("div",{class:B(["promo-card",{visible:f.value}])},[e("div",te,[e("div",oe,[s[5]||(s[5]=e("div",{class:"badge-glow"},null,-1)),e("div",ae,[e("span",ne,_((h=t.promosale)==null?void 0:h.discountPercentage)+"%",1),s[4]||(s[4]=e("span",{class:"discount-text"},"OFF",-1))]),s[6]||(s[6]=e("div",{class:"badge-sparkles"},[e("div",{class:"sparkle sparkle-1"}),e("div",{class:"sparkle sparkle-2"}),e("div",{class:"sparkle sparkle-3"})],-1))])]),e("div",le,[e("div",ie,[s[13]||(s[13]=e("div",{class:"limited-badge"},[e("div",{class:"pulse-dot"}),e("span",null,"Limited Time Offer")],-1)),e("h2",re,[e("span",de,_((L=t.promosale)==null?void 0:L.title),1),s[7]||(s[7]=e("div",{class:"title-underline"},null,-1))]),e("p",ce,_((D=t.promosale)==null?void 0:D.description),1),!((P=t.promosale)!=null&&P.isLifetime)&&u.value.total>0?(p(),m("div",ue,[s[9]||(s[9]=e("div",{class:"countdown-label"},"Ends In",-1)),e("div",ve,[(p(),m(F,null,z(V,(v,O)=>e("div",{key:O,class:"countdown-item"},[e("div",me,[e("span",pe,_(String(u.value[O]).padStart(2,"0")),1),s[8]||(s[8]=e("div",{class:"number-glow"},null,-1))]),e("div",ge,_(v),1)])),64))])])):T("",!0),e("div",_e,[x(r,{to:"/shop",class:"cta-button group"},{default:M(()=>{var v;return[s[11]||(s[11]=e("div",{class:"button-bg"},null,-1)),e("div",fe,[e("span",ye,_((v=t.promosale)==null?void 0:v.actionText),1),s[10]||(s[10]=e("div",{class:"button-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1))]),s[12]||(s[12]=e("div",{class:"button-ripple"},null,-1))]}),_:1,__:[11,12]})])]),e("div",he,[e("div",{class:"image-container",style:b(H.value)},[e("div",be,[s[15]||(s[15]=e("div",{class:"frame-glow"},null,-1)),e("div",we,[e("img",{ref_key:"imageRef",ref:w,src:((S=t.promosale)==null?void 0:S.imageUrl)||"/placeholder.svg?height=400&width=400",alt:(N=t.promosale)==null?void 0:N.title,onLoad:j,class:B(["promo-image",{loaded:i.value}])},null,42,$e),s[14]||(s[14]=e("div",{class:"image-overlay"},null,-1))]),s[16]||(s[16]=e("div",{class:"decorative-elements"},[e("div",{class:"deco-circle deco-1"}),e("div",{class:"deco-circle deco-2"}),e("div",{class:"deco-triangle"})],-1))])],4)])]),x(C,{name:"slide-up"},{default:M(()=>{var v;return[!((v=t.promosale)!=null&&v.isLifetime)&&u.value.total>0&&u.value.total<86400?(p(),m("div",ke,s[17]||(s[17]=[e("div",{class:"urgency-content"},[e("div",{class:"urgency-icon"},"âš¡"),e("span",null,"Less than 24 hours remaining!")],-1),e("div",{class:"urgency-glow"},null,-1)]))):T("",!0)]}),_:1})],2)])):T("",!0)]}),_:1})]),e("div",xe,[(p(),m(F,null,z(12,d=>e("div",{key:d,class:"particle",style:b({left:Math.random()*100+"%",animationDelay:Math.random()*10+"s",animationDuration:Math.random()*8+12+"s"})},null,4)),64))])],544)}}}),De=J(Me,[["__scopeId","data-v-3a42e448"]]),Te={$_create_promosale(o){return c.post("/promosales",o)},$_fetch_promosales(o){return c.get("/promosales")},$_fetch_currently_active_promosale(){return c.get("/promosales/active")},$_fetch_promosales_by_id(o){return c.get(`/promosales/${o}`)},$_update_promosale(o,n){return c.patch(`/promosales/${o}`,n)},$_delete_promosale(o){return c.delete(`/promosales/${o}`)},$_activate_promosale(o){return c.patch(`/promosales/${o}/activate`)},$_deactivate_promosale(o,n){return c.patch(`/promosales/${o}/deactivate`)}},Pe=()=>{const o=a([]),n=a(!1),l=a(null),w=async()=>{var g,f;n.value=!0,l.value=null;try{const i=await Te.$_fetch_currently_active_promosale();return console.log(i,"res hee"),o.value=i==null?void 0:i.data,i.data}catch(i){throw l.value=((f=(g=i.response)==null?void 0:g.data)==null?void 0:f.message)||"Failed to fetch active promosale",l.value}finally{n.value=!1}};return E(()=>{w()}),{promosale:o,loading:n,error:l,fetchPromosales:w}};export{De as _,Pe as u};
