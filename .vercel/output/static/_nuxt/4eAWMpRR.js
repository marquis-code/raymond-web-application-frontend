import{_ as ss}from"./DFvqtjO4.js";import{u as kt,N as as,O as et,r as h,g as Ae,q as At,P as ke,Q as We,R as os,S as pt,U as ns,V as ls,W as rs,X as is,e as Ve,c as d,o as i,i as x,l as n,j as Qe,t as l,E as tt,f as re,I as St,a as e,b,m as U,s as we,w as ye,F as Ce,k as _e,z as Le,_ as st,h as Me,x as z,M as ft,Y as us,J as It,G as be,Z as ds,n as vt,d as le,B as Re,H as Q,$ as gt}from"./B5jWEhsj.js";import{c as ee,u as cs,S as ms,C as ys,U as bt,T as ht,L as ps,a as Je}from"./CoRZHkAT.js";import{u as fs}from"./CcDAcA-J.js";import{u as vs,a as gs,b as bs}from"./9ZlvyQOs.js";import{u as hs}from"./CFnJhPEI.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=ee("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ee("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ee("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ee("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ee("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ee("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ee("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ee("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ee("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ee("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ee("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ee("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ee("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ee("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ee("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ee("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ts(){const g=kt(),{socialLogin:$,socialSignup:F,setAuthCredentials:r,socialAuthLoading:C,socialAuthError:w,logout:c}=as(),{createUser:T}=et(),W=h(null),O=h(null),y=h(!1),Y=h(!1),ae=async()=>{try{y.value=!0;const{$auth:A}=We();if(!A){console.error("Firebase Auth is not initialized"),O.value="Firebase Auth is not initialized",Y.value=!0,y.value=!1;return}return os(A,f=>{W.value=f,Y.value=!0,y.value=!1},f=>{console.error("Auth state change error:",f),O.value="Authentication state error",Y.value=!0,y.value=!1})}catch(A){console.error("Error initializing auth state:",A),O.value="Failed to initialize authentication",Y.value=!0,y.value=!1}};Ae(async()=>{await At(),await ae()});const de=A=>{if(!A)return{firstName:"",lastName:""};const a=A.split(" "),f=a[0]||"",j=a.slice(1).join(" ");return{firstName:f,lastName:j}},ce=()=>{const A="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let a="";for(let f=0;f<12;f++)a+=A.charAt(Math.floor(Math.random()*A.length));return a},oe=async(A,a)=>{try{const{$auth:f}=We();if(!f)throw new Error("Firebase Auth is not initialized");y.value=!0,O.value=null,W.value&&await pt(f);const D=(await is(f,A)).user,B=await D.getIdToken(),{firstName:p,lastName:N}=de(D==null?void 0:D.displayName),u=ce(),I={idToken:B,provider:a,email:D.email||"",uid:D.uid,displayName:D.displayName||"",photoURL:D.photoURL||"",firstName:p,lastName:N,password:u};r(I);const H=await $();if(console.log(H,"logon result"),H.success)return await T(H.data),H;const X=await F();if(console.log(X,"logon result"),X.success)return await T(X.data),X;throw new Error(X.message||"Social authentication failed")}catch(f){console.error("Social auth error:",f),O.value=f.message||"Authentication failed"}finally{y.value=!1}},xe=async()=>{const A=new rs;return A.addScope("email"),A.addScope("profile"),A.setCustomParameters({prompt:"consent"}),await oe(A,"google")},J=async()=>{const A=new ls;A.addScope("email"),A.addScope("public_profile"),await oe(A,"facebook")},te=async()=>{const A=new ns("apple.com");A.addScope("email"),A.addScope("name"),await oe(A,"apple")},Ne=async()=>{try{const{$auth:A}=We();if(!A)throw new Error("Firebase Auth is not initialized");y.value=!0,await c(),await pt(A),g.push("/login")}catch(A){O.value=A.message}finally{y.value=!1}};return{user:ke(W),error:ke(O),loading:ke(y),initialized:ke(Y),socialAuthLoading:ke(C),socialAuthError:ke(w),signInWithGoogle:xe,signInWithFacebook:J,signInWithApple:te,logout:Ne}}const Ms={class:"space-y-3"},Es=["disabled"],Ds={key:0},Fs={key:1},Os=["disabled"],Rs={key:0},$s={key:1},js={key:2,class:"text-red-600 text-sm text-center"},Ls=Ve({__name:"SocialLoginButtons",props:{authType:{type:String}},emits:["callback"],setup(g,{emit:$}){const{showToast:F}=tt(),{signInWithGoogle:r,loading:C,error:w,socialAuthLoading:c,socialAuthError:T}=Ts(),W=$,O=async()=>{try{const y=await r();W("callback",y)}catch(y){F({title:"Error",message:y,toastType:`${y} || Google login failed`,duration:3e3})}};return(y,Y)=>(i(),d("div",Ms,[g.authType==="login"?(i(),d("button",{key:0,onClick:O,disabled:n(C)||n(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[Y[0]||(Y[0]=Qe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(C)&&!n(c)?(i(),d("span",Ds,"Sign in with Google")):(i(),d("span",Fs,"Signing in..."))],8,Es)):x("",!0),g.authType==="signup"?(i(),d("button",{key:1,onClick:O,disabled:n(C)||n(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[Y[1]||(Y[1]=Qe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(C)&&!n(c)?(i(),d("span",Rs,"Sign up with Google")):(i(),d("span",$s,"Signing up..."))],8,Os)):x("",!0),n(w)||n(T)?(i(),d("div",js,l(n(w)||n(T)),1)):x("",!0)]))}}),Vs=["disabled"],Us={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg max-h-60 overflow-y-auto"},Bs=["onClick"],zs={key:0,class:"mt-1 text-sm text-red-600 animate-pulse"},Gs=Ve({__name:"CustomDropdown",props:{options:{},modelValue:{},placeholder:{default:"Select an option"},disabled:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{default:""}},emits:["update:modelValue","change"],setup(g,{emit:$}){const F=g,r=$,C=h(!1),w=h(),c=re(()=>F.options.find(y=>y.value===F.modelValue)||null),T=()=>{F.disabled||(C.value=!C.value)},W=y=>{r("update:modelValue",y.value),r("change",y.value),C.value=!1},O=y=>{w.value&&!w.value.contains(y.target)&&(C.value=!1)};return Ae(()=>{document.addEventListener("click",O)}),St(()=>{document.removeEventListener("click",O)}),(y,Y)=>(i(),d("div",{class:"relative",ref_key:"dropdownRef",ref:w},[e("button",{onClick:T,class:U(["w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white text-left flex items-center justify-between",{"border-red-300 ring-2 ring-red-200":y.hasError}]),disabled:y.disabled},[e("span",{class:U({"text-slate-400":!c.value,"text-slate-800":c.value})},l(c.value?c.value.label:y.placeholder),3),b(n(ws),{class:U(["w-5 h-5 text-slate-400 transition-transform duration-200",{"rotate-180":C.value}])},null,8,["class"])],10,Vs),b(we,{name:"dropdown"},{default:ye(()=>[C.value?(i(),d("div",Us,[(i(!0),d(Ce,null,_e(y.options,ae=>{var de,ce;return i(),d("div",{key:ae.value,onClick:oe=>W(ae),class:U(["px-4 py-3 hover:bg-slate-50 cursor-pointer transition-colors duration-150 flex items-center justify-between",{"bg-blue-50 text-blue-700":((de=c.value)==null?void 0:de.value)===ae.value}])},[e("span",null,l(ae.label),1),((ce=c.value)==null?void 0:ce.value)===ae.value?(i(),Le(n(xs),{key:0,class:"w-4 h-4 text-blue-600"})):x("",!0)],10,Bs)}),128))])):x("",!0)]),_:1}),y.hasError&&y.errorMessage?(i(),d("div",zs,l(y.errorMessage),1)):x("",!0)],512))}}),je=st(Gs,[["__scopeId","data-v-19fbce7d"]]),qs=["disabled"],Ys={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg p-4"},Hs={class:"flex items-center justify-between mb-4"},Ks={class:"flex items-center gap-2"},Ws=["value"],Js=["value"],Zs={class:"grid grid-cols-7 gap-1 mb-2"},Xs={class:"grid grid-cols-7 gap-1"},Qs=["onClick","disabled"],ea={key:0,class:"mt-1 text-sm text-red-600 animate-pulse"},ta=Ve({__name:"CustomDatePicker",props:{modelValue:{},placeholder:{default:"Select a date"},disabled:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{default:""},minDate:{default:""},maxDate:{default:""}},emits:["update:modelValue","change"],setup(g,{emit:$}){const F=g,r=$,C=h(!1),w=h(),c=h(new Date().getMonth()),T=h(new Date().getFullYear()),W=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=re(()=>F.modelValue?new Date(F.modelValue):null),Y=re(()=>{const p=new Date().getFullYear(),N=[];for(let u=p-5;u<=p+10;u++)N.push(u);return N}),ae=re(()=>{const p=new Date(T.value,c.value,1);new Date(T.value,c.value+1,0);const N=new Date(p);N.setDate(N.getDate()-p.getDay());const u=[],I=new Date(N);for(let H=0;H<42;H++)u.push({day:I.getDate(),month:I.getMonth(),year:I.getFullYear(),isCurrentMonth:I.getMonth()===c.value,date:new Date(I)}),I.setDate(I.getDate()+1);return u}),de=()=>{F.disabled||(C.value=!C.value)},ce=p=>{if(J(p))return;const N=te(p.date);r("update:modelValue",N),r("change",N),C.value=!1},oe=p=>y.value?p.day===y.value.getDate()&&p.month===y.value.getMonth()&&p.year===y.value.getFullYear():!1,xe=p=>{const N=new Date;return p.day===N.getDate()&&p.month===N.getMonth()&&p.year===N.getFullYear()},J=p=>{const N=p.date;if(F.minDate){const u=new Date(F.minDate);if(N<u)return!0}if(F.maxDate){const u=new Date(F.maxDate);if(N>u)return!0}return!1},te=p=>p.toISOString().split("T")[0],Ne=p=>p.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),A=()=>{c.value===0?(c.value=11,T.value--):c.value--},a=()=>{c.value===11?(c.value=0,T.value++):c.value++},f=()=>{},j=()=>{r("update:modelValue",""),r("change",""),C.value=!1},D=()=>{const N=te(new Date);r("update:modelValue",N),r("change",N),C.value=!1},B=p=>{w.value&&!w.value.contains(p.target)&&(C.value=!1)};return Me(()=>F.modelValue,p=>{if(p){const N=new Date(p);c.value=N.getMonth(),T.value=N.getFullYear()}},{immediate:!0}),Ae(()=>{document.addEventListener("click",B)}),St(()=>{document.removeEventListener("click",B)}),(p,N)=>(i(),d("div",{class:"relative",ref_key:"datePickerRef",ref:w},[e("button",{onClick:de,class:U(["w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white text-left flex items-center justify-between",{"border-red-300 ring-2 ring-red-200":p.hasError}]),disabled:p.disabled,type:"button"},[e("span",{class:U({"text-slate-400":!y.value,"text-slate-800":y.value})},l(y.value?Ne(y.value):p.placeholder),3),b(n(Tt),{class:U(["w-5 h-5 text-slate-400 transition-transform duration-200",{"rotate-180":C.value}])},null,8,["class"])],10,qs),b(we,{name:"datepicker"},{default:ye(()=>[C.value?(i(),d("div",Ys,[e("div",Hs,[e("button",{onClick:A,type:"button",class:"p-1 hover:bg-slate-100 rounded-lg transition-colors"},[b(n(Cs),{class:"w-4 h-4"})]),e("div",Ks,[z(e("select",{"onUpdate:modelValue":N[0]||(N[0]=u=>c.value=u),onChange:f,class:"text-sm font-medium bg-transparent border-none focus:outline-none"},[(i(),d(Ce,null,_e(W,(u,I)=>e("option",{key:I,value:I},l(u),9,Ws)),64))],544),[[ft,c.value]]),z(e("select",{"onUpdate:modelValue":N[1]||(N[1]=u=>T.value=u),onChange:f,class:"text-sm font-medium bg-transparent border-none focus:outline-none"},[(i(!0),d(Ce,null,_e(Y.value,u=>(i(),d("option",{key:u,value:u},l(u),9,Js))),128))],544),[[ft,T.value]])]),e("button",{onClick:a,type:"button",class:"p-1 hover:bg-slate-100 rounded-lg transition-colors"},[b(n(_s),{class:"w-4 h-4"})])]),e("div",Zs,[(i(),d(Ce,null,_e(O,u=>e("div",{key:u,class:"text-xs font-medium text-slate-500 text-center py-2"},l(u),1)),64))]),e("div",Xs,[(i(!0),d(Ce,null,_e(ae.value,u=>(i(),d("button",{key:`${u.year}-${u.month}-${u.day}`,onClick:I=>ce(u),type:"button",disabled:J(u),class:U(["w-8 h-8 text-sm rounded-lg transition-all duration-150 flex items-center justify-center",{"text-slate-400":!u.isCurrentMonth,"text-slate-800":u.isCurrentMonth&&!oe(u),"bg-blue-600 text-white font-medium":oe(u),"hover:bg-slate-100":u.isCurrentMonth&&!oe(u)&&!J(u),"bg-blue-100 text-blue-700":xe(u)&&!oe(u),"opacity-50 cursor-not-allowed":J(u),"cursor-pointer":!J(u)}])},l(u.day),11,Qs))),128))]),e("div",{class:"flex justify-between mt-4 pt-3 border-t border-slate-200"},[e("button",{onClick:j,type:"button",class:"text-sm text-slate-600 hover:text-slate-800 transition-colors"}," Clear "),e("button",{onClick:D,type:"button",class:"text-sm text-blue-600 hover:text-blue-800 transition-colors"}," Today ")])])):x("",!0)]),_:1}),p.hasError&&p.errorMessage?(i(),d("div",ea,l(p.errorMessage),1)):x("",!0)],512))}}),sa=st(ta,[["__scopeId","data-v-008c50f1"]]),{showToast:_t}=tt(),Xe={email:h(""),password:h("")},aa=()=>{kt();const g=h(!1),$=re(()=>g.value||!Xe.email.value||!Xe.password.value);return{credential:Xe,login:async r=>{var w;g.value=!0;const C=await us.$_login({email:r.email,password:r.password});return console.log(C,"rse hee"),C.status===200||C.status===201?(et().createUser(C.data),_t({title:"Success",message:"Login was successfully",toastType:"success",duration:3e3})):_t({title:"Error",message:((w=C==null?void 0:C.data)==null?void 0:w.error)||"Something went wrong",toastType:"error",duration:3e3}),C},loading:g,isFormDisabled:$}};function oa(){It();const{createOrder:g,loading:$}=vs(),{handlePayment:F,paymentForm:r,loading:C,generateTxRef:w}=gs(),c=h(null),T=h(""),W=h(""),O=h(!1),y=re(()=>$.value||C.value),Y=a=>a.map(f=>{let j=f.productId;return!j&&f.id&&(j=f.id.includes("-")?f.id.split("-")[0]:f.id),{product:j,quantity:f.quantity,price:f.price,size:f.size||"",color:f.color||"",discount:f.discount||0,total:f.price*f.quantity}}),ae=a=>({firstName:a.firstName,lastName:a.lastName,address:a.address,city:a.city,state:a.state,country:a.country,postalCode:a.zipCode||a.postalCode,phone:a.phone,email:a.email}),de=a=>({isInstallment:!0,numberOfInstallments:parseInt(a.numberOfInstallments),downPayment:parseFloat(a.downPayment),installmentAmount:parseFloat(a.installmentAmount||0),interestRate:parseFloat(a.interestRate||0),totalPayable:parseFloat(a.totalPayable||0),paymentFrequency:a.paymentFrequency,paymentMethod:a.paymentMethod}),ce=a=>(a==null?void 0:a.taxRate)||2.5,oe=async a=>{var f,j,D,B,p,N;try{W.value="",T.value="",O.value=!1,console.log("Processing checkout with data:",a);const u=Y(a.items),I=ae(a.deliveryDetails),H=I,X=ce(a.country),P={items:u,subtotal:parseFloat(a.subtotal.toFixed(2)),tax:parseFloat(a.tax.toFixed(2)),taxRate:X,shipping:parseFloat(a.shipping.toFixed(2)),discount:0,total:parseFloat(a.total.toFixed(2)),status:"pending",paymentStatus:"pending",paymentType:a.paymentType,shippingAddress:I,billingAddress:H,paymentMethod:a.paymentMethod,paidAmount:0,refundedAmount:0,shippingMethod:a.deliveryMethod,shippingCost:parseFloat(a.shipping.toFixed(2)),shippingCarrier:a.deliveryMethod==="express"?"Express Courier":"Standard Shipping",currency:"USD",source:"web",locale:"en-US",notes:`Delivery Method: ${a.deliveryMethod}, Payment Method: ${a.paymentMethod}${a.paymentType==="installment"?", Payment Type: Installment Plan":""}`,metadata:{country:a.country,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),checkoutVersion:"2.0",paymentType:a.paymentType,deliveryMethod:a.deliveryMethod,cartItemsCount:a.items.length,hasInstallmentItems:a.items.some(pe=>pe.hasInstallmentOption)}};a.paymentType==="installment"&&a.installmentConfig?(P.installmentInfo=de(a.installmentConfig),P.paidAmount=parseFloat(a.installmentConfig.downPayment),P.paymentStatus="partially_paid",P.metadata={...P.metadata,installmentDetails:{startDate:a.installmentConfig.startDate,needsFormalAgreement:a.installmentConfig.needsFormalAgreement||!1,productSize:a.installmentConfig.productSize||((f=u[0])==null?void 0:f.size),originalInterestRate:a.installmentConfig.interestRate,paymentFrequency:a.installmentConfig.paymentFrequency,calculatedAt:new Date().toISOString(),downPaymentPercentage:parseFloat(a.installmentConfig.downPayment)/parseFloat(a.total.toFixed(2))*100}},P.notes+=`, Installment Terms: ${P.installmentInfo.numberOfInstallments} payments of $${(j=P.installmentInfo.installmentAmount)==null?void 0:j.toFixed(2)}`):P.installmentInfo={isInstallment:!1};const M=new Date;a.deliveryMethod==="express"?M.setDate(M.getDate()+3):M.setDate(M.getDate()+7),P.estimatedDelivery=M,console.log("Sending order payload to backend:",P);const R=await g(P);if(console.log(R.data._id,"res here"),!R||!((D=R==null?void 0:R.data)!=null&&D._id))return W.value="Failed to create order",{success:!1,error:((B=R==null?void 0:R.data)==null?void 0:B.message)||"Failed to create order"};console.log("Order created successfully:",R),c.value=R;let G=R.total;a.paymentType==="installment"&&a.installmentConfig&&(G=parseFloat(a.installmentConfig.downPayment)||a.immediatePayment||0,console.log("Installment payment - charging down payment:",G));const _=await xe(R,G,a.paymentType);return{success:!0,order:R,paymentAmount:G,paymentType:a.paymentType,paymentResult:_}}catch(u){console.error("Checkout process failed:",u);const I=((N=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:N.message)||(u==null?void 0:u.message)||"Checkout process failed";return W.value=I,{success:!1,error:I}}},xe=async(a,f,j)=>{var D,B,p,N,u,I,H,X,P,M,R,G,_,pe,se;console.log(a,"order object before payment processing");try{console.log("Processing payment for order:",a.data._id,"Amount:",f),r.value.amount=f;const m=w();r.value.tx_ref=m,r.value.meta={orderId:(D=a==null?void 0:a.data)==null?void 0:D._id,orderNumber:(B=a==null?void 0:a.data)==null?void 0:B.orderNumber,paymentType:j,...j==="installment"&&{isDownPayment:!0,installmentPlan:(p=a==null?void 0:a.data)==null?void 0:p.installmentInfo,remainingAmount:((N=a==null?void 0:a.data)==null?void 0:N.total)-f}},r.value.customer={email:((I=(u=a==null?void 0:a.data)==null?void 0:u.shippingAddress)==null?void 0:I.email)||"",phone_number:((X=(H=a==null?void 0:a.data)==null?void 0:H.shippingAddress)==null?void 0:X.phone)||"",name:`${((M=(P=a==null?void 0:a.data)==null?void 0:P.shippingAddress)==null?void 0:M.firstName)||""} ${((G=(R=a==null?void 0:a.data)==null?void 0:R.shippingAddress)==null?void 0:G.lastName)||""}`.trim()},r.value.title=`Order ${(_=a==null?void 0:a.data)==null?void 0:_.orderNumber}`,r.value.description=j==="installment"?`Down payment for installment order ${(pe=a==null?void 0:a.data)==null?void 0:pe.orderNumber}`:`Payment for order ${(se=a==null?void 0:a.data)==null?void 0:se.orderNumber}`,console.log("Payment form configured:",r.value);const V=await F(a==null?void 0:a.data);return console.log(V,"Final payment result"),{success:!0,paymentReference:m,amount:f,paymentResult:V}}catch(m){return console.error("Payment processing failed:",m),T.value=m.message||"Payment processing failed",{success:!1,error:m.message||"Payment processing failed"}}};return{processCheckout:oe,verifyPayment:async(a,f)=>{var j,D,B;try{return!a&&!f?{success:!1,error:"No payment reference provided"}:(console.log("Verifying payment:",{flw_ref:a,tx_ref:f}),O.value=!0,{success:!0,flw_ref:a,tx_ref:f,orderId:((j=c.value)==null?void 0:j._id)||"",orderNumber:((D=c.value)==null?void 0:D.orderNumber)||"",paymentType:((B=c.value)==null?void 0:B.paymentType)||"full"})}catch(p){return console.error("Payment verification failed:",p),{success:!1,error:p.message||"Payment verification failed"}}},createInstallmentPlan:async(a,f)=>{try{return console.log("Creating installment plan for order:",a,f),{success:!0,installmentPlanId:`plan-${a}-${Date.now()}`,message:"Installment plan created successfully"}}catch(j){return console.error("Failed to create installment plan:",j),{success:!1,error:j.message||"Failed to create installment plan"}}},resetCheckout:()=>{c.value=null,T.value="",W.value="",O.value=!1},orderResponse:c,getPaymentSummary:()=>{var f;if(!c.value)return null;const a=c.value;return{orderNumber:a.orderNumber,total:a.total,paymentType:a.paymentType,installmentInfo:a.installmentInfo,items:a.items,paidAmount:a.paymentType==="installment"?((f=a.installmentInfo)==null?void 0:f.downPayment)||0:a.total}},isLoading:y,orderLoading:$,paymentLoading:C,orderCreationError:W,paymentError:T,paymentComplete:O,paymentForm:r}}const he={$_create_shipping_config(g){return be.post("/shipping-tax/shipping",g)},$_create_tax_config(g){return be.post("/shipping-tax/tax",g)},$_get_all_shipping_configs(){return be.get("/shipping-tax/shipping")},$_get_all_tax_configs(){return be.get("/shipping-tax/tax")},$_update_shipping_config(g,$){return be.patch(`/shipping-tax/shipping/${g}`,$)},$_update_tax_config(g,$){return be.patch(`/shipping-tax/tax/${g}`,$)},$_delete_shipping_config(g){return be.delete(`/shipping-tax/shipping/${g}`)},$_delete_tax_config(g){return be.delete(`/shipping-tax/tax/${g}`)}},na=()=>{const g=h(null),$=async()=>{try{return(await he.$_get_all_tax_configs()).data}catch(w){throw g.value=w.message||"Failed to fetch tax configs",g.value}},F=async w=>{try{return(await he.$_create_tax_config({...w})).data}catch(c){throw g.value=c.message||"Failed to create tax config",g.value}},r=async(w,c)=>{try{return(await he.$_update_tax_config(w,{countryCode:c.countryCode||"",countryName:c.countryName||"",vatRate:c.vatRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(T){throw g.value=T.message||"Failed to update tax config",g.value}},C=async w=>{try{return(await he.$_delete_tax_config(w)).data}catch(c){throw g.value=c.message||"Failed to delete tax config",g.value}};return Ae(()=>{$()}),{error:g,fetchTaxConfigs:$,createTaxConfig:F,updateTaxConfig:r,deleteTaxConfig:C}},la=()=>{const g=h(null),$=async()=>{try{const w=await he.$_get_all_shipping_configs();return console.log(w,"fetching00000000000000000"),w.data}catch(w){throw g.value=w.message||"Failed to fetch shipping configs",g.value}},F=async w=>{try{return(await he.$_create_shipping_config({...w})).data}catch(c){throw g.value=c.message||"Failed to create shipping config",g.value}},r=async(w,c)=>{try{return(await he.$_update_shipping_config(w,{countryCode:c.countryCode||"",countryName:c.countryName||"",shippingRate:c.shippingRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(T){throw g.value=T.message||"Failed to update shipping config",g.value}},C=async w=>{try{const c=await he.$_delete_shipping_config(w);return console.log(c,"config here"),c.data}catch(c){throw g.value=c.message||"Failed to delete shipping config",g.value}};return Ae(()=>{$()}),{error:g,fetchShippingConfigs:$,createShippingConfig:F,updateShippingConfig:r,deleteShippingConfig:C}},ra={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100"},ia={key:0,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},ua={class:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200 text-center"},da={class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center"},ca={key:1,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},ma={class:"max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200"},ya={class:"text-center mb-8"},pa={class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},fa={class:"bg-slate-50 rounded-xl p-6 mb-8"},va={class:"flex justify-between items-center mb-3"},ga={class:"font-bold text-slate-800"},ba={class:"flex justify-between items-center mb-3"},ha={class:"font-bold text-slate-800"},xa={key:0,class:"flex justify-between items-center mb-3"},wa={class:"font-bold text-emerald-600"},Ca={class:"flex justify-between items-center"},_a={class:"text-slate-600 font-medium"},Na={class:"font-bold text-xl text-slate-800"},Pa={key:2,class:"container mx-auto px-4 py-8 lg:py-12"},ka={class:"max-w-2xl mx-auto mb-12"},Aa={class:"flex items-center justify-between relative"},Sa={class:"absolute top-4 left-0 right-0 h-0.5 bg-slate-200"},Ia={class:"relative flex flex-col items-center"},Ta={class:"relative flex flex-col items-center"},Ma={class:"relative flex flex-col items-center"},Ea={class:"lg:grid space-y-6 lg:space-y-0 grid-cols-5 gap-8 lg:max-w-7xl mx-auto"},Da={class:"lg:col-span-3"},Fa={key:0,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},Oa={class:"flex items-center mb-6"},Ra={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},$a={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={class:"space-y-2"},La={class:"space-y-2"},Va={class:"space-y-2"},Ua={class:"space-y-2"},Ba={class:"space-y-2"},za={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ga={class:"space-y-2"},qa={class:"space-y-2"},Ya={class:"space-y-2"},Ha={class:"space-y-2"},Ka={type:"submit",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},Wa={key:1,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},Ja={class:"flex items-center mb-6"},Za={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Xa={class:"space-y-4 mb-8"},Qa={class:"flex items-center"},eo={key:0,class:"w-3 h-3 rounded-full bg-white"},to={class:"flex-1"},so={class:"flex justify-between items-center mb-1"},ao={class:"font-bold text-slate-800"},oo={class:"flex gap-2"},no={key:2,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},lo={class:"flex items-center mb-6"},ro={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},io={class:"mb-8"},uo={class:"space-y-4"},co={class:"flex items-center"},mo={key:0,class:"w-3 h-3 rounded-full bg-white"},yo={class:"flex-1"},po={class:"flex justify-between items-center mb-1"},fo={class:"font-bold text-emerald-600"},vo={class:"w-10 h-10 bg-emerald-100 rounded-md flex items-center justify-center ml-4"},go={class:"flex items-center"},bo={key:0,class:"w-3 h-3 rounded-full bg-white"},ho={class:"flex-1"},xo={class:"flex justify-between items-center mb-1"},wo={class:"font-bold text-blue-600"},Co={class:"w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center ml-4"},_o={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},No={class:"flex items-center"},Po={class:"mt-2 text-xs text-yellow-700"},ko={key:0,class:"mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200"},Ao={class:"text-lg font-semibold text-slate-800 mb-6 flex items-center"},So={class:"space-y-6"},Io={class:"bg-white p-4 rounded-lg border border-blue-200"},To={class:"flex justify-between items-center mb-2"},Mo={class:"text-lg font-bold text-slate-800"},Eo={class:"space-y-3"},Do={class:"space-y-2"},Fo={class:"grid grid-cols-1 gap-3 mt-4"},Oo=["onClick"],Ro={class:"flex justify-between items-start"},$o={class:"flex-1"},jo={class:"flex items-center gap-2 mb-2"},Lo={key:0,class:"w-2 h-2 rounded-full bg-white"},Vo={class:"font-semibold text-slate-800"},Uo={class:"space-y-1 text-sm"},Bo={class:"flex justify-between"},zo={class:"font-semibold text-slate-800"},Go={class:"flex justify-between"},qo={class:"text-slate-700"},Yo={class:"flex justify-between"},Ho={class:"text-slate-700"},Ko={class:"flex justify-between font-semibold border-t pt-1 mt-2"},Wo={class:"text-slate-800"},Jo=["onClick"],Zo={class:"space-y-3"},Xo={class:"space-y-3"},Qo={class:"relative"},en={class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500 font-medium"},tn=["min","max"],sn={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},an={class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium"},on={key:0,class:"text-sm text-red-600 animate-pulse flex items-center"},nn={key:0,class:"space-y-2"},ln={class:"flex justify-between text-xs text-slate-500"},rn={class:"bg-slate-100 rounded-lg p-3"},un={class:"flex justify-between text-xs text-slate-600 mb-1"},dn={class:"w-full bg-slate-200 rounded-full h-2"},cn={class:"text-xs text-slate-500 mt-2"},mn={key:1,class:"text-xs text-slate-500 bg-yellow-50 border border-yellow-200 rounded-lg p-3"},yn={class:"flex items-center"},pn={class:"space-y-3"},fn={class:"space-y-3"},vn={class:"space-y-3"},gn={class:"space-y-2"},bn={class:"flex items-center"},hn={class:"flex items-center"},xn={key:0,class:"bg-white p-6 rounded-lg border border-blue-200"},wn={class:"space-y-3"},Cn={class:"flex justify-between"},_n={class:"font-semibold"},Nn={class:"flex justify-between"},Pn={class:"font-semibold"},kn={class:"flex justify-between"},An={class:"font-semibold"},Sn={class:"flex justify-between"},In={class:"font-semibold"},Tn={class:"flex justify-between"},Mn={class:"font-semibold"},En={class:"border-t pt-3"},Dn={class:"flex justify-between"},Fn={class:"font-bold text-lg"},On={class:"mb-8"},Rn={class:"space-y-4"},$n={class:"flex items-center"},jn={key:0,class:"w-3 h-3 rounded-full bg-white"},Ln={class:"w-10 h-10 bg-slate-100 rounded-md flex items-center justify-center"},Vn={class:"lg:flex space-y-6 lg:space-y-0 gap-4"},Un=["disabled"],Bn={class:"lg:col-span-2"},zn={class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-6 sticky top-6"},Gn={class:"flex items-center mb-6"},qn={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Yn={key:0,class:"space-y-4 mb-6 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},Hn={class:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0"},Kn=["src","alt"],Wn={class:"flex-1 min-w-0"},Jn={class:"font-semibold text-slate-800 text-sm truncate"},Zn={class:"text-sm text-slate-600"},Xn={class:"flex items-center gap-2 mt-1"},Qn={key:0,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},el={key:1,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},tl={key:2,class:"text-xs px-2 py-1 block bg-emerald-100 text-emerald-700 rounded-full"},sl={class:"flex flex-wrap items-center gap-3 mt-2"},al={class:"flex items-center gap-2"},ol=["onClick","disabled"],nl={class:"text-sm font-semibold text-center min-w-[2rem]"},ll=["onClick"],rl=["onClick"],il={class:"text-right"},ul={class:"font-semibold text-slate-800"},dl={class:"border-t border-slate-200 pt-4 space-y-3"},cl={class:"flex justify-between text-sm"},ml={class:"font-semibold text-slate-800"},yl={class:"flex justify-between text-sm"},pl={class:"font-semibold text-slate-800"},fl={class:"flex justify-between text-sm"},vl={class:"text-slate-600"},gl={class:"font-semibold text-slate-800"},bl={key:0,class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},hl={class:"flex justify-between text-xs text-blue-700 mb-1"},xl={class:"flex justify-between text-xs text-blue-700 mb-1"},wl={class:"flex justify-between text-xs text-blue-700"},Cl={key:1,class:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg"},_l={key:0},Nl={class:"flex justify-between font-bold text-lg pt-3 border-t border-slate-200"},Pl={class:"text-slate-800"},kl={class:"text-slate-800"},Al={key:2,class:"bg-emerald-50 p-3 rounded-lg border border-emerald-200"},Sl={class:"flex justify-between font-semibold text-emerald-800"},Il={class:"mt-6 pt-4 border-t border-slate-200"},Tl={class:"flex items-center text-sm text-slate-600 mb-3"},Ml={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},El={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative"},Dl={key:0},Fl={class:"space-y-3"},Ol={key:1},Rl={class:"mb-4"},$l={class:"space-y-2"},jl={class:"space-y-2"},Ll=["disabled"],Vl={class:"text-center"},Ul={key:2},Bl={class:"mb-4"},zl={class:"grid grid-cols-2 gap-4"},Gl={class:"space-y-2"},ql={class:"space-y-2"},Yl={class:"space-y-2"},Hl={class:"space-y-2"},Kl={class:"space-y-2"},Wl=["disabled"],Jl={class:"text-center"},Zl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},Xl={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto"},Ql={key:0},er={class:"text-2xl font-bold text-slate-800 mb-6"},tr={class:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl"},sr={class:"space-y-2"},ar={class:"flex items-center justify-between p-2 bg-white rounded-lg"},or={class:"font-bold text-emerald-600"},nr={class:"flex items-center justify-between p-2 bg-white rounded-lg"},lr={class:"text-sm font-medium text-slate-700"},rr={class:"font-bold text-blue-600"},ir={class:"space-y-4"},ur={class:"bg-slate-50 rounded-xl p-4"},dr={class:"space-y-3"},cr={class:"flex justify-between items-center"},mr={class:"font-semibold"},yr={class:"border-t pt-3"},pr={class:"flex justify-between items-center mb-2"},fr={class:"text-slate-600"},vr={class:"font-semibold text-emerald-600"},gr={class:"flex justify-between items-center mb-2"},br={class:"font-semibold"},hr={class:"flex justify-between items-center mb-2"},xr={class:"text-slate-600"},wr={class:"font-semibold"},Cr={class:"border-t pt-3"},_r={class:"flex justify-between items-center font-bold text-lg"},Nr={class:"text-slate-800"},Pr={class:"flex justify-between items-center text-sm text-slate-600 mt-1"},kr={class:"font-medium"},Ar={class:"bg-blue-50 rounded-xl p-4"},Sr={class:"text-sm text-slate-700 space-y-2"},Ir={class:"list-disc list-inside ml-4 space-y-1"},Tr={class:"bg-yellow-50 rounded-xl p-4"},Mr={class:"font-semibold text-slate-800 mb-3"},Er={class:"text-sm text-slate-700"},Dr={class:"grid grid-cols-2 gap-4"},Fr={class:"text-xs space-y-1"},Or={key:0},Rr={key:1},$r={key:2},jr={key:3},Lr={class:"text-xs space-y-1"},Vr={key:0},Ur={key:1},Br={key:2},zr=2.5,Nt=1,Pt=3,Gr=Ve({__name:"checkout",setup(g){const{userCurrency:$,initializeUserCurrency:F,convertFromUSD:r}=hs(),C=It(),w=ds(),{processCheckout:c,isLoading:T,paymentComplete:W}=oa(),O=h(!1),{showToast:y}=tt(),Y=s=>{s.success&&(O.value=!1)},{removeFromCart:ae,updateCartItemQuantity:de}=fs(),{signup:ce}=cs(),{login:oe}=aa(),{isLoggedIn:xe}=et(),{setItem:J,getItem:te,removeItem:Ne}=bs(),{fetchShippingConfigs:A}=la(),{fetchTaxConfigs:a}=na(),f=h([]),j=h([]),D=h(null),B=h(0),p=h(0),N=h(!1),u=h(1),I=h("check"),H=h(!1),X=h(!1),P=h([]),M=h({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:""}),R=h("standard"),G=h("flutterwave"),_=h("full"),pe=h(""),se=h(""),m=h({numberOfInstallments:"",paymentFrequency:"",downPayment:0,startDate:"",paymentMethod:"",needsFormalAgreement:!1,interestRate:0,totalAmount:0}),V=h({downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0}),ie=h(null),ue=h({firstName:"",lastName:"",email:"",password:"",phone:"",role:"customer"}),Se=h({email:"",password:""}),q={CART:"art-gallery-cart",CHECKOUT_STEP:"checkout-step",DELIVERY_DETAILS:"checkout-delivery-details",DELIVERY_METHOD:"checkout-delivery-method",PAYMENT_METHOD:"checkout-payment-method",PAYMENT_TYPE:"checkout-payment-type",INSTALLMENT_CONFIG:"checkout-installment-config",SELECTED_COUNTRY:"checkout-selected-country",SHIPPING_CONFIG:"checkout-shipping-config",TAX_CONFIG:"checkout-tax-config",GUEST_MODE:"checkout-guest-mode"},Mt=re(()=>rt.value.map(s=>({value:s.countryCode,label:s.countryName}))),at=re(()=>Ue.value.map(s=>{const t=mt(s);return{value:s.toString(),label:`${s} months`,estimate:t,displayText:`${s} months - ${r(t.monthlyPayment).formattedAmount}/month`}})),Et=[{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly (Every 2 weeks)"},{value:"monthly",label:"Monthly"}],Dt=[{value:"auto_deduction",label:"Auto Deduction (Recommended)"},{value:"manual",label:"Manual Payment"}],Ft=()=>{const s=w.query.paymentType;s&&["full","installment"].includes(s)?(_.value=s,console.log("Payment type initialized from query params:",_.value)):(_.value="full",console.log("Payment type defaulted to full payment"))},Ie=re(()=>{console.log("Checking installment options for cart items:",P.value);const s=P.value.some(t=>{var S;const v=t.hasInstallmentOption===!0&&t.installmentConfig&&t.installmentConfig.enabled===!0;return console.log(`Item ${t.id}: hasInstallmentOption=${t.hasInstallmentOption}, config enabled=${(S=t.installmentConfig)==null?void 0:S.enabled}, result=${v}`),v});return console.log("Overall hasInstallmentOptions:",s),s}),Ot=re(()=>P.value.filter(s=>s.hasInstallmentOption===!0&&s.installmentConfig&&s.installmentConfig.enabled===!0)),Ue=re(()=>{const s=new Set;P.value.forEach(v=>{var S;if(v.hasInstallmentOption===!0&&((S=v.installmentConfig)==null?void 0:S.enabled)===!0){const o=v.installmentConfig;o.availableTerms&&Array.isArray(o.availableTerms)&&o.availableTerms.forEach(L=>s.add(L))}});const t=Array.from(s).sort((v,S)=>v-S);return console.log("Available installment terms:",t),t}),Rt=()=>{if(!Ie.value||Ue.value.length===0)return 0;const s=K(),t=Math.max(...Ue.value),v=P.value.find(ne=>ne.hasInstallmentOption===!0&&ne.installmentConfig&&ne.installmentConfig.enabled===!0);if(!(v!=null&&v.installmentConfig))return s/t;const S=v.installmentConfig,o=S.minimumDownPaymentPercentage||20,L=s*o/100,k=s-L,Z=(S.interestRate||0)/12/100;if(Z>0){const ne=Math.pow(1+Z,t);return k*Z*ne/(ne-1)}else return k/t},Be=()=>{const s=P.value.find(t=>t.hasInstallmentOption===!0&&t.installmentConfig&&t.installmentConfig.enabled===!0);return console.log("Current installment config from item:",ie.value),(s==null?void 0:s.installmentConfig)||null};Me(P,()=>{ie.value=Be(),console.log("Updated currentInstallmentConfig:",ie.value)},{deep:!0});const ze=()=>{var s;return((s=ie.value)==null?void 0:s.minimumDownPaymentPercentage)||20},Ee=()=>{var s;return((s=ie.value)==null?void 0:s.maximumDownPaymentPercentage)||80},me=()=>{if(!m.value.numberOfInstallments)return 0;const s=K(),t=parseInt(m.value.numberOfInstallments),v=ie.value;if(!v)return s*.2;const S=s*.1,o=(v.interestRate||0)/12/100;let L;if(o>0){const Z=Math.pow(1+o,t);L=S*(Z-1)/(o*Z)}else L=S*t;const k=Math.max(s-L,s*ze()/100);return Math.min(k,s)},Pe=()=>K()*Ee()/100,ot=()=>{var s;return((s=ie.value)==null?void 0:s.interestRate)||0},$t=()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]},jt=()=>{if(!m.value.downPayment)return 0;const s=K();return Math.round(m.value.downPayment/s*100)},nt=()=>{m.value.numberOfInstallments&&(m.value.downPayment=me(),se.value=""),De()},lt=()=>{if(!m.value.numberOfInstallments){se.value="Please select the number of months first";return}const s=Number(m.value.downPayment),t=me(),v=Pe();se.value="",s<t?se.value=`For ${m.value.numberOfInstallments} months, minimum payment is ${r(t).formattedAmount}`:s>v&&(se.value=`Maximum payment allowed is ${r(v).formattedAmount} (${Ee()}% of total)`),se.value||De()},Lt=()=>{if(m.value.numberOfInstallments&&m.value.downPayment>0){const s=me();m.value.downPayment<s&&(m.value.downPayment=s,lt())}},De=()=>{if(console.log("Calculating installment details..."),console.log("Config:",m.value),!m.value.numberOfInstallments||!m.value.downPayment){console.log("Missing required fields for calculation"),V.value={downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0};return}const s=K(),t=Number(m.value.downPayment),v=s-t,S=parseInt(m.value.numberOfInstallments),o=ot(),L=o/12/100;console.log("Calculation inputs:",{totalAmount:s,downPayment:t,remainingAmount:v,numberOfInstallments:S,annualInterestRate:o,monthlyInterestRate:L});let k=0,Z=0;if(L>0){const ge=Math.pow(1+L,S);k=v*L*ge/(ge-1),Z=k*S-v}else k=v/S,Z=0;const ne=t+k*S;console.log("Calculation results:",{installmentAmount:k,totalInterest:Z,totalPayable:ne}),V.value={downPayment:t,installmentAmount:k,totalInterest:Z,totalPayable:ne,remainingAmount:v},m.value.totalAmount=s,m.value.interestRate=o},Ge=re(()=>{if(console.log("Checking payment config validity..."),console.log("Payment type:",_.value),console.log("Payment method:",G.value),_.value==="full"){const s=G.value!=="";return console.log("Full payment valid:",s),s}else if(_.value==="installment"){const s=m.value,t=G.value!==""&&s.numberOfInstallments!==""&&s.paymentFrequency!==""&&s.downPayment>0&&s.startDate!==""&&s.paymentMethod!==""&&s.downPayment>=me()&&s.downPayment<=Pe()&&typeof s.needsFormalAgreement=="boolean"&&!se.value;return console.log("Installment payment validation:",{paymentMethod:G.value!=="",numberOfInstallments:s.numberOfInstallments!=="",paymentFrequency:s.paymentFrequency!=="",downPayment:s.downPayment>0,startDate:s.startDate!=="",installmentPaymentMethod:s.paymentMethod!=="",downPaymentRange:s.downPayment>=me()&&s.downPayment<=Pe(),formalAgreement:typeof s.needsFormalAgreement=="boolean",noDownPaymentError:!se.value,overall:t}),t}return!1}),Vt=()=>T.value?"Processing...":_.value==="installment"?`Pay Initial Amount - ${r(V.value.downPayment).formattedAmount}`:`Complete Order - ${r(K()).formattedAmount}`,qe=s=>{if(_.value=s,s==="installment"&&(ie.value=Be(),ie.value)){const t=new Date;t.setDate(t.getDate()+30),m.value.startDate=t.toISOString().split("T")[0]}fe()},Ut=s=>{const t=rt.value.find(v=>v.countryCode===s);if(t){D.value=t;const v=f.value.find(o=>o.countryCode===s&&o.isActive);console.log(v,"selected shipping config"),v?B.value=v.shippingRate:B.value=s==="NG"?0:25;const S=j.value.find(o=>o.countryCode===s&&o.isActive);if(S)p.value=S.vatRate;else{const o={NG:7.5,US:8.5,GB:20,CA:13,AU:10,DE:19,FR:20};p.value=o[s]||0}fe()}},Bt=()=>{try{if(localStorage){const s=localStorage.getItem(q.CART);if(s){const t=JSON.parse(s);if(Array.isArray(t))return P.value=t,console.log("Loaded cart from storage:",t),t}}}catch(s){console.error("Failed to load cart from localStorage:",s)}return[]},Ye=()=>{try{localStorage&&localStorage.setItem(q.CART,JSON.stringify(P.value))}catch(s){console.error("Failed to save cart to localStorage:",s)}},fe=()=>{try{localStorage&&(J(q.CHECKOUT_STEP,u.value.toString()),J(q.DELIVERY_METHOD,R.value),J(q.PAYMENT_METHOD,G.value),J(q.PAYMENT_TYPE,_.value),J(q.INSTALLMENT_CONFIG,JSON.stringify(m.value)),J(q.DELIVERY_DETAILS,JSON.stringify(M.value)),D.value&&J(q.SELECTED_COUNTRY,JSON.stringify({countryInfo:D.value,shippingFee:B.value,taxRate:p.value})))}catch(s){console.error("Failed to persist checkout data:",s)}},ve=()=>{fe()},zt=()=>{try{if(localStorage){const s=te(q.CHECKOUT_STEP);if(s&&!isNaN(Number(s))){const k=Number(s);k>=Nt&&k<=Pt&&(u.value=k)}const t=te(q.DELIVERY_METHOD);t&&["standard","express","pickup"].includes(t)&&(R.value=t);const v=te(q.PAYMENT_METHOD);if(v&&["flutterwave","interswitch","manual"].includes(v)&&(G.value=v),_.value==="full"){const k=te(q.PAYMENT_TYPE);k&&["full","installment"].includes(k)&&(_.value=k)}const S=te(q.INSTALLMENT_CONFIG);if(S)try{const k=JSON.parse(S);Object.assign(m.value,k)}catch(k){console.error("Failed to parse saved installment config",k)}const o=te(q.DELIVERY_DETAILS);if(o)try{const k=JSON.parse(o);Object.assign(M.value,k)}catch(k){console.error("Failed to parse saved delivery details",k)}const L=te(q.SELECTED_COUNTRY);if(L)try{const k=JSON.parse(L);D.value=k.countryInfo,B.value=k.shippingFee||0,p.value=k.taxRate||0}catch(k){console.error("Failed to parse saved country data",k)}}}catch(s){console.error("Failed to load persisted checkout data:",s)}},Gt=()=>{try{localStorage&&Object.values(q).forEach(s=>{Ne(s)})}catch(s){console.error("Failed to clear persisted checkout data:",s)}},rt=h([{countryCode:"NG",countryName:"Nigeria"},{countryCode:"US",countryName:"United States"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"CA",countryName:"Canada"},{countryCode:"AU",countryName:"Australia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"FR",countryName:"France"},{countryCode:"IT",countryName:"Italy"},{countryCode:"ES",countryName:"Spain"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"AT",countryName:"Austria"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"NO",countryName:"Norway"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"FI",countryName:"Finland"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"GR",countryName:"Greece"},{countryCode:"PL",countryName:"Poland"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"RO",countryName:"Romania"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"MT",countryName:"Malta"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"JP",countryName:"Japan"},{countryCode:"KR",countryName:"South Korea"},{countryCode:"CN",countryName:"China"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"IN",countryName:"India"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"IR",countryName:"Iran"},{countryCode:"IQ",countryName:"Iraq"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"OM",countryName:"Oman"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"SY",countryName:"Syria"},{countryCode:"IL",countryName:"Israel"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"RU",countryName:"Russia"},{countryCode:"BY",countryName:"Belarus"},{countryCode:"UA",countryName:"Ukraine"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"PA",countryName:"Panama"},{countryCode:"CU",countryName:"Cuba"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"VE",countryName:"Venezuela"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"LY",countryName:"Libya"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"SZ",countryName:"Eswatini"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"ST",countryName:"São Tomé and Príncipe"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"CG",countryName:"Republic of the Congo"},{countryCode:"CD",countryName:"Democratic Republic of the Congo"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"TD",countryName:"Chad"},{countryCode:"NE",countryName:"Niger"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"ML",countryName:"Mali"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"TG",countryName:"Togo"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"AO",countryName:"Angola"}]),Fe=re(()=>P.value.reduce((s,t)=>s+t.price*t.quantity,0)),Te=()=>B.value*(R.value==="express"?zr:1),He=()=>{const s=Fe.value,t=Te();return(s+t)*(p.value/100)},K=()=>{const s=Fe.value,t=Te(),v=He();return s+t+v},qt=async()=>{if(!N.value){N.value=!0;try{const[s,t]=await Promise.all([A(),a()]);console.log(t,"Tax configs"),console.log(s,"Shipping Configs"),s&&(f.value=s),t&&(j.value=t)}catch(s){console.error("Failed to load shipping and tax configs:",s),y({title:"Configuration Error",message:"Failed to load shipping and tax information. Using default rates.",toastType:"warning",duration:5e3})}finally{N.value=!1}}},Yt=s=>{R.value=s,fe()},Ht=s=>{G.value=s,fe()},it=()=>{u.value<Pt&&(u.value++,fe())},ut=()=>{u.value>Nt&&(u.value--,fe())},dt=(s,t)=>{const v=P.value.findIndex(S=>S.id===s);v!==-1&&t>0&&(P.value[v].quantity=t,Ye(),de(s,t))},Kt=s=>{P.value=P.value.filter(t=>t.id!==s),Ye(),ae(s),y({title:"Item Removed",message:"Item has been removed from your cart",toastType:"info",duration:3e3})},Oe=()=>{O.value=!1,I.value="check"},Wt=()=>{J(q.GUEST_MODE,"true"),Oe()},Jt=async()=>{H.value=!0;try{const s=await ce(ue.value);s.success?(y({title:"Account Created",message:"Your account has been created successfully!",toastType:"success",duration:5e3}),Oe()):y({title:"Signup Failed",message:s.message||"Failed to create account",toastType:"error",duration:5e3})}catch(s){console.error("Signup error:",s),y({title:"Signup Error",message:"An error occurred during signup",toastType:"error",duration:5e3})}finally{H.value=!1}},Zt=async()=>{X.value=!0;try{const s=await oe(Se.value);s.status===200||s.status===201?(y({title:"Welcome Back",message:"You have been signed in successfully!",toastType:"success",duration:5e3}),Oe()):y({title:"Sign In Failed",message:s.message||"Invalid credentials",toastType:"error",duration:5e3})}catch(s){console.error("Signin error:",s),y({title:"Sign In Error",message:"An error occurred during sign in",toastType:"error",duration:5e3})}finally{X.value=!1}},Xt=async()=>{if(console.log("Processing payment..."),console.log("Payment type:",_.value),console.log("Payment config valid:",Ge.value),!Ge.value){y({title:"Invalid Configuration",message:"Please complete all required fields before proceeding",toastType:"error",duration:5e3});return}try{const s={items:P.value,deliveryDetails:M.value,deliveryMethod:R.value,paymentMethod:G.value,paymentType:_.value,subtotal:Fe.value,shipping:Te(),tax:He(),total:K(),country:D.value,installmentConfig:_.value==="installment"?{...m.value,summary:V.value}:null};console.log("Order data prepared:",s);const t=await c(s);if(console.log("Checkout result:",t),t.success)pe.value=t.orderId||ct(),P.value=[],Ye(),Gt(),y({title:"Order Successful",message:`Your order #${pe.value} has been placed successfully!`,toastType:"success",duration:5e3});else throw console.log(t,"result message here"),new Error(t.error||"Payment processing failed")}catch(s){console.error("Payment processing error:",s),y({title:"Payment Failed",message:s.message||"An error occurred while processing your payment",toastType:"error",duration:5e3})}},ct=()=>{const s=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,5).toUpperCase();return`ORD${s}${t}`},Qt=s=>{const t=s.target;t.src="/placeholder.svg?height=64&width=64"},es=()=>{const s=te?te(q.GUEST_MODE)==="true":!1,t=localStorage?localStorage.getItem("token"):null;!xe.value&&!s&&!t&&(O.value=!0)};Me(()=>w.query,s=>{if(s.paymentType&&["full","installment"].includes(s.paymentType)){const t=s.paymentType;_.value!==t&&(_.value=t,qe(t))}},{immediate:!0}),Me(_,s=>{const t={...w.query};s!==t.paymentType&&C.push({query:{...t,paymentType:s}})},{immediate:!1}),Me(()=>m.value,()=>{_.value==="installment"&&De(),fe()},{deep:!0}),Ae(async()=>{if(console.log("Checkout page mounted"),At(()=>{es()}),Ft(),Bt(),zt(),await qt(),await F(),ie.value=Be(),_.value==="installment"&&Ie.value){const s=new Date;s.setDate(s.getDate()+30),m.value.startDate=s.toISOString().split("T")[0]}console.log("Checkout initialization complete"),console.log("Cart items:",P.value),console.log("Has installment options:",Ie.value),console.log("Selected payment type:",_.value)});const mt=s=>{const t=K(),v=ie.value;if(!v){const ge=t*.2;return{monthlyPayment:(t-ge)/s,downPayment:ge,totalInterest:0,totalPayable:t,interestRate:0}}const S=v.minimumDownPaymentPercentage||20,o=t*S/100,L=t-o,k=(v.interestRate||0)/12/100;let Z=0,ne=0;if(k>0){const ge=Math.pow(1+k,s);Z=L*k*ge/(ge-1),ne=Z*s-L}else Z=L/s,ne=0;return{monthlyPayment:Z,downPayment:o,totalInterest:ne,totalPayable:o+Z*s,interestRate:v.interestRate||0,term:s}},Ke=h(!1),E=h(null),ts=s=>{E.value=mt(parseInt(s)),Ke.value=!0},yt=()=>{Ke.value=!1,E.value=null};return(s,t)=>{const v=ss,S=Ls;return i(),d("div",ra,[t[133]||(t[133]=e("div",{class:"fixed inset-0 opacity-5 pointer-events-none"},[e("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),!P.value||P.value.length===0?(i(),d("div",ia,[e("div",ua,[e("div",da,[b(n(ms),{class:"w-12 h-12 text-slate-400"})]),t[32]||(t[32]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"Your shopping cart is empty",-1)),t[33]||(t[33]=e("p",{class:"text-slate-600 mb-8"},"Browse our amazing collection and add items to your cart to get started with your purchase.",-1)),b(v,{to:"/artworks",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"},{default:ye(()=>[b(n(Ze),{class:"w-4 h-4 mr-2"}),t[31]||(t[31]=le(" Browse Products "))]),_:1,__:[31]})])])):n(W)?(i(),d("div",ca,[e("div",ma,[e("div",ya,[e("div",pa,[b(n(ys),{class:"w-10 h-10 text-emerald-600"})]),t[34]||(t[34]=e("h2",{class:"text-3xl font-bold text-slate-800 mb-4"},"Order Successfully Placed!",-1)),t[35]||(t[35]=e("p",{class:"text-slate-600 mb-2"},"Thank you for choosing us for your purchase",-1)),t[36]||(t[36]=e("p",{class:"text-slate-500 text-sm"},"A confirmation email with your order details has been sent to your email address",-1))]),e("div",fa,[e("div",va,[t[37]||(t[37]=e("span",{class:"text-slate-600 font-medium"},"Order Reference",-1)),e("span",ga,"#"+l(pe.value||ct()),1)]),e("div",ba,[t[38]||(t[38]=e("span",{class:"text-slate-600 font-medium"},"Payment Method",-1)),e("span",ha,l(_.value==="installment"?"Payment Plan":"Full Payment"),1)]),_.value==="installment"?(i(),d("div",xa,[t[39]||(t[39]=e("span",{class:"text-slate-600 font-medium"},"Initial Payment",-1)),e("span",wa,l(n(r)(V.value.downPayment).formattedAmount),1)])):x("",!0),e("div",Ca,[e("span",_a,l(_.value==="installment"?"Total Order Value":"Total Amount"),1),e("span",Na,l(n(r)(K()).formattedAmount),1)])]),b(v,{to:"/",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},{default:ye(()=>t[40]||(t[40]=[le(" Continue Shopping ")])),_:1,__:[40]})])])):(i(),d("div",Pa,[t[108]||(t[108]=e("div",{class:"text-center mt-20 mb-12"},[e("h1",{class:"text-xl lg:text-3xl font-bold text-slate-800 mb-4"},"Secure Checkout Process"),e("p",{class:"text-slate-600 max-w-2xl mx-auto"},"Complete your purchase safely and securely. All your personal and payment information is protected with advanced encryption technology.")],-1)),e("div",ka,[e("div",Aa,[e("div",Sa,[e("div",{class:"h-full bg-gradient-to-r from-slate-800 to-slate-900 transition-all duration-500 ease-out",style:vt({width:`${(u.value-1)/2*100}%`})},null,4)]),e("div",Ia,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=1?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[b(n(bt),{class:"w-4 h-4"})],2),t[41]||(t[41]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Personal Info",-1))]),e("div",Ta,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=2?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[b(n(ht),{class:"w-4 h-4"})],2),t[42]||(t[42]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Delivery",-1))]),e("div",Ma,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=3?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[b(n($e),{class:"w-4 h-4"})],2),t[43]||(t[43]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Payment",-1))])])]),e("div",Ea,[e("div",Da,[b(we,{name:"slide-fade",mode:"out-in"},{default:ye(()=>[u.value===1?(i(),d("div",Fa,[e("div",Oa,[e("div",Ra,[b(n(bt),{class:"w-5 h-5 text-slate-600"})]),t[44]||(t[44]=e("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Personal Information",-1))]),e("form",{onSubmit:Re(it,["prevent"]),class:"space-y-6"},[e("div",$a,[e("div",ja,[t[45]||(t[45]=e("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name *",-1)),z(e("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=o=>M.value.firstName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your first name",onInput:ve},null,544),[[Q,M.value.firstName]])]),e("div",La,[t[46]||(t[46]=e("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name *",-1)),z(e("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=o=>M.value.lastName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your last name",onInput:ve},null,544),[[Q,M.value.lastName]])])]),e("div",Va,[t[47]||(t[47]=e("label",{for:"email",class:"block text-sm font-semibold text-slate-700"},"Email Address *",-1)),z(e("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=o=>M.value.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",onInput:ve},null,544),[[Q,M.value.email]]),t[48]||(t[48]=e("p",{class:"text-xs text-slate-500"},"We'll send your order confirmation to this email",-1))]),e("div",Ua,[t[49]||(t[49]=e("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone Number *",-1)),z(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=o=>M.value.phone=o),type:"tel",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your phone number",onInput:ve},null,544),[[Q,M.value.phone]]),t[50]||(t[50]=e("p",{class:"text-xs text-slate-500"},"For delivery updates and order notifications",-1))]),e("div",Ba,[t[51]||(t[51]=e("label",{for:"address",class:"block text-sm font-semibold text-slate-700"},"Complete Address *",-1)),z(e("input",{id:"address","onUpdate:modelValue":t[4]||(t[4]=o=>M.value.address=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your complete street address",onInput:ve},null,544),[[Q,M.value.address]])]),e("div",za,[e("div",Ga,[t[52]||(t[52]=e("label",{for:"city",class:"block text-sm font-semibold text-slate-700"},"City *",-1)),z(e("input",{id:"city","onUpdate:modelValue":t[5]||(t[5]=o=>M.value.city=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"City",onInput:ve},null,544),[[Q,M.value.city]])]),e("div",qa,[t[53]||(t[53]=e("label",{for:"state",class:"block text-sm font-semibold text-slate-700"},"State/Province *",-1)),z(e("input",{id:"state","onUpdate:modelValue":t[6]||(t[6]=o=>M.value.state=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"State",onInput:ve},null,544),[[Q,M.value.state]])]),e("div",Ya,[t[54]||(t[54]=e("label",{for:"zipCode",class:"block text-sm font-semibold text-slate-700"},"ZIP/Postal Code *",-1)),z(e("input",{id:"zipCode","onUpdate:modelValue":t[7]||(t[7]=o=>M.value.zipCode=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"ZIP",onInput:ve},null,544),[[Q,M.value.zipCode]])])]),e("div",Ha,[t[55]||(t[55]=e("label",{for:"country",class:"block text-sm font-semibold text-slate-700"},"Country *",-1)),b(je,{modelValue:M.value.country,"onUpdate:modelValue":t[8]||(t[8]=o=>M.value.country=o),options:Mt.value,placeholder:"Select your country",onChange:Ut},null,8,["modelValue","options"])]),e("button",Ka,[t[56]||(t[56]=le(" Continue to Delivery Options ")),b(n(xt),{class:"w-5 h-5 ml-2"})])],32)])):u.value===2?(i(),d("div",Wa,[e("div",Ja,[e("div",Za,[b(n(ht),{class:"w-5 h-5 text-slate-600"})]),t[57]||(t[57]=e("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Delivery Options",-1))]),e("div",Xa,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",R.value==="standard"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[9]||(t[9]=o=>Yt("standard"))},[e("div",Qa,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",R.value==="standard"?"border-slate-800 bg-slate-800":"border-slate-300"])},[R.value==="standard"?(i(),d("div",eo)):x("",!0)],2),e("div",to,[e("div",so,[t[58]||(t[58]=e("span",{class:"font-semibold text-slate-800"},"Express Delivery",-1)),e("span",ao,l(n(r)(B.value).formattedAmount),1)]),t[59]||(t[59]=e("p",{class:"text-sm text-slate-600"},"Fast and reliable delivery within 5-7 business days",-1)),t[60]||(t[60]=e("p",{class:"text-xs text-slate-500 mt-1"},"Includes package tracking and delivery confirmation",-1))])])],2)]),e("div",oo,[e("button",{onClick:ut,class:"flex-1 py-3 border-2 text-sm border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[b(n(Ze),{class:"w-4 h-4 mr-2"}),t[61]||(t[61]=le(" Back "))]),e("button",{onClick:it,class:"flex-1 py-3 px-3 text-sm bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},[t[62]||(t[62]=le(" Continue to Payment ")),b(n(xt),{class:"w-4 h-4 ml-2"})])])])):u.value===3?(i(),d("div",no,[e("div",lo,[e("div",ro,[b(n($e),{class:"w-5 h-5 text-slate-600"})]),t[63]||(t[63]=e("h2",{class:"text-lg lg:text-2xl font-bold text-slate-800"},"Payment Setup",-1))]),e("div",io,[t[69]||(t[69]=e("h3",{class:"text-base lg:text-lg font-semibold text-slate-800 mb-4"},"Choose Your Payment Method",-1)),e("div",uo,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",_.value==="full"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[10]||(t[10]=o=>qe("full"))},[e("div",co,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",_.value==="full"?"border-slate-800 bg-slate-800":"border-slate-300"])},[_.value==="full"?(i(),d("div",mo)):x("",!0)],2),e("div",yo,[e("div",po,[t[64]||(t[64]=e("span",{class:"font-semibold text-slate-800"},"Pay Complete Amount Now",-1)),e("span",fo,l(n(r)(K()).formattedAmount),1)]),t[65]||(t[65]=e("p",{class:"text-sm text-slate-600"},"Complete your purchase immediately with no additional charges or fees",-1))]),e("div",vo,[b(n($e),{class:"w-6 h-6 text-emerald-600"})])])],2),Ie.value?(i(),d("div",{key:0,class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",_.value==="installment"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[11]||(t[11]=o=>qe("installment"))},[e("div",go,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",_.value==="installment"?"border-slate-800 bg-slate-800":"border-slate-300"])},[_.value==="installment"?(i(),d("div",bo)):x("",!0)],2),e("div",ho,[e("div",xo,[t[66]||(t[66]=e("span",{class:"font-semibold text-slate-800"},"Flexible Payment Plan",-1)),e("span",wo,"Starting from "+l(n(r)(Rt()).formattedAmount)+"/month",1)]),t[67]||(t[67]=e("p",{class:"text-sm text-slate-600"},"Break down your payment into manageable monthly installments with flexible terms",-1))]),e("div",Co,[b(n(Tt),{class:"w-6 h-6 text-blue-600"})])])],2)):x("",!0),Ie.value?x("",!0):(i(),d("div",_o,[e("div",No,[b(n(wt),{class:"w-5 h-5 text-yellow-600 mr-2"}),t[68]||(t[68]=e("span",{class:"text-sm text-yellow-800"},"Payment plans are not available for the current items in your cart",-1))]),e("div",Po,[e("p",null,"Items eligible for payment plans: "+l(Ot.value.length)+" of "+l(P.value.length),1)])]))])]),b(we,{name:"fade"},{default:ye(()=>[_.value==="installment"?(i(),d("div",ko,[e("h3",Ao,[b(n(As),{class:"w-5 h-5 mr-2 text-blue-600"}),t[70]||(t[70]=le(" Set Up Your Payment Plan "))]),e("div",So,[e("div",Io,[e("div",To,[t[71]||(t[71]=e("span",{class:"text-sm font-medium text-slate-600"},"Total Purchase Amount",-1)),e("span",Mo,l(n(r)(K()).formattedAmount),1)]),t[72]||(t[72]=e("p",{class:"text-xs text-slate-500"},"This is the total amount for your order including all fees and taxes",-1))]),e("div",Eo,[t[77]||(t[77]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How many months would you like to spread the payments? * ",-1)),e("div",Do,[b(je,{modelValue:m.value.numberOfInstallments,"onUpdate:modelValue":t[12]||(t[12]=o=>m.value.numberOfInstallments=o),options:at.value.map(o=>({value:o.value,label:o.displayText})),placeholder:"Choose your payment duration",onChange:nt},null,8,["modelValue","options"]),e("div",Fo,[(i(!0),d(Ce,null,_e(at.value,o=>(i(),d("div",{key:o.value,class:U(["border rounded-lg p-4 hover:bg-slate-50 transition-colors cursor-pointer",m.value.numberOfInstallments===o.value?"border-blue-500 bg-blue-50":"border-slate-200"]),onClick:L=>{m.value.numberOfInstallments=o.value,nt()}},[e("div",Ro,[e("div",$o,[e("div",jo,[e("div",{class:U(["w-4 h-4 rounded-full border-2 flex items-center justify-center",m.value.numberOfInstallments===o.value?"border-blue-500 bg-blue-500":"border-slate-300"])},[m.value.numberOfInstallments===o.value?(i(),d("div",Lo)):x("",!0)],2),e("span",Vo,l(o.label),1)]),e("div",Uo,[e("div",Bo,[t[73]||(t[73]=e("span",{class:"text-slate-600"},"Monthly Payment:",-1)),e("span",zo,l(n(r)(o.estimate.monthlyPayment).formattedAmount),1)]),e("div",Go,[t[74]||(t[74]=e("span",{class:"text-slate-600"},"Min. Down Payment:",-1)),e("span",qo,l(n(r)(o.estimate.downPayment).formattedAmount),1)]),e("div",Yo,[t[75]||(t[75]=e("span",{class:"text-slate-600"},"Total Interest:",-1)),e("span",Ho,l(n(r)(o.estimate.totalInterest).formattedAmount),1)]),e("div",Ko,[t[76]||(t[76]=e("span",{class:"text-slate-800"},"Total You'll Pay:",-1)),e("span",Wo,l(n(r)(o.estimate.totalPayable).formattedAmount),1)])])]),e("button",{onClick:Re(L=>ts(o.value),["stop"]),class:"ml-3 px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors"}," View Details ",8,Jo)])],10,Oo))),128))])]),t[78]||(t[78]=e("p",{class:"text-xs text-slate-500"},"Compare different payment terms to find what works best for your budget",-1))]),e("div",Zo,[t[79]||(t[79]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How often would you prefer to make payments? * ",-1)),b(je,{modelValue:m.value.paymentFrequency,"onUpdate:modelValue":t[13]||(t[13]=o=>m.value.paymentFrequency=o),options:Et,placeholder:"Select payment schedule",onChange:De},null,8,["modelValue"])]),e("div",Xo,[t[81]||(t[81]=e("label",{class:"block text-sm font-semibold text-slate-700"}," Initial Payment Amount * ",-1)),e("div",Qo,[e("span",en,l(n($)||"USD"),1),z(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>m.value.downPayment=o),onInput:lt,onBlur:Lt,type:"number",min:me(),max:Pe(),step:"0.01",class:U(["w-full pl-16 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",se.value?"border-red-300 ring-2 ring-red-200":"border-slate-300"]),placeholder:"Enter initial payment amount",required:""},null,42,tn),[[Q,m.value.downPayment,void 0,{number:!0}]]),m.value.downPayment>0&&!se.value?(i(),d("div",sn,[e("span",an,l(jt())+"% ",1)])):x("",!0)]),b(we,{name:"error-fade"},{default:ye(()=>[se.value?(i(),d("div",on,[b(n(Ns),{class:"w-4 h-4 mr-1"}),le(" "+l(se.value),1)])):x("",!0)]),_:1}),m.value.numberOfInstallments?(i(),d("div",nn,[e("div",ln,[e("span",null,"Minimum for "+l(m.value.numberOfInstallments)+" months: "+l(n(r)(me()).formattedAmount),1),e("span",null,"Maximum: "+l(n(r)(Pe()).formattedAmount),1)]),e("div",rn,[e("div",un,[e("span",null,l(ze())+"%",1),e("span",null,l(Ee())+"%",1)]),e("div",dn,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:vt({width:`${Math.min(100,Math.max(0,(m.value.downPayment-me())/(Pe()-me())*100))}%`})},null,4)]),e("p",cn," For "+l(m.value.numberOfInstallments)+" months plan: Pay between "+l(ze())+"% - "+l(Ee())+"% upfront ",1)])])):(i(),d("div",mn,[e("p",yn,[b(n(wt),{class:"w-4 h-4 mr-1"}),t[80]||(t[80]=le(" Please select the number of months first to see payment limits "))])]))]),e("div",pn,[t[82]||(t[82]=e("label",{class:"block text-sm font-semibold text-slate-700"}," When should your first installment payment be due? * ",-1)),b(sa,{modelValue:m.value.startDate,"onUpdate:modelValue":t[15]||(t[15]=o=>m.value.startDate=o),"min-date":$t(),placeholder:"Select first payment date"},null,8,["modelValue","min-date"]),t[83]||(t[83]=e("p",{class:"text-xs text-slate-500"},"Choose a date at least 7 days from today for your first installment",-1))]),e("div",fn,[t[84]||(t[84]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How would you like to make your installment payments? * ",-1)),b(je,{modelValue:m.value.paymentMethod,"onUpdate:modelValue":t[16]||(t[16]=o=>m.value.paymentMethod=o),options:Dt,placeholder:"Choose payment method"},null,8,["modelValue"])]),e("div",vn,[t[87]||(t[87]=e("label",{class:"block text-sm font-semibold text-slate-700"}," Would you like a formal payment agreement document? * ",-1)),e("div",gn,[e("label",bn,[z(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>m.value.needsFormalAgreement=o),type:"radio",value:!0,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[gt,m.value.needsFormalAgreement]]),t[85]||(t[85]=e("span",{class:"ml-2 text-sm text-slate-700"},"Yes, I would like a formal agreement document",-1))]),e("label",hn,[z(e("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>m.value.needsFormalAgreement=o),type:"radio",value:!1,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[gt,m.value.needsFormalAgreement]]),t[86]||(t[86]=e("span",{class:"ml-2 text-sm text-slate-700"},"No, proceed without formal documentation",-1))])])]),V.value.installmentAmount>0?(i(),d("div",xn,[t[94]||(t[94]=e("h4",{class:"font-semibold text-slate-800 mb-4"},"Your Payment Plan Summary",-1)),e("div",wn,[e("div",Cn,[t[88]||(t[88]=e("span",{class:"text-sm text-slate-600"},"Initial Payment (Today)",-1)),e("span",_n,l(n(r)(V.value.downPayment).formattedAmount),1)]),e("div",Nn,[t[89]||(t[89]=e("span",{class:"text-sm text-slate-600"},"Monthly Payment Amount",-1)),e("span",Pn,l(n(r)(V.value.installmentAmount).formattedAmount),1)]),e("div",kn,[t[90]||(t[90]=e("span",{class:"text-sm text-slate-600"},"Number of Monthly Payments",-1)),e("span",An,l(m.value.numberOfInstallments),1)]),e("div",Sn,[t[91]||(t[91]=e("span",{class:"text-sm text-slate-600"},"Annual Interest Rate",-1)),e("span",In,l(ot())+"%",1)]),e("div",Tn,[t[92]||(t[92]=e("span",{class:"text-sm text-slate-600"},"Total Interest Charges",-1)),e("span",Mn,l(n(r)(V.value.totalInterest).formattedAmount),1)]),e("div",En,[e("div",Dn,[t[93]||(t[93]=e("span",{class:"font-semibold text-slate-800"},"Total Amount You'll Pay",-1)),e("span",Fn,l(n(r)(V.value.totalPayable).formattedAmount),1)])])])])):x("",!0)])])):x("",!0)]),_:1}),e("div",On,[t[96]||(t[96]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Secure Payment Gateway",-1)),e("div",Rn,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",G.value==="flutterwave"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[19]||(t[19]=o=>Ht("flutterwave"))},[e("div",$n,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",G.value==="flutterwave"?"border-slate-800 bg-slate-800":"border-slate-300"])},[G.value==="flutterwave"?(i(),d("div",jn)):x("",!0)],2),t[95]||(t[95]=e("div",{class:"flex-1"},[e("span",{class:"font-semibold text-slate-800"},"Pay Securely with Card"),e("p",{class:"text-sm text-slate-600"},"Safe and secure payment processing via Flutterwave")],-1)),e("div",Ln,[b(n($e),{class:"w-6 h-6 text-slate-600"})])])],2)])]),e("div",Vn,[e("button",{onClick:ut,class:"flex-1 py-3 border-2 w-full border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[b(n(Ze),{class:"w-4 h-4 mr-2"}),t[97]||(t[97]=le(" Back "))]),e("button",{onClick:Xt,disabled:n(T)||!Ge.value,class:"flex-1 py-3 w-full bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[n(T)?(i(),Le(n(Je),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(Vt()),1)],8,Un)])])):x("",!0)]),_:1})]),e("div",Bn,[e("div",zn,[e("div",Gn,[e("div",qn,[b(n(Ss),{class:"w-5 h-5 text-slate-600"})]),t[98]||(t[98]=e("h2",{class:"text-lg lg:text-xl font-bold text-slate-800"},"Order Summary",-1))]),P.value&&P.value.length>0?(i(),d("div",Yn,[(i(!0),d(Ce,null,_e(P.value,o=>(i(),d("div",{key:o.id,class:"flex gap-4 p-4 border border-slate-100 rounded-xl hover:bg-slate-50 transition-all duration-200 group"},[e("div",Hn,[e("img",{src:o.image||"/placeholder.svg?height=64&width=64",alt:o.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:Qt},null,40,Kn)]),e("div",Wn,[e("h4",Jn,l(o.title),1),e("p",Zn,l(n(r)(o.price).formattedAmount),1),e("div",Xn,[o.size?(i(),d("span",Qn,l(o.size),1)):x("",!0),o.color?(i(),d("span",el,l(o.color),1)):x("",!0),o.hasInstallmentOption?(i(),d("span",tl,"Payment Plans Available")):x("",!0)]),e("div",sl,[e("div",al,[e("button",{onClick:L=>dt(o.id,Math.max(1,o.quantity-1)),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors",disabled:o.quantity<=1},[b(n(Ps),{class:"w-4 h-4"})],8,ol),e("span",nl,l(o.quantity),1),e("button",{onClick:L=>dt(o.id,o.quantity+1),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors"},[b(n(ks),{class:"w-4 h-4"})],8,ll)]),e("button",{onClick:L=>Kt(o.id),class:"ml-auto w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-red-50 hover:border-red-200 hover:text-red-600 transition-colors"},[b(n(Is),{class:"w-4 h-4"})],8,rl)])]),e("div",il,[e("span",ul,l(n(r)(o.price*o.quantity).formattedAmount),1)])]))),128))])):x("",!0),e("div",dl,[e("div",cl,[t[99]||(t[99]=e("span",{class:"text-slate-600"},"Subtotal",-1)),e("span",ml,l(n(r)(Fe.value).formattedAmount),1)]),e("div",yl,[t[100]||(t[100]=e("span",{class:"text-slate-600"},"Delivery",-1)),e("span",pl,l(Te()===0?"Free":`${n(r)(Te()).formattedAmount}`),1)]),e("div",fl,[e("span",vl,"Tax ("+l(p.value)+"%)",1),e("span",gl,l(n(r)(He()).formattedAmount),1)]),_.value==="installment"&&V.value.installmentAmount>0?(i(),d("div",bl,[t[103]||(t[103]=e("div",{class:"text-xs font-semibold text-blue-800 mb-2"},"Payment Plan Details",-1)),e("div",hl,[t[101]||(t[101]=e("span",null,"Initial Payment",-1)),e("span",null,l(n(r)(V.value.downPayment).formattedAmount),1)]),e("div",xl,[e("span",null,l(m.value.numberOfInstallments)+" × "+l(n(r)(V.value.installmentAmount).formattedAmount),1),e("span",null,l(n(r)(V.value.installmentAmount*m.value.numberOfInstallments).formattedAmount),1)]),e("div",wl,[t[102]||(t[102]=e("span",null,"Interest Charges",-1)),e("span",null,l(n(r)(V.value.totalInterest).formattedAmount),1)])])):x("",!0),D.value?(i(),d("div",Cl,[e("p",null,"Delivering to: "+l(D.value.countryName),1),e("p",null,"Tax Rate: "+l(p.value)+"%",1),_.value==="installment"?(i(),d("p",_l,"Payment Method: Flexible Payment Plan")):x("",!0)])):x("",!0),e("div",Nl,[e("span",Pl,l(_.value==="installment"?"Total Amount":"Total"),1),e("span",kl,l(_.value==="installment"&&V.value.totalPayable>0?n(r)(V.value.totalPayable).formattedAmount:n(r)(K()).formattedAmount),1)]),_.value==="installment"&&V.value.downPayment>0?(i(),d("div",Al,[e("div",Sl,[t[104]||(t[104]=e("span",null,"Amount Due Today",-1)),e("span",null,l(n(r)(V.value.downPayment).formattedAmount),1)]),t[105]||(t[105]=e("p",{class:"text-xs text-emerald-600 mt-1"},"Initial payment required to start your plan",-1))])):x("",!0)]),e("div",Il,[e("div",Tl,[b(n(ps),{class:"w-4 h-4 mr-2"}),t[106]||(t[106]=e("span",null,"Protected by 256-bit SSL encryption",-1))]),t[107]||(t[107]=Qe('<div class="flex gap-2" data-v-98c60e3a><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-98c60e3a><span class="text-xs font-bold text-slate-600" data-v-98c60e3a>VISA</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-98c60e3a><span class="text-xs font-bold text-slate-600" data-v-98c60e3a>MC</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-98c60e3a><span class="text-xs font-bold text-slate-600" data-v-98c60e3a>AMEX</span></div></div>',1))])])])])])),b(we,{name:"modal"},{default:ye(()=>[O.value?(i(),d("div",Ml,[e("div",El,[e("button",{onClick:Oe,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[b(n(Ct),{class:"w-4 h-4"})]),I.value==="check"?(i(),d("div",Dl,[t[109]||(t[109]=e("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-4"},"Welcome!",-1)),t[110]||(t[110]=e("p",{class:"text-slate-600 text-center mb-6"},"Sign in to track your orders and save your preferences, or continue as a guest.",-1)),e("div",Fl,[e("button",{onClick:t[20]||(t[20]=o=>I.value="signin"),class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Sign In "),e("button",{onClick:t[21]||(t[21]=o=>I.value="signup"),class:"w-full py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium"}," Create Account "),e("button",{onClick:Wt,class:"w-full py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium"}," Continue as Guest ")])])):I.value==="signin"?(i(),d("div",Ol,[t[113]||(t[113]=e("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-6"},"Sign In",-1)),e("div",Rl,[b(S,{onCallback:Y,authType:"login"})]),e("form",{onSubmit:Re(Zt,["prevent"]),class:"space-y-4"},[e("div",$l,[t[111]||(t[111]=e("label",{for:"signinEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),z(e("input",{id:"signinEmail","onUpdate:modelValue":t[22]||(t[22]=o=>Se.value.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[Q,Se.value.email]])]),e("div",jl,[t[112]||(t[112]=e("label",{for:"signinPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),z(e("input",{id:"signinPassword","onUpdate:modelValue":t[23]||(t[23]=o=>Se.value.password=o),type:"password",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"},null,512),[[Q,Se.value.password]])]),e("button",{type:"submit",disabled:X.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[X.value?(i(),Le(n(Je),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(X.value?"Signing In...":"Sign In"),1)],8,Ll),e("div",Vl,[e("button",{type:"button",onClick:t[24]||(t[24]=o=>I.value="signup"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Don't have an account? Sign up ")])],32)])):I.value==="signup"?(i(),d("div",Ul,[t[120]||(t[120]=e("h2",{class:"text-2xl text-center font-bold text-slate-800 mb-6"},"Create Account",-1)),e("div",Bl,[b(S,{onCallback:Y,authType:"signup"})]),e("form",{onSubmit:Re(Jt,["prevent"]),class:"space-y-4"},[e("div",zl,[e("div",Gl,[t[114]||(t[114]=e("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),z(e("input",{id:"firstName","onUpdate:modelValue":t[25]||(t[25]=o=>ue.value.firstName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"First name"},null,512),[[Q,ue.value.firstName]])]),e("div",ql,[t[115]||(t[115]=e("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),z(e("input",{id:"lastName","onUpdate:modelValue":t[26]||(t[26]=o=>ue.value.lastName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Last name"},null,512),[[Q,ue.value.lastName]])])]),e("div",Yl,[t[116]||(t[116]=e("label",{for:"signupEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),z(e("input",{id:"signupEmail","onUpdate:modelValue":t[27]||(t[27]=o=>ue.value.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[Q,ue.value.email]])]),e("div",Hl,[t[117]||(t[117]=e("label",{for:"signupPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),z(e("input",{id:"signupPassword","onUpdate:modelValue":t[28]||(t[28]=o=>ue.value.password=o),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"},null,512),[[Q,ue.value.password]]),t[118]||(t[118]=e("p",{class:"text-xs text-slate-500"},"Password must be at least 6 characters",-1))]),e("div",Kl,[t[119]||(t[119]=e("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone (Optional)",-1)),z(e("input",{id:"phone","onUpdate:modelValue":t[29]||(t[29]=o=>ue.value.phone=o),type:"tel",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number"},null,512),[[Q,ue.value.phone]])]),e("button",{type:"submit",disabled:H.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[H.value?(i(),Le(n(Je),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(H.value?"Creating Account...":"Create Account"),1)],8,Wl),e("div",Jl,[e("button",{type:"button",onClick:t[30]||(t[30]=o=>I.value="signin"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Already have an account? Sign in ")])],32)])):x("",!0)])])):x("",!0)]),_:1}),b(we,{name:"modal"},{default:ye(()=>[Ke.value?(i(),d("div",Zl,[e("div",Xl,[e("button",{onClick:yt,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[b(n(Ct),{class:"w-4 h-4"})]),E.value?(i(),d("div",Ql,[e("h2",er,l(E.value.term)+" Month Payment Plan",1),e("div",tr,[t[122]||(t[122]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"Payment Timeline",-1)),e("div",sr,[e("div",ar,[t[121]||(t[121]=e("span",{class:"text-sm font-medium text-slate-700"},"Today (Down Payment)",-1)),e("span",or,l(n(r)(E.value.downPayment).formattedAmount),1)]),e("div",nr,[e("span",lr,"Monthly × "+l(E.value.term),1),e("span",rr,l(n(r)(E.value.monthlyPayment).formattedAmount),1)])])]),e("div",ir,[e("div",ur,[t[127]||(t[127]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"Cost Breakdown",-1)),e("div",dr,[e("div",cr,[t[123]||(t[123]=e("span",{class:"text-slate-600"},"Order Total",-1)),e("span",mr,l(n(r)(K()).formattedAmount),1)]),e("div",yr,[e("div",pr,[e("span",fr,"Down Payment ("+l(Math.round(E.value.downPayment/K()*100))+"%)",1),e("span",vr,l(n(r)(E.value.downPayment).formattedAmount),1)]),e("div",gr,[t[124]||(t[124]=e("span",{class:"text-slate-600"},"Remaining Balance",-1)),e("span",br,l(n(r)(K()-E.value.downPayment).formattedAmount),1)]),e("div",hr,[e("span",xr,"Interest ("+l(E.value.interestRate)+"% annually)",1),e("span",wr,l(n(r)(E.value.totalInterest).formattedAmount),1)])]),e("div",Cr,[e("div",_r,[t[125]||(t[125]=e("span",{class:"text-slate-800"},"Total You'll Pay",-1)),e("span",Nr,l(n(r)(E.value.totalPayable).formattedAmount),1)]),e("div",Pr,[t[126]||(t[126]=e("span",null,"Extra cost vs. full payment",-1)),e("span",kr,l(n(r)(E.value.totalPayable-K()).formattedAmount),1)])])])]),e("div",Ar,[t[130]||(t[130]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"How We Calculate Your Monthly Payment",-1)),e("div",Sr,[e("p",null,[t[128]||(t[128]=e("strong",null,"Formula:",-1)),le(" (Remaining Balance + Interest) ÷ "+l(E.value.term)+" months",1)]),t[129]||(t[129]=e("p",null,[e("strong",null,"Calculation:")],-1)),e("ul",Ir,[e("li",null,"Remaining Balance: "+l(n(r)(K()-E.value.downPayment).formattedAmount),1),e("li",null,"Interest over "+l(E.value.term)+" months: "+l(n(r)(E.value.totalInterest).formattedAmount),1),e("li",null,"Total to be paid monthly: "+l(n(r)(K()-E.value.downPayment+E.value.totalInterest).formattedAmount),1),e("li",null,"Monthly Payment: "+l(n(r)(E.value.monthlyPayment).formattedAmount),1)])])]),e("div",Tr,[e("h3",Mr,"Why Choose "+l(E.value.term)+" Months?",1),e("div",Er,[e("div",Dr,[e("div",null,[t[131]||(t[131]=e("p",{class:"font-medium text-green-700 mb-1"},"✓ Pros:",-1)),e("ul",Fr,[E.value.term<=6?(i(),d("li",Or,"• Lower total interest")):x("",!0),E.value.term<=6?(i(),d("li",Rr,"• Pay off debt faster")):x("",!0),E.value.term>=12?(i(),d("li",$r,"• Lower monthly payments")):x("",!0),E.value.term>=12?(i(),d("li",jr,"• Better cash flow")):x("",!0)])]),e("div",null,[t[132]||(t[132]=e("p",{class:"font-medium text-red-700 mb-1"},"⚠ Cons:",-1)),e("ul",Lr,[E.value.term<=6?(i(),d("li",Vr,"• Higher monthly payments")):x("",!0),E.value.term>=12?(i(),d("li",Ur,"• More total interest")):x("",!0),E.value.term>=12?(i(),d("li",Br,"• Longer commitment")):x("",!0)])])])])])]),e("div",{class:"mt-6 pt-4 border-t"},[e("button",{onClick:yt,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Got It, Close Details ")])])):x("",!0)])])):x("",!0)]),_:1})])}}}),Xr=st(Gr,[["__scopeId","data-v-98c60e3a"]]);export{Xr as default};
