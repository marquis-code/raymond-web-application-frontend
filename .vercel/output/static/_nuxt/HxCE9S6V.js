import{G as D,r as y,g as ge,e as Se,f as ve,h as ie,E as Be,H as Pe,c as o,i as c,m as g,a as e,A as ae,t as u,l as d,d as W,p as Ye,o as s,_ as Re,z as je,C as Je,b as V,s as me,w as K,I as Ze,T as Te,F as j,k as T,x as G,y as Ae,J as re}from"./C7QN4FsU.js";import{u as Ke}from"./CP7z0unv.js";import{u as et}from"./BjEvTxbT.js";import{u as ze}from"./B-q0t4HL.js";import{u as tt}from"./JRzui5Km.js";const st={$_create_promosale(_){return D.post("/promosales",_)},$_fetch_promosales(_){return D.get("/promosales")},$_fetch_currently_active_promosale(){return D.get("/promosales/active")},$_fetch_promosales_by_id(_){return D.get(`/promosales/${_}`)},$_update_promosale(_,B){return D.patch(`/promosales/${_}`,B)},$_delete_promosale(_){return D.delete(`/promosales/${_}`)},$_activate_promosale(_){return D.patch(`/promosales/${_}/activate`)},$_deactivate_promosale(_,B){return D.patch(`/promosales/${_}/deactivate`)}},Al=()=>{const _=y([]),B=y(!1),P=y(null),L=async()=>{var C,H;B.value=!0,P.value=null;try{const b=await st.$_fetch_currently_active_promosale();return console.log(b,"res hee"),_.value=b==null?void 0:b.data,b.data}catch(b){throw P.value=((H=(C=b.response)==null?void 0:C.data)==null?void 0:H.message)||"Failed to fetch active promosale",P.value}finally{B.value=!1}};return ge(()=>{L()}),{promosale:_,loading:B,error:P,fetchPromosales:L}},ot={class:"lg:p-6 p-3"},lt={key:0,class:"bg-gray-50 rounded-xl p-4 mb-6"},nt={class:"flex items-center space-x-4"},rt={class:"w-16 h-16 bg-white rounded-lg overflow-hidden flex-shrink-0"},at=["src","alt"],it={class:"flex-1 min-w-0"},dt={class:"font-semibold text-gray-900 text-sm truncate"},ut={class:"text-sm text-gray-600"},ct={class:"text-lg font-bold text-gray-900"},mt={class:"space-y-4 mb-6"},vt={class:"flex items-center"},gt={key:0,class:"w-3 h-3 rounded-full bg-white"},ht={class:"flex-1"},pt={class:"flex flex-col justify-between items-start mb-1"},ft={class:"font-bold block text-emerald-600"},yt={class:"flex items-center"},bt={key:0,class:"w-3 h-3 rounded-full bg-white"},xt={class:"flex-1"},wt={class:"flex flex-col justify-between items-start mb-1"},kt={class:"font-bold block text-blue-600"},_t={class:"text-sm text-gray-600"},Ct={key:0,class:"text-xs text-gray-500"},It={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},$t={class:"flex items-center"},Mt={class:"text-sm text-yellow-800"},jt={key:0},Tt={class:"flex gap-3"},At=["disabled"],St=Se({__name:"PaymentSelectionModal",props:{isOpen:{type:Boolean},cartItem:{},onClose:{type:Function},onProceed:{type:Function}},setup(_){const{userCurrency:B,exchangeRates:P,initializeUserCurrency:L,convertFromUSD:C}=ze(),H=y({});y("USD");const b=y("NGN");y(null),ve(()=>Object.keys(P.value).sort());const n=y("full"),w=_,ee=ve(()=>{var h;if(!((h=w.cartItem)!=null&&h.installmentConfig))return!1;const r=w.cartItem.installmentConfig,a=R();return r.enabled&&a>=(r.minimumAmount||0)}),R=()=>w.cartItem?w.cartItem.price*w.cartItem.quantity:0,p=()=>{var r,a;return((a=(r=w.cartItem)==null?void 0:r.installmentConfig)==null?void 0:a.minimumAmount)||100},k=()=>{var r,a;return((a=(r=w.cartItem)==null?void 0:r.installmentConfig)==null?void 0:a.interestRate)||0},A=()=>{var h,I;if(!((I=(h=w.cartItem)==null?void 0:h.installmentConfig)!=null&&I.availableTerms))return"";const r=w.cartItem.installmentConfig.availableTerms;if(r.length===1)return`${r[0]} months`;if(r.length===2)return`${r[0]} or ${r[1]} months`;const a=[...r].sort((z,E)=>z-E);return`${a[0]}-${a[a.length-1]} months`},U=r=>{var z;if(!((z=w.cartItem)!=null&&z.installmentConfig))return 0;const a=w.cartItem.installmentConfig,h=R(),I=a.interestRate/100/12;return I>0?h*I*Math.pow(1+I,r)/(Math.pow(1+I,r)-1):h/r},N=()=>{var E,M;if(!((M=(E=w.cartItem)==null?void 0:E.installmentConfig)!=null&&M.availableTerms))return"";const r=w.cartItem.installmentConfig.availableTerms,a=Math.min(...r),h=Math.max(...r),I=U(h),z=U(a);return a===h?`${C(I).formattedAmount}/mo`:`${C(I).formattedAmount} - ${C(z).formattedAmount}/mo`},O=r=>{n.value=r},te=async()=>{if(!(!w.cartItem||!n.value))try{w.onProceed(n.value,w.cartItem),await Ye({path:"/checkout",query:{paymentType:n.value,productId:w.cartItem.productId,size:w.cartItem.size}})}catch(r){console.error("Error navigating to checkout:",r)}};ge(async()=>{await L(),Q()}),ie([B,P],()=>{Q()});const Q=()=>{B.value&&Object.keys(P.value).length>0&&(H.value=C(100).formattedAmount)};return ie(B,r=>{b.value=r}),(r,a)=>(s(),Be(Pe,{to:"body"},[r.isOpen?(s(),o("div",{key:0,class:g(["fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",{"opacity-100":r.isOpen,"opacity-0":!r.isOpen}])},[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:a[0]||(a[0]=(...h)=>r.onClose&&r.onClose(...h))}),e("div",{class:g(["relative w-full max-w-md bg-white rounded-2xl shadow-2xl transform transition-all duration-300 mx-auto",{"translate-y-0 scale-100":r.isOpen,"translate-y-8 scale-95":!r.isOpen}]),onClick:a[5]||(a[5]=ae(()=>{},["stop"]))},[e("button",{onClick:a[1]||(a[1]=(...h)=>r.onClose&&r.onClose(...h)),class:"absolute top-4 right-4 z-20 bg-gray-100 hover:bg-gray-200 p-2 rounded-full transition-all duration-300 shadow-sm","aria-label":"Close modal"},a[6]||(a[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-700"},[e("path",{d:"m18 6-12 12"}),e("path",{d:"m6 6 12 12"})],-1)])),e("div",ot,[a[14]||(a[14]=e("div",{class:"text-center mb-6"},[e("div",{class:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-emerald-600"},[e("path",{d:"M9 12l2 2 4-4"}),e("path",{d:"M21 12c.552 0 1-.448 1-1V5c0-.552-.448-1-1-1H3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1"}),e("path",{d:"M3 12v6c0 .552.448 1 1 1h16c.552 0 1-.448 1-1v-6"})])]),e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Choose Payment Option"),e("p",{class:"text-gray-600 text-sm"},"How would you like to pay for your selected items?")],-1)),r.cartItem?(s(),o("div",lt,[e("div",nt,[e("div",rt,[e("img",{src:r.cartItem.image||"/placeholder.svg?height=64&width=64",alt:r.cartItem.title,class:"w-full h-full object-cover"},null,8,at)]),e("div",it,[e("h3",dt,u(r.cartItem.title),1),e("p",ut,u(r.cartItem.size)+" • Qty: "+u(r.cartItem.quantity),1),e("p",ct,u(d(C)(r.cartItem.price*r.cartItem.quantity).formattedAmount),1)])])])):c("",!0),e("div",mt,[e("div",{class:g(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",n.value==="full"?"border-gray-800 bg-gray-50 shadow-md":"border-gray-200 hover:border-gray-300"]),onClick:a[2]||(a[2]=h=>O("full"))},[e("div",vt,[e("div",{class:g(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",n.value==="full"?"border-gray-800 bg-gray-800":"border-gray-300"])},[n.value==="full"?(s(),o("div",gt)):c("",!0)],2),e("div",ht,[e("div",pt,[a[7]||(a[7]=e("span",{class:"font-semibold block text-gray-800"},"Pay Full Amount",-1)),e("span",ft,u(d(C)(R()).formattedAmount),1)]),a[8]||(a[8]=e("p",{class:"text-sm text-gray-600"},"Complete payment now with no additional fees",-1))]),a[9]||(a[9]=e("div",{class:"w-10 h-10 bg-emerald-100 rounded-md flex items-center justify-center ml-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-emerald-600"},[e("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),e("line",{x1:"2",x2:"22",y1:"10",y2:"10"})])],-1))])],2),ee.value?(s(),o("div",{key:0,class:g(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",n.value==="installment"?"border-gray-800 bg-gray-50 shadow-md":"border-gray-200 hover:border-gray-300"]),onClick:a[3]||(a[3]=h=>O("installment"))},[e("div",yt,[e("div",{class:g(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",n.value==="installment"?"border-gray-800 bg-gray-800":"border-gray-300"])},[n.value==="installment"?(s(),o("div",bt)):c("",!0)],2),e("div",xt,[e("div",wt,[a[10]||(a[10]=e("span",{class:"font-semibold block text-gray-800"},"Installment Plan",-1)),e("span",kt,u(N()),1)]),e("p",_t,[W(" Split your payment into "+u(A())+" manageable installments ",1),k()>0?(s(),o("span",Ct," ("+u(k())+"% APR) ",1)):c("",!0)])]),a[11]||(a[11]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center ml-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-blue-600"},[e("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e("line",{x1:"3",x2:"21",y1:"10",y2:"10"})])],-1))])],2)):c("",!0),ee.value?c("",!0):(s(),o("div",It,[e("div",$t,[a[13]||(a[13]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-yellow-600 mr-2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e("path",{d:"M12 17h.01"})],-1)),e("span",Mt,[a[12]||(a[12]=W(" Installment payment is not available for this item ")),r.cartItem&&R()<p()?(s(),o("span",jt," (minimum "+u(d(C)(p()).formattedAmount)+" required) ",1)):c("",!0)])])]))]),e("div",Tt,[e("button",{onClick:a[4]||(a[4]=(...h)=>r.onClose&&r.onClose(...h)),class:"flex-1 text-sm py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium"}," Cancel "),e("button",{onClick:te,disabled:!n.value,class:"flex-1 text-sm py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-xl hover:from-gray-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"}," Proceed to Checkout ",8,At)])])],2)],2)):c("",!0)]))}}),Bt=Re(St,[["__scopeId","data-v-274d5778"]]),Pt={key:0,class:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm"},Rt={class:"h-full w-full flex flex-col bg-white"},zt={class:"sticky top-0 z-40 bg-white border-b border-gray-200 px-4 py-3"},Ft={class:"flex items-center justify-between"},Lt={class:"flex items-center space-x-3 flex-1 min-w-0"},Ot={class:"min-w-0 flex-1"},Dt={class:"text-base font-semibold text-gray-900 truncate"},Ut={class:"flex items-center space-x-2 text-sm text-gray-600"},Et={class:"text-xs"},Ht={class:"flex-1 overflow-hidden"},Nt={class:"lg:hidden h-full overflow-y-auto"},qt={class:"pb-6"},Vt={class:"bg-gray-50 p-4"},Gt={class:"aspect-square bg-white rounded-xl shadow-sm overflow-hidden relative"},Wt={class:"absolute inset-0 flex items-center justify-center p-4"},Qt=["src","alt"],Xt={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between pointer-events-none"},Yt={key:0,class:"mt-3"},Jt={class:"flex space-x-2 overflow-x-auto pb-2"},Zt=["onClick"],Kt=["src","alt"],es={class:"p-4 space-y-5"},ts={class:"animate-item"},ss={class:"flex items-baseline space-x-2"},os={class:"text-base font-bold text-gray-900"},ls={key:0},ns={key:1},rs={key:0,class:"text-base text-gray-600"},as={key:0,class:"text-sm text-gray-600 mt-1"},is={class:"animate-item"},ds={class:"grid grid-cols-1 gap-3"},us=["onClick"],cs={class:"flex justify-between items-center"},ms={class:"text-left"},vs={class:"text-sm font-semibold text-gray-900"},gs={class:"text-xs text-gray-600 mt-1"},hs={key:0,class:"text-blue-600"},ps={key:0,class:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center"},fs={class:"animate-item"},ys={class:"flex items-center justify-center"},bs={class:"flex items-center bg-gray-100 rounded-xl p-1"},xs=["disabled"],ws={class:"w-16 text-center font-bold text-base text-gray-900"},ks={class:"animate-item"},_s=["disabled"],Cs={key:0},Is={key:1},$s={class:"animate-item"},Ms={class:"border border-gray-200 rounded-xl overflow-hidden"},js={class:"flex items-center space-x-3"},Ts={key:0,class:"flex items-center space-x-1"},As={class:"flex items-center"},Ss={class:"text-sm text-gray-600"},Bs={class:"px-4 pb-4"},Ps={key:0,class:"space-y-4"},Rs={class:"flex items-start justify-between mb-2"},zs={class:"flex items-center space-x-2"},Fs={class:"flex items-center"},Ls={class:"text-sm font-medium text-gray-900"},Os={class:"text-xs text-gray-500"},Ds={class:"text-sm text-gray-700 leading-relaxed"},Us={key:0,class:"text-center"},Es={class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},Hs={key:1,class:"text-center py-8"},Ns={class:"space-y-3 animate-item"},qs={key:0,class:"border border-gray-200 rounded-xl overflow-hidden"},Vs={class:"px-4 pb-4"},Gs=["innerHTML"],Ws={key:1,class:"border border-gray-200 rounded-xl overflow-hidden"},Qs={class:"px-4 pb-4"},Xs=["innerHTML"],Ys={class:"hidden lg:flex h-full"},Js={class:"flex-[2] bg-gray-50 relative"},Zs={class:"absolute inset-0 flex items-center justify-center p-6"},Ks={class:"relative w-full h-full max-w-3xl"},eo={class:"relative w-full h-full bg-white rounded-2xl shadow-lg overflow-hidden"},to=["src","alt"],so={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between pointer-events-none"},oo={key:0,class:"absolute bottom-6 left-1/2 transform -translate-x-1/2"},lo={class:"flex space-x-3 bg-white/90 backdrop-blur-sm p-3 rounded-2xl shadow-lg"},no=["onClick"],ro=["src","alt"],ao={class:"w-96 bg-white border-l border-gray-200 overflow-y-auto"},io={class:"p-6 space-y-6"},uo={class:"animate-item"},co={class:"flex items-baseline space-x-3"},mo={class:"text-2xl font-bold text-gray-900"},vo={key:0},go={key:1},ho={key:0,class:"text-base text-gray-600"},po={key:0,class:"text-base text-gray-600 mt-2"},fo={class:"animate-item"},yo={class:"grid grid-cols-1 gap-3"},bo=["onClick"],xo={class:"flex justify-between items-center"},wo={class:"text-left"},ko={class:"text-sm font-semibold text-gray-900"},_o={class:"text-sm text-gray-600 mt-1"},Co={key:0,class:"text-blue-600"},Io={key:0,class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"},$o={class:"animate-item"},Mo={class:"flex items-center justify-center"},jo={class:"flex items-center bg-gray-100 rounded-xl p-1"},To=["disabled"],Ao={class:"w-20 text-center font-bold text-base text-gray-900"},So={class:"animate-item"},Bo=["disabled"],Po={key:0},Ro={key:1},zo={class:"animate-item"},Fo={class:"border border-gray-200 rounded-xl overflow-hidden"},Lo={class:"flex items-center space-x-3"},Oo={key:0,class:"flex items-center space-x-1"},Do={class:"flex items-center"},Uo={class:"text-sm text-gray-600"},Eo={class:"px-4 pb-4"},Ho={key:0,class:"space-y-4"},No={class:"flex items-start justify-between mb-2"},qo={class:"flex items-center space-x-2"},Vo={class:"flex items-center"},Go={class:"text-sm font-medium text-gray-900"},Wo={class:"text-xs text-gray-500"},Qo={class:"text-sm text-gray-700 leading-relaxed"},Xo={key:0,class:"text-center"},Yo={class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},Jo={key:1,class:"text-center py-8"},Zo={class:"space-y-4 animate-item"},Ko={key:0,class:"border border-gray-200 rounded-xl overflow-hidden"},el={class:"px-4 pb-4"},tl=["innerHTML"],sl={key:1,class:"border border-gray-200 rounded-xl overflow-hidden"},ol={class:"px-4 pb-4"},ll=["innerHTML"],nl={key:0,class:"fixed bottom-6 right-6 z-50"},rl={key:0,class:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4"},al={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden transform transition-all duration-300"},il={class:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]"},dl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ul={class:"flex items-center space-x-1"},cl=["onClick","onMouseover"],ml={class:"text-right text-xs text-gray-500 mt-1"},vl={class:"text-right text-xs text-gray-500 mt-1"},gl={class:"block text-sm font-medium text-gray-700 mb-3"},hl=["disabled"],pl={key:0,class:"mt-4 grid grid-cols-3 gap-3"},fl=["src","alt"],yl={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},bl={key:1,class:"absolute top-2 left-2 p-1 bg-green-500 text-white rounded-full"},xl=["onClick","disabled"],wl={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},kl=["disabled"],_l={key:0},Cl=Se({__name:"ProductPreviewModal",props:{isOpen:{type:Boolean},productId:{},onClose:{type:Function},onAddToCart:{type:Function}},setup(_){const{singleUploadFile:B,loading:P,uploadResponse:L}=tt(),C=_,{initializeUserCurrency:H,convertFromUSD:b}=ze(),{product:n,fetchProduct:w}=Ke(),{addToCart:ee}=et(),{showToast:R}=Ze(),p=y(""),k=y(1),A=y(0),U=y(!1),N=y(null),O=y(!1),te=y(0),Q=y(0),r=je({productInfo:!1,shippingInfo:!1,reviews:!1}),a=y(new Set),h=y(!1),I=y(!1),z=y(0),E=y(null),M=y([]),x=je({name:"",email:"",rating:0,title:"",comment:""}),F=y([{_id:"687c9c3451b23dd3ffac0078",productId:{_id:"684aa2c2a1708d756091adbe",name:"Fort Bragg CA 1",discountPercentage:0,id:"684aa2c2a1708d756091adbe"},userId:"67fa8e31b42b0ed1af9e1a0f",userName:"raymond@gmail.com",userRole:"admin",rating:5,comment:"Absolutely breathtaking. The colours and detail are so vivid, it feels alive on my wall.",status:"approved",createdAt:"2025-07-20T07:35:16.629Z",updatedAt:"2025-07-20T07:35:16.629Z",id:"687c9c3451b23dd3ffac0078"}]),he=ve(()=>x.name.trim()!==""&&x.email.trim()!==""&&x.rating>0&&x.title.trim()!==""&&x.comment.trim()!=="");ge(async()=>{await H(),window.addEventListener("keydown",pe)}),Je(()=>{window.removeEventListener("keydown",pe)});const pe=l=>{C.isOpen&&(l.key==="Escape"?h.value?ne():C.onClose():l.key==="ArrowRight"?X():l.key==="ArrowLeft"&&Y())},Fe=l=>{te.value=l.changedTouches[0].screenX},Le=l=>{Q.value=l.changedTouches[0].screenX,Oe()},Oe=()=>{const t=te.value-Q.value;Math.abs(t)>50&&(t>0?X():Y())},de=l=>l.sizes&&l.sizes.length>0?Math.min(...l.sizes.map(t=>t.price)):l.price||0,ue=()=>{if(!n.value||!p.value)return 0;const l=n.value.sizes.find(t=>t._id===p.value);return l?l.price:de(n.value)},se=()=>ue()*k.value,fe=()=>{k.value++},ye=()=>{k.value>1&&k.value--},oe=l=>{O.value||(O.value=!0,A.value=l,setTimeout(()=>{O.value=!1},300))},X=()=>{n.value&&n.value.images.length>1&&!O.value&&oe((A.value+1)%n.value.images.length)},Y=()=>{n.value&&n.value.images.length>1&&!O.value&&oe(A.value===0?n.value.images.length-1:A.value-1)},q=l=>{Object.keys(r).forEach(t=>{r[t]=!1}),r[l]=!0},le=l=>l.installmentConfig&&l.installmentConfig.enabled&&l.price>=(l.installmentConfig.minimumAmount||0),be=l=>{if(!le(l)||!l.installmentConfig)return"0";const t=l.installmentConfig,m=l.price,f=Math.min(...t.availableTerms),S=t.interestRate/100/12;let $;return S>0?$=m*S*Math.pow(1+S,f)/(Math.pow(1+S,f)-1):$=m/f,b($).formattedAmount||Math.round($).toString()},xe=()=>{var l;try{if(!n.value||!p.value){R({title:"Selection Required",message:"Please select a size before adding to cart",toastType:"warning",duration:3e3});return}const t=n.value.sizes.find(f=>f._id===p.value);if(!t){R({title:"Invalid Selection",message:"Selected size is not available",toastType:"error",duration:3e3});return}const m={id:`${n.value._id}-${t.size}-${Date.now()}`,productId:n.value._id,title:n.value.name,image:((l=n.value.images)==null?void 0:l[0])||"/placeholder.svg?height=300&width=300",price:t.price,quantity:k.value,size:t.size,color:t.color,installmentConfig:t.installmentConfig||null,hasInstallmentOption:le(t),category:n.value.category,weight:n.value.weight,dimensions:{width:n.value.width,height:n.value.height,length:n.value.length}};N.value=m,U.value=!0}catch(t){console.error("Error adding to cart:",t),R({title:"Error",message:"Failed to add item to cart. Please try again.",toastType:"error",duration:3e3})}},we=()=>{U.value=!1,N.value=null},De=(l,t)=>{ee(t),R({title:"Added to Cart",message:`${t.quantity} × ${t.title} (${t.size}) added to cart`,toastType:"success",duration:3e3}),we(),C.onClose(),C.onAddToCart&&C.onAddToCart(t)},ke=()=>{console.log("clicked again"),h.value=!0,Object.assign(x,{name:"",email:"",rating:0,title:"",comment:""}),M.value=[],z.value=0},ne=()=>{h.value=!1,I.value=!1},Ue=l=>{x.rating=l},Ee=()=>{var l;M.value.length<3&&((l=E.value)==null||l.click())},He=l=>{const t=l.target;t.files&&_e(Array.from(t.files))},Ne=l=>{var t;(t=l.dataTransfer)!=null&&t.files&&_e(Array.from(l.dataTransfer.files))},_e=async l=>{const t=3-M.value.length,m=l.slice(0,t);for(const f of m)if(f.type.startsWith("image/")||f.type.startsWith("video/")){const S=new FileReader;S.onload=$=>{var Z;const J=M.value.length;M.value.push({file:f,preview:(Z=$.target)==null?void 0:Z.result,uploading:!0,uploaded:!1,uploadUrl:null}),qe(f,J)},S.readAsDataURL(f)}},qe=async(l,t)=>{try{a.value.add(t),await B(l),L.value&&(M.value[t]={...M.value[t],uploading:!1,uploaded:!0,uploadUrl:L.value.url||L.value})}catch(m){console.error("Upload failed:",m),M.value.splice(t,1)}finally{a.value.delete(t)}},Ve=l=>{M.value.splice(l,1)},Ge=async()=>{if(!(!he.value||!n.value)){I.value=!0;try{await new Promise(t=>setTimeout(t,2e3));const l={_id:Date.now().toString(),productId:{_id:n.value._id,name:n.value.name,discountPercentage:0,id:n.value._id},userId:"current-user-id",userName:x.email,userRole:"customer",rating:x.rating,comment:x.comment,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),id:Date.now().toString()};F.value.unshift(l),R({title:"Review Submitted",message:"Thank you for your review! It will be published after moderation.",toastType:"success",duration:4e3}),ne()}catch(l){console.error("Error submitting review:",l),R({title:"Error",message:"Failed to submit review. Please try again.",toastType:"error",duration:3e3})}finally{I.value=!1}}},Ce=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),We=l=>{document.body.style.overflow="hidden",l.style.opacity="0"},Qe=(l,t)=>{l.offsetHeight,l.style.transition="opacity 0.3s ease-out",l.style.opacity="1",l.querySelectorAll(".animate-item").forEach((f,S)=>{const $=f;$.style.opacity="0",$.style.transform="translateY(20px)",$.style.transition="all 0.5s ease-out",$.style.transitionDelay=`${S*.1}s`,setTimeout(()=>{$.style.opacity="1",$.style.transform="translateY(0)"},100)}),setTimeout(t,300)},Xe=(l,t)=>{l.style.transition="opacity 0.2s ease-in",l.style.opacity="0",setTimeout(()=>{document.body.style.overflow="",t()},200)};return ie(()=>C.productId,l=>{l&&C.isOpen&&(w(l),p.value="",k.value=1,A.value=0,Object.keys(r).forEach(t=>{r[t]=!1}))},{immediate:!0}),ie(()=>C.isOpen,l=>{l||(p.value="",k.value=1,A.value=0,U.value=!1,N.value=null,h.value=!1,Object.keys(r).forEach(t=>{r[t]=!1}))}),(l,t)=>(s(),Be(Pe,{to:"body"},[V(me,{name:"modal-fade",onBeforeEnter:We,onEnter:Qe,onLeave:Xe},{default:K(()=>{var m,f,S,$,J,Z,Ie,$e,Me;return[l.isOpen&&d(n)?(s(),o("div",Pt,[e("div",Rt,[e("div",zt,[e("div",Ft,[e("div",Lt,[e("button",{onClick:t[0]||(t[0]=(...i)=>l.onClose&&l.onClose(...i)),class:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close modal"},t[14]||(t[14]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",Ot,[e("h1",Dt,u(d(n).name),1)])]),e("div",Ut,[e("span",Et,u(A.value+1)+" / "+u(d(n).images.length),1)])])]),e("div",Ht,[e("div",Nt,[e("div",qt,[e("div",Vt,[e("div",Gt,[e("div",Wt,[V(Te,{name:"image-fade",tag:"div",class:"relative w-full h-full"},{default:K(()=>[(s(!0),o(j,null,T(d(n).images,(i,v)=>G((s(),o("div",{key:`image-${v}`,class:"absolute inset-0 flex items-center justify-center"},[e("img",{src:i,alt:`${d(n).name} - view ${v+1}`,class:"max-w-full max-h-full object-contain"},null,8,Qt)])),[[Ae,v===A.value]])),128))]),_:1})]),d(n).images.length>1?(s(),o("div",Xt,[e("button",{onClick:Y,class:"ml-2 p-2 rounded-full bg-white/90 shadow-md transition-all duration-200 pointer-events-auto","aria-label":"Previous image"},t[15]||(t[15]=[e("svg",{class:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("button",{onClick:X,class:"mr-2 p-2 rounded-full bg-white/90 shadow-md transition-all duration-200 pointer-events-auto","aria-label":"Next image"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))])):c("",!0),e("div",{class:"absolute inset-0",onTouchstart:Fe,onTouchend:Le},[e("div",{class:"absolute inset-y-0 left-0 w-1/3",onClick:Y}),e("div",{class:"absolute inset-y-0 right-0 w-1/3",onClick:X})],32)]),d(n).images.length>1?(s(),o("div",Yt,[e("div",Jt,[(s(!0),o(j,null,T(d(n).images,(i,v)=>(s(),o("button",{key:`thumb-${v}`,onClick:ce=>oe(v),class:g(["flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden border-2 transition-all duration-200",A.value===v?"border-blue-500 scale-105":"border-gray-200"])},[e("img",{src:i,alt:`Thumbnail ${v+1}`,class:"w-full h-full object-cover"},null,8,Kt)],10,Zt))),128))])])):c("",!0)]),e("div",es,[e("div",ts,[e("div",ss,[e("span",os,[p.value?(s(),o("span",ns,u((f=d(b)(ue()))==null?void 0:f.formattedAmount),1)):(s(),o("span",ls,"From "+u((m=d(b)(de(d(n))))==null?void 0:m.formattedAmount),1))]),e("span",null,u((S=d(n))==null?void 0:S.promotionText),1),p.value&&k.value>1?(s(),o("span",rs," × "+u(k.value),1)):c("",!0)]),p.value&&k.value>1?(s(),o("div",as," Total: "+u(($=d(b)(se()))==null?void 0:$.formattedAmount),1)):c("",!0)]),e("div",is,[t[18]||(t[18]=e("h3",{class:"text-base font-semibold text-gray-900 mb-3"},"Select Size",-1)),e("div",ds,[(s(!0),o(j,null,T(d(n).sizes,i=>{var v;return s(),o("button",{key:i._id,onClick:ce=>p.value=i._id,class:g(["relative p-4 border-2 rounded-xl transition-all duration-200",p.value===i._id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"])},[e("div",cs,[e("div",ms,[e("div",vs,u(i.size.toUpperCase()),1),e("div",gs,[W(u((v=d(b)(i.price))==null?void 0:v.formattedAmount)+" ",1),le(i)?(s(),o("span",hs," or "+u(be(i))+"/mo* ",1)):c("",!0)])]),p.value===i._id?(s(),o("div",ps,t[17]||(t[17]=[e("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):c("",!0)])],10,us)}),128))])]),e("div",fs,[t[21]||(t[21]=e("h3",{class:"text-base font-semibold text-gray-900 mb-3"},"Quantity",-1)),e("div",ys,[e("div",bs,[e("button",{onClick:ye,disabled:k.value<=1,class:"w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center disabled:opacity-50 hover:bg-gray-50 transition-colors"},t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,xs),e("div",ws,u(k.value),1),e("button",{onClick:fe,class:"w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors"},t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]))])])]),e("div",ks,[e("button",{onClick:xe,disabled:!p.value,class:"w-full bg-blue-600 text-sm hover:bg-blue-700 text-white py-3 px-6 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200"},[p.value?(s(),o("span",Is,"Add to Cart • "+u((J=d(b)(se()))==null?void 0:J.formattedAmount),1)):(s(),o("span",Cs,"Select Size to Continue"))],8,_s)]),e("div",$s,[e("div",Ms,[e("button",{onClick:t[1]||(t[1]=i=>q("reviews")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[e("div",js,[t[23]||(t[23]=e("h3",{class:"text-base font-semibold text-gray-900"},"Customer Reviews",-1)),d(n).reviewCount>0?(s(),o("div",Ts,[e("div",As,[(s(),o(j,null,T(5,i=>e("svg",{key:i,class:g(["w-4 h-4",i<=Math.round(d(n).rating)?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[22]||(t[22]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",Ss,"("+u(d(n).reviewCount)+")",1)])):c("",!0)]),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.reviews}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.reviews?"max-h-96 opacity-100":"max-h-0 opacity-0"])},[e("div",Bs,[F.value.length>0?(s(),o("div",Ps,[(s(!0),o(j,null,T(F.value.slice(0,3),i=>(s(),o("div",{key:i.id,class:"border-b border-gray-100 pb-4 last:border-b-0"},[e("div",Rs,[e("div",zs,[e("div",Fs,[(s(),o(j,null,T(5,v=>e("svg",{key:v,class:g(["w-4 h-4",v<=i.rating?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[25]||(t[25]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",Ls,u(i.userName.split("@")[0]),1)]),e("span",Os,u(Ce(i.createdAt)),1)]),e("p",Ds,u(i.comment),1)]))),128)),F.value.length>3?(s(),o("div",Us,[e("button",Es," View all "+u(F.value.length)+" reviews ",1)])):c("",!0)])):(s(),o("div",Hs,[t[26]||(t[26]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t[27]||(t[27]=e("h4",{class:"text-base font-medium text-gray-900 mb-2"},"No reviews yet",-1)),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 mb-4"},"Be the first to share your thoughts about this product.",-1)),e("button",{onClick:ke,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"}," Write a Review ")]))])],2)])]),e("div",Ns,[d(n).productInfo?(s(),o("div",qs,[e("button",{onClick:t[2]||(t[2]=i=>q("productInfo")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[t[30]||(t[30]=e("h3",{class:"text-base font-semibold text-gray-900"},"Product Details",-1)),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.productInfo}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.productInfo?"max-h-60 opacity-100":"max-h-0 opacity-0"])},[e("div",Vs,[e("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:d(n).productInfo},null,8,Gs)])],2)])):c("",!0),d(n).shippingInfo?(s(),o("div",Ws,[e("button",{onClick:t[3]||(t[3]=i=>q("shippingInfo")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[t[32]||(t[32]=e("h3",{class:"text-base font-semibold text-gray-900"},"Shipping Information",-1)),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.shippingInfo}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[31]||(t[31]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.shippingInfo?"max-h-60 opacity-100":"max-h-0 opacity-0"])},[e("div",Qs,[e("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:d(n).shippingInfo},null,8,Xs)])],2)])):c("",!0)])])])]),e("div",Ys,[e("div",Js,[e("div",Zs,[e("div",Ks,[e("div",eo,[V(Te,{name:"image-fade",tag:"div",class:"relative w-full h-full"},{default:K(()=>[(s(!0),o(j,null,T(d(n).images,(i,v)=>G((s(),o("div",{key:`desktop-image-${v}`,class:"absolute inset-0 flex items-center justify-center p-8"},[e("img",{src:i,alt:`${d(n).name} - view ${v+1}`,class:"max-w-full max-h-full object-contain hover:scale-105 transition-transform duration-300"},null,8,to)])),[[Ae,v===A.value]])),128))]),_:1})]),d(n).images.length>1?(s(),o("div",so,[e("button",{onClick:Y,class:"ml-4 p-3 rounded-full bg-white/90 shadow-lg transition-all duration-200 pointer-events-auto hover:scale-110"},t[33]||(t[33]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("button",{onClick:X,class:"mr-4 p-3 rounded-full bg-white/90 shadow-lg transition-all duration-200 pointer-events-auto hover:scale-110"},t[34]||(t[34]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))])):c("",!0)])]),d(n).images.length>1?(s(),o("div",oo,[e("div",lo,[(s(!0),o(j,null,T(d(n).images,(i,v)=>(s(),o("button",{key:`desktop-thumb-${v}`,onClick:ce=>oe(v),class:g(["flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all duration-200",A.value===v?"border-blue-500 scale-110":"border-gray-200 hover:border-gray-300"])},[e("img",{src:i,alt:`Thumbnail ${v+1}`,class:"w-full h-full object-cover"},null,8,ro)],10,no))),128))])])):c("",!0)]),e("div",ao,[e("div",io,[e("div",uo,[e("div",co,[e("span",mo,[p.value?(s(),o("span",go,u((Ie=d(b)(ue()))==null?void 0:Ie.formattedAmount),1)):(s(),o("span",vo,"From "+u((Z=d(b)(de(d(n))))==null?void 0:Z.formattedAmount),1))]),p.value&&k.value>1?(s(),o("span",ho," × "+u(k.value),1)):c("",!0)]),p.value&&k.value>1?(s(),o("div",po," Total: "+u(($e=d(b)(se()))==null?void 0:$e.formattedAmount),1)):c("",!0)]),e("div",fo,[t[36]||(t[36]=e("h3",{class:"text-base font-semibold text-gray-900 mb-4"},"Select Size",-1)),e("div",yo,[(s(!0),o(j,null,T(d(n).sizes,i=>{var v;return s(),o("button",{key:i._id,onClick:ce=>p.value=i._id,class:g(["relative p-4 border-2 rounded-xl transition-all duration-200",p.value===i._id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"])},[e("div",xo,[e("div",wo,[e("div",ko,u(i.size.toUpperCase()),1),e("div",_o,[W(u((v=d(b)(i.price))==null?void 0:v.formattedAmount)+" ",1),le(i)?(s(),o("span",Co," or "+u(be(i))+"/mo* ",1)):c("",!0)])]),p.value===i._id?(s(),o("div",Io,t[35]||(t[35]=[e("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):c("",!0)])],10,bo)}),128))])]),e("div",$o,[t[39]||(t[39]=e("h3",{class:"text-base font-semibold text-gray-900 mb-4"},"Quantity",-1)),e("div",Mo,[e("div",jo,[e("button",{onClick:ye,disabled:k.value<=1,class:"w-12 h-12 rounded-lg bg-white shadow-sm flex items-center justify-center disabled:opacity-50 hover:bg-gray-50 transition-colors"},t[37]||(t[37]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,To),e("div",Ao,u(k.value),1),e("button",{onClick:fe,class:"w-12 h-12 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-50 transition-colors"},t[38]||(t[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]))])])]),e("div",So,[e("button",{onClick:xe,disabled:!p.value,class:"w-full bg-blue-600 text-sm hover:bg-blue-700 text-white py-3 px-6 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200"},[p.value?(s(),o("span",Ro,"Add to Cart • "+u((Me=d(b)(se()))==null?void 0:Me.formattedAmount),1)):(s(),o("span",Po,"Select Size to Continue"))],8,Bo)]),e("div",zo,[e("div",Fo,[e("button",{onClick:t[4]||(t[4]=i=>q("reviews")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[e("div",Lo,[t[41]||(t[41]=e("h3",{class:"text-base font-semibold text-gray-900"},"Customer Reviews",-1)),d(n).reviewCount>0?(s(),o("div",Oo,[e("div",Do,[(s(),o(j,null,T(5,i=>e("svg",{key:i,class:g(["w-4 h-4",i<=Math.round(d(n).rating)?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[40]||(t[40]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",Uo,"("+u(d(n).reviewCount)+")",1)])):c("",!0)]),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.reviews}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.reviews?"max-h-96 opacity-100":"max-h-0 opacity-0"])},[e("div",Eo,[F.value.length>0?(s(),o("div",Ho,[(s(!0),o(j,null,T(F.value.slice(0,3),i=>(s(),o("div",{key:i.id,class:"border-b border-gray-100 pb-4 last:border-b-0"},[e("div",No,[e("div",qo,[e("div",Vo,[(s(),o(j,null,T(5,v=>e("svg",{key:v,class:g(["w-4 h-4",v<=i.rating?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[43]||(t[43]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",Go,u(i.userName.split("@")[0]),1)]),e("span",Wo,u(Ce(i.createdAt)),1)]),e("p",Qo,u(i.comment),1)]))),128)),F.value.length>3?(s(),o("div",Xo,[e("button",Yo," View all "+u(F.value.length)+" reviews ",1)])):c("",!0)])):(s(),o("div",Jo,[t[44]||(t[44]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t[45]||(t[45]=e("h4",{class:"text-base font-medium text-gray-900 mb-2"},"No reviews yet",-1)),t[46]||(t[46]=e("p",{class:"text-sm text-gray-600 mb-4"},"Be the first to share your thoughts about this product.",-1)),e("button",{onClick:ke,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"}," Write a Review ")]))])],2)])]),e("div",Zo,[d(n).productInfo?(s(),o("div",Ko,[e("button",{onClick:t[5]||(t[5]=i=>q("productInfo")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[t[48]||(t[48]=e("h3",{class:"text-base font-semibold text-gray-900"},"Product Details",-1)),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.productInfo}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.productInfo?"max-h-60 opacity-100":"max-h-0 opacity-0"])},[e("div",el,[e("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:d(n).productInfo},null,8,tl)])],2)])):c("",!0),d(n).shippingInfo?(s(),o("div",sl,[e("button",{onClick:t[6]||(t[6]=i=>q("shippingInfo")),class:"flex justify-between items-center w-full text-left p-4 hover:bg-gray-50 transition-colors"},[t[50]||(t[50]=e("h3",{class:"text-base font-semibold text-gray-900"},"Shipping Information",-1)),(s(),o("svg",{class:g(["w-5 h-5 text-gray-500 transition-transform duration-200",{"rotate-180":r.shippingInfo}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[49]||(t[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",{class:g(["overflow-hidden transition-all duration-300",r.shippingInfo?"max-h-60 opacity-100":"max-h-0 opacity-0"])},[e("div",ol,[e("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:d(n).shippingInfo},null,8,ll)])],2)])):c("",!0)])])])])])])])):c("",!0)]}),_:1}),V(me,{name:"review-button-fade"},{default:K(()=>[l.isOpen&&d(n)?(s(),o("div",nl,[e("button",{onClick:t[7]||(t[7]=m=>h.value=!0),class:"group bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 active:scale-95 transition-all duration-300 animate-bounce-slow"},t[51]||(t[51]=[e("svg",{class:"w-6 h-6 group-hover:rotate-12 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1),e("div",{class:"absolute -top-2 -right-2 w-3 h-3 bg-red-500 rounded-full animate-pulse"},null,-1)])),t[52]||(t[52]=e("div",{class:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," Write a Review ",-1))])):c("",!0)]),_:1}),V(me,{name:"review-modal-fade"},{default:K(()=>[h.value?(s(),o("div",rl,[e("div",al,[e("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},[t[54]||(t[54]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Write a Review",-1)),e("button",{onClick:ne,class:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close review modal"},t[53]||(t[53]=[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",il,[e("form",{onSubmit:ae(Ge,["prevent"]),class:"space-y-6"},[e("div",dl,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Name* "),e("span",{class:"text-gray-500"},"(this appears publicly)")],-1)),G(e("input",{"onUpdate:modelValue":t[8]||(t[8]=m=>x.name=m),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Your name"},null,512),[[re,x.name]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[W(" Email* "),e("span",{class:"text-gray-500"},"(this will be kept private)")],-1)),G(e("input",{"onUpdate:modelValue":t[9]||(t[9]=m=>x.email=m),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"your@email.com"},null,512),[[re,x.email]])])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Add a rating*",-1)),e("div",ul,[(s(),o(j,null,T(5,m=>e("button",{key:m,type:"button",onClick:f=>Ue(m),onMouseover:f=>z.value=m,onMouseleave:t[10]||(t[10]=f=>z.value=0),class:"p-1 transition-transform duration-200 hover:scale-110"},[(s(),o("svg",{class:g(["w-8 h-8 transition-colors duration-200",m<=(z.value||x.rating)?"text-yellow-400 fill-current":"text-gray-300"]),viewBox:"0 0 20 20"},t[57]||(t[57]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2))],40,cl)),64))])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Review title*",-1)),G(e("input",{"onUpdate:modelValue":t[11]||(t[11]=m=>x.title=m),type:"text",required:"",maxlength:"100",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Give your review a title"},null,512),[[re,x.title]]),e("div",ml,u(x.title.length)+"/100",1)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Review*",-1)),G(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=m=>x.comment=m),required:"",rows:"6",maxlength:"500",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"Share your thoughts about this product..."},null,512),[[re,x.comment]]),e("div",vl,u(x.comment.length)+"/500",1)]),e("div",null,[e("label",gl," Add images & videos ("+u(M.value.length)+"/3) ",1),e("div",{onClick:Ee,onDragover:t[13]||(t[13]=ae(()=>{},["prevent"])),onDrop:ae(Ne,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-all duration-200"},t[61]||(t[61]=[e("div",{class:"w-12 h-12 mx-auto mb-4 text-gray-400"},[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",class:"w-full h-full"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),e("p",{class:"text-sm text-gray-600"},"Click to upload or drag and drop",-1),e("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG, GIF up to 10MB",-1)]),32),e("input",{ref_key:"fileInput",ref:E,type:"file",multiple:"",accept:"image/*,video/*",onChange:He,class:"hidden",disabled:d(P)},null,40,hl),M.value.length>0?(s(),o("div",pl,[(s(!0),o(j,null,T(M.value,(m,f)=>(s(),o("div",{key:f,class:"relative group aspect-square bg-gray-100 rounded-lg overflow-hidden"},[e("img",{src:m.preview,alt:`Upload ${f+1}`,class:"w-full h-full object-cover"},null,8,fl),m.uploading?(s(),o("div",yl,t[62]||(t[62]=[e("div",{class:"text-white text-center"},[e("svg",{class:"animate-spin w-8 h-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-xs"},"Uploading...")],-1)]))):c("",!0),m.uploaded?(s(),o("div",bl,t[63]||(t[63]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):c("",!0),e("button",{onClick:S=>Ve(f),disabled:m.uploading,class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},t[64]||(t[64]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,xl)]))),128))])):c("",!0)]),e("div",wl,[e("button",{type:"button",onClick:ne,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," Cancel "),e("button",{type:"submit",disabled:!he.value||I.value||d(P)||a.value.size>0,class:"px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2"},[I.value?(s(),o("span",_l,t[65]||(t[65]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),e("span",null,u(d(P)||a.value.size>0?"Uploading files...":I.value?"Publishing...":"Publish"),1)],8,kl)])],32)])])])):c("",!0)]),_:1}),V(Bt,{"is-open":U.value,"cart-item":N.value,"on-close":we,"on-proceed":De},null,8,["is-open","cart-item"])]))}}),Sl=Re(Cl,[["__scopeId","data-v-e7e229b0"]]);export{Sl as _,Al as u};
