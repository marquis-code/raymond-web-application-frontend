import{g as c,P as p,r as u,l as g,Q as v,R as h,S as f,L as m,c as r,a as t,q as d,t as y,n as x,o as i}from"./Bq4bZCFA.js";const k={class:"min-h-screen flex items-center justify-center bg-gray-50"},b={class:"text-center"},_={key:0,class:"space-y-4"},w={key:1,class:"space-y-4"},R={class:"text-gray-600"},A={key:2,class:"space-y-4"},M=c({__name:"callback",setup(C){const l=p(),a=u(!0),o=u(null);return g(async()=>{const n=l.query.token;l.query.provider;const e=l.query.message;if(e){o.value=decodeURIComponent(e),a.value=!1;return}if(!n){o.value="No authentication token received",a.value=!1;return}try{v().storeAuthToken(n);const s=await h.$_get_profile();if(s.type==="ERROR")throw new Error(s.message||"Failed to get user profile");f().createUser(s.data),setTimeout(()=>{m("/dashboard")},1500)}catch(s){o.value=s.message||"Authentication failed"}finally{a.value=!1}}),(n,e)=>(i(),r("div",k,[t("div",b,[d(a)?(i(),r("div",_,e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),t("p",{class:"text-gray-600"},"Completing authentication...",-1)]))):d(o)?(i(),r("div",w,[e[2]||(e[2]=t("div",{class:"text-red-600"},[t("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[3]||(e[3]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Authentication Failed",-1)),t("p",R,y(d(o)),1),t("button",{onClick:e[0]||(e[0]=s=>n.$router.push("/login")),class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Try Again ")])):(i(),r("div",A,e[4]||(e[4]=[x('<div class="text-green-600"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-xl font-semibold text-gray-900">Authentication Successful</h2><p class="text-gray-600">Redirecting to dashboard...</p>',3)])))])]))}});export{M as default};
