import{_ as xt}from"./Cn3t_po7.js";import{U as bt,Q as yt,S as Ke,r as y,l as ke,V as $e,W as ue,X as Ae,Y as wt,Z as Be,$ as _t,a0 as kt,a1 as Ct,a2 as St,g as Ze,c as f,o as c,x as A,q as a,n as je,t as h,D as et,I as W,N as He,k as Q,E as Nt,a as t,b as m,w as ge,v as Et,z as q,M as Ie,F as Ge,s as Je,a3 as Tt,d as Y,y as Pe,A as b,C,B as At,p as Me,_ as It}from"./Bq4bZCFA.js";import{u as Pt}from"./fp3eq1o6.js";import{u as Mt,S as Ft,C as Dt,U as We,T as Qe}from"./CyLENOKE.js";import{u as $t,S as jt}from"./DnDc0KJz.js";import{u as Ut,a as zt}from"./DTWr72In.js";import{c as K,L as Rt,a as Fe}from"./Ct9L6SDY.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=K("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=K("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=K("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=K("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=K("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=K("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=K("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=K("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Bt(){const d=bt(),{socialLogin:I,socialSignup:$,setAuthCredentials:U,socialAuthLoading:w,socialAuthError:r,logout:u}=yt(),{createUser:P}=Ke(),B=y(null),M=y(null),_=y(!1),F=y(!1),he=async()=>{try{_.value=!0;const{$auth:n}=Ae();if(!n){console.error("Firebase Auth is not initialized"),M.value="Firebase Auth is not initialized",F.value=!0,_.value=!1;return}return wt(n,g=>{B.value=g,F.value=!0,_.value=!1},g=>{console.error("Auth state change error:",g),M.value="Authentication state error",F.value=!0,_.value=!1})}catch(n){console.error("Error initializing auth state:",n),M.value="Failed to initialize authentication",F.value=!0,_.value=!1}};ke(async()=>{await $e(),await he()});const Z=n=>{if(!n)return{firstName:"",lastName:""};const N=n.split(" "),g=N[0]||"",oe=N.slice(1).join(" ");return{firstName:g,lastName:oe}},H=()=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let N="";for(let g=0;g<12;g++)N+=n.charAt(Math.floor(Math.random()*n.length));return N},z=async(n,N)=>{try{const{$auth:g}=Ae();if(!g)throw new Error("Firebase Auth is not initialized");_.value=!0,M.value=null,B.value&&await Be(g);const R=(await St(g,n)).user,Se=await R.getIdToken(),{firstName:xe,lastName:be}=Z(R==null?void 0:R.displayName),ye=H(),k={idToken:Se,provider:N,email:R.email||"",uid:R.uid,displayName:R.displayName||"",photoURL:R.photoURL||"",firstName:xe,lastName:be,password:ye};U(k);const ee=await I();if(console.log(ee,"logon result"),ee.success)return await P(ee.data),ee;const te=await $();if(console.log(te,"logon result"),te.success)return await P(te.data),te;throw new Error(te.message||"Social authentication failed")}catch(g){console.error("Social auth error:",g),M.value=g.message||"Authentication failed"}finally{_.value=!1}},Ce=async()=>{const n=new Ct;return n.addScope("email"),n.addScope("profile"),n.setCustomParameters({prompt:"consent"}),await z(n,"google")},ce=async()=>{const n=new kt;n.addScope("email"),n.addScope("public_profile"),await z(n,"facebook")},D=async()=>{const n=new _t("apple.com");n.addScope("email"),n.addScope("name"),await z(n,"apple")},i=async()=>{try{const{$auth:n}=Ae();if(!n)throw new Error("Firebase Auth is not initialized");_.value=!0,await u(),await Be(n),d.push("/login")}catch(n){M.value=n.message}finally{_.value=!1}};return{user:ue(B),error:ue(M),loading:ue(_),initialized:ue(F),socialAuthLoading:ue(w),socialAuthError:ue(r),signInWithGoogle:Ce,signInWithFacebook:ce,signInWithApple:D,logout:i}}const Ht={class:"space-y-3"},Gt=["disabled"],Jt={key:0},Wt={key:1},Qt=["disabled"],Xt={key:0},Kt={key:1},Zt={key:2,class:"text-red-600 text-sm text-center"},es=Ze({__name:"SocialLoginButtons",props:{authType:{type:String}},emits:["callback"],setup(d,{emit:I}){const{showToast:$}=et(),{signInWithGoogle:U,loading:w,error:r,socialAuthLoading:u,socialAuthError:P}=Bt(),B=I,M=async()=>{try{const _=await U();B("callback",_)}catch(_){$({title:"Error",message:_,toastType:`${_} || Google login failed`,duration:3e3})}};return(_,F)=>(c(),f("div",Ht,[d.authType==="login"?(c(),f("button",{key:0,onClick:M,disabled:a(w)||a(u),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[F[0]||(F[0]=je('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!a(w)&&!a(u)?(c(),f("span",Jt,"Sign in with Google")):(c(),f("span",Wt,"Signing in..."))],8,Gt)):A("",!0),d.authType==="signup"?(c(),f("button",{key:1,onClick:M,disabled:a(w)||a(u),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[F[1]||(F[1]=je('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!a(w)&&!a(u)?(c(),f("span",Xt,"Sign up with Google")):(c(),f("span",Kt,"Signing up..."))],8,Qt)):A("",!0),a(r)||a(P)?(c(),f("div",Zt,h(a(r)||a(P)),1)):A("",!0)]))}}),X={$_create_shipping_config(d){return W.post("/shipping-tax/shipping",d)},$_create_tax_config(d){return W.post("/shipping-tax/tax",d)},$_get_all_shipping_configs(){return W.get("/shipping-tax/shipping")},$_get_all_tax_configs(){return W.get("/shipping-tax/tax")},$_update_shipping_config(d,I){return W.patch(`/shipping-tax/shipping/${d}`,I)},$_update_tax_config(d,I){return W.patch(`/shipping-tax/tax/${d}`,I)},$_delete_shipping_config(d){return W.delete(`/shipping-tax/shipping/${d}`)},$_delete_tax_config(d){return W.delete(`/shipping-tax/tax/${d}`)}},ts=()=>{const d=y(null),I=async()=>{try{return(await X.$_get_all_tax_configs()).data}catch(r){throw d.value=r.message||"Failed to fetch tax configs",d.value}},$=async r=>{try{return(await X.$_create_tax_config({...r})).data}catch(u){throw d.value=u.message||"Failed to create tax config",d.value}},U=async(r,u)=>{try{return(await X.$_update_tax_config(r,{countryCode:u.countryCode||"",countryName:u.countryName||"",vatRate:u.vatRate||0,isActive:u.isActive!==void 0?u.isActive:!0})).data}catch(P){throw d.value=P.message||"Failed to update tax config",d.value}},w=async r=>{try{return(await X.$_delete_tax_config(r)).data}catch(u){throw d.value=u.message||"Failed to delete tax config",d.value}};return ke(()=>{I()}),{error:d,fetchTaxConfigs:I,createTaxConfig:$,updateTaxConfig:U,deleteTaxConfig:w}},ss=()=>{const d=y(null),I=async()=>{try{return(await X.$_get_all_shipping_configs()).data}catch(r){throw d.value=r.message||"Failed to fetch shipping configs",d.value}},$=async r=>{try{return(await X.$_create_shipping_config({...r})).data}catch(u){throw d.value=u.message||"Failed to create shipping config",d.value}},U=async(r,u)=>{try{return(await X.$_update_shipping_config(r,{countryCode:u.countryCode||"",countryName:u.countryName||"",shippingRate:u.shippingRate||0,isActive:u.isActive!==void 0?u.isActive:!0})).data}catch(P){throw d.value=P.message||"Failed to update shipping config",d.value}},w=async r=>{try{return(await X.$_delete_shipping_config(r)).data}catch(u){throw d.value=u.message||"Failed to delete shipping config",d.value}};return ke(()=>{I()}),{error:d,fetchShippingConfigs:I,createShippingConfig:$,updateShippingConfig:U,deleteShippingConfig:w}},as={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100"},os={key:0,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},rs={class:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200 text-center"},ls={class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center"},ns={key:1,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},is={class:"max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200"},ds={class:"text-center mb-8"},us={class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},cs={class:"bg-slate-50 rounded-xl p-6 mb-8"},ps={class:"flex justify-between items-center mb-3"},fs={class:"font-bold text-slate-800"},ms={class:"flex justify-between items-center"},gs={class:"font-bold text-xl text-slate-800"},vs={key:2,class:"container mx-auto px-4 py-8 lg:py-12"},hs={class:"max-w-2xl mx-auto mb-12"},xs={class:"flex items-center justify-between relative"},bs={class:"absolute top-4 left-0 right-0 h-0.5 bg-slate-200"},ys={class:"relative flex flex-col items-center"},ws={class:"relative flex flex-col items-center"},_s={class:"relative flex flex-col items-center"},ks={class:"grid lg:grid-cols-5 gap-8 max-w-7xl mx-auto"},Cs={class:"lg:col-span-3"},Ss={key:0,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 lg:p-8"},Ns={class:"flex items-center mb-6"},Es={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},As={class:"space-y-2"},Is={class:"space-y-2"},Ps={class:"space-y-2"},Ms={class:"space-y-2"},Fs={class:"space-y-2"},Ds={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},$s={class:"space-y-2"},js={class:"space-y-2"},Us={class:"space-y-2"},zs={class:"space-y-2"},Rs=["value"],Ls={type:"submit",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},Os={key:1,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 lg:p-8"},Vs={class:"flex items-center mb-6"},qs={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Ys={class:"space-y-4 mb-8"},Bs={class:"flex items-center"},Hs={key:0,class:"w-3 h-3 rounded-full bg-white"},Gs={class:"flex-1"},Js={class:"flex justify-between items-center mb-1"},Ws={class:"font-bold text-slate-800"},Qs={class:"flex items-center"},Xs={key:0,class:"w-3 h-3 rounded-full bg-white"},Ks={class:"flex-1"},Zs={class:"flex justify-between items-center mb-1"},ea={class:"font-bold text-slate-800"},ta={class:"flex gap-2"},sa={key:2,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 lg:p-8"},aa={class:"flex items-center mb-6"},oa={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},ra={class:"space-y-4 mb-8"},la={class:"flex items-center"},na={key:0,class:"w-3 h-3 rounded-full bg-white"},ia={class:"w-10 h-10 bg-slate-100 rounded-md flex items-center justify-center"},da={key:0,class:"border-t border-slate-200 pt-6 mb-8"},ua={class:"space-y-4"},ca={class:"space-y-2"},pa={class:"relative"},fa={class:"space-y-2"},ma={class:"grid grid-cols-2 gap-4"},ga={class:"space-y-2"},va={class:"space-y-2"},ha={class:"relative"},xa={class:"flex gap-4"},ba=["disabled"],ya={class:"lg:col-span-2"},wa={class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 sticky top-6"},_a={class:"flex items-center mb-6"},ka={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Ca={key:0,class:"space-y-4 mb-6 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},Sa={class:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0"},Na=["src","alt"],Ea={class:"flex-1 min-w-0"},Ta={class:"font-semibold text-slate-800 text-sm truncate"},Aa={class:"text-sm text-slate-600"},Ia={key:0,class:"text-xs text-slate-500"},Pa={class:"flex items-center mt-2"},Ma=["onClick","disabled"],Fa={class:"mx-3 text-sm font-semibold min-w-[2rem] text-center"},Da=["onClick"],$a=["onClick"],ja={class:"text-right"},Ua={class:"font-semibold text-slate-800"},za={class:"border-t border-slate-200 pt-4 space-y-3"},Ra={class:"flex justify-between text-sm"},La={class:"font-semibold text-slate-800"},Oa={class:"flex justify-between text-sm"},Va={class:"font-semibold text-slate-800"},qa={class:"flex justify-between text-sm"},Ya={class:"text-slate-600"},Ba={class:"font-semibold text-slate-800"},Ha={key:0,class:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg"},Ga={class:"flex justify-between font-bold text-lg pt-3 border-t border-slate-200"},Ja={class:"text-slate-800"},Wa={class:"mt-6 pt-4 border-t border-slate-200"},Qa={class:"flex items-center text-sm text-slate-600 mb-3"},Xa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},Ka={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative"},Za={key:0},eo={class:"space-y-3"},to={key:1},so={class:"mb-4"},ao={class:"space-y-2"},oo={class:"space-y-2"},ro=["disabled"],lo={class:"text-center"},no={key:2},io={class:"mb-4"},uo={class:"grid grid-cols-2 gap-4"},co={class:"space-y-2"},po={class:"space-y-2"},fo={class:"space-y-2"},mo={class:"space-y-2"},go={class:"space-y-2"},vo=["disabled"],ho={class:"text-center"},xo=2.5,ve=1,_e=3,bo=Ze({__name:"checkout",setup(d,{expose:I}){const $=Nt(),U=Tt(),w=y(!1),{showToast:r}=et(),u=s=>{s.success&&(w.value=!1)},{cart:P,removeFromCart:B,updateCartItemQuantity:M}=Pt(),{signup:_}=Mt(),{login:F}=$t(),{isLoggedIn:he,user:Z}=Ke(),{setItem:H,getItem:z,removeItem:Ce}=zt(),{checkoutStep:ce,checkoutSummary:D,deliveryDetails:i,deliveryMethod:n,paymentMethod:N,cardDetails:g,isProcessing:oe,orderComplete:R,orderId:Se,setDeliveryMethod:xe,setPaymentMethod:be,processPayment:ye,persistDeliveryDetails:k,initializeCheckout:ee}=Ut(),{fetchShippingConfigs:te}=ss(),{fetchTaxConfigs:tt}=ts(),se=y([]),Ue=y([]),L=y(null),V=y(0),G=y(0),ze=y(!1),S=y(1),J=y("check"),pe=y(!1),fe=y(!1),p=y([]),x=y({firstName:"",lastName:"",email:"",password:"",phone:"",role:"customer"}),re=y({email:"",password:""}),E={CART:"art-gallery-cart",CHECKOUT_STEP:"checkout-step",DELIVERY_DETAILS:"checkout-delivery-details",DELIVERY_METHOD:"checkout-delivery-method",PAYMENT_METHOD:"checkout-payment-method",SELECTED_COUNTRY:"checkout-selected-country",SHIPPING_CONFIG:"checkout-shipping-config",TAX_CONFIG:"checkout-tax-config",GUEST_MODE:"checkout-guest-mode"},st=()=>{try{if(localStorage){const s=localStorage.getItem(E.CART);if(s){const e=JSON.parse(s);if(Array.isArray(e))return p.value=e,e}}}catch(s){console.error("Failed to load cart from localStorage:",s)}return[]},le=()=>{try{localStorage&&localStorage.setItem(E.CART,JSON.stringify(p.value))}catch(s){console.error("Failed to save cart to localStorage:",s)}},j=()=>{try{localStorage&&(H(E.CHECKOUT_STEP,S.value.toString()),H(E.DELIVERY_METHOD,n.value),H(E.PAYMENT_METHOD,N.value),L.value&&H(E.SELECTED_COUNTRY,JSON.stringify({countryInfo:L.value,shippingFee:V.value,taxRate:G.value})),k())}catch(s){console.error("Failed to persist checkout data:",s)}},at=()=>{try{if(localStorage){const s=z(E.CHECKOUT_STEP);if(s&&!isNaN(Number(s))){const T=Number(s);T>=ve&&T<=_e&&(S.value=T)}const e=z(E.DELIVERY_METHOD);e&&["standard","express","pickup"].includes(e)&&xe(e);const l=z(E.PAYMENT_METHOD);l&&["flutterwave","interswitch","manual"].includes(l)&&be(l);const v=z(E.DELIVERY_DETAILS);if(v)try{const T=JSON.parse(v);Object.assign(i,T)}catch(T){console.error("Failed to parse saved delivery details",T)}const o=z(E.SELECTED_COUNTRY);if(o)try{const T=JSON.parse(o);L.value=T.countryInfo,V.value=T.shippingFee||0,G.value=T.taxRate||0}catch(T){console.error("Failed to parse saved country data",T)}}}catch(s){console.error("Failed to load persisted checkout data:",s)}},Ne=()=>{try{localStorage&&Object.values(E).forEach(s=>{s!==E.CART&&Ce(s)})}catch(s){console.error("Failed to clear persisted checkout data:",s)}},ae=He(()=>!p.value||p.value.length===0?0:p.value.reduce((s,e)=>{const l=e.price||0,v=e.quantity||0;return s+l*v},0)),ot=He(()=>{var s;return Array.isArray(se.value)&&((s=se==null?void 0:se.value)==null?void 0:s.filter(e=>e.isActive))}),rt=async()=>{try{ze.value=!0;const[s,e]=await Promise.all([te(),tt()]);se.value=s||[],Ue.value=e||[],await $e(),i.country&&se.value.length>0&&Re()}catch(s){console.error("Failed to load configurations:",s);const e=de(s);r&&r({title:"Configuration Error",message:e||"Failed to load shipping and tax configurations. Please refresh the page or contact support.",toastType:"error",duration:5e3})}finally{ze.value=!1}},Re=()=>{const s=i.country;if(!s){L.value=null,V.value=0,G.value=0;return}const e=se.value.find(v=>v.countryCode===s&&v.isActive),l=Ue.value.find(v=>v.countryCode===s&&v.isActive);e?(L.value=e,V.value=e.shippingRate||0):(L.value=null,V.value=0),l?G.value=l.vatRate||0:G.value=0,j()},Le=s=>{xe(s),j()},lt=s=>{be(s),j()},ne=()=>n.value==="pickup"?0:n.value==="express"?V.value*xo:V.value,me=()=>ae.value*G.value/100,ie=()=>{const s=ae.value,e=ne(),l=me();return s+e+l},Ee=()=>{const s={...U.query};S.value>ve?s.step=S.value.toString():delete s.step,$.replace({query:s})},Oe=()=>{S.value<_e&&(S.value++,j(),Ee())},Ve=()=>{S.value>ve&&(S.value--,j(),Ee())},nt=()=>{const s=U.query.step;if(s&&!isNaN(Number(s))){const e=Number(s);e>=ve&&e<=_e&&(S.value=e)}},Te=()=>{const s={...U.query};delete s.step,$.replace({query:s})},de=s=>{if(!s)return"An unknown error occurred";if(typeof s=="string")return s;if(s.response){const{data:e,statusText:l}=s.response;if(e){if(typeof e=="string")return e;if(e.message)return e.message;if(e.error)return typeof e.error=="string"?e.error:JSON.stringify(e.error);if(e.errors&&Array.isArray(e.errors))return e.errors.join(", ")}return l||`Error ${s.response.status}`}if(s.message)return s.message;if(s.error){if(typeof s.error=="string")return s.error;if(s.error.message)return s.error.message}try{return JSON.stringify(s)}catch{return"An unexpected error occurred"}},it=async()=>{try{if(!p.value||p.value.length===0){r({title:"Error",message:"Your cart is empty. Please add items before proceeding.",toastType:"error",duration:3e3});return}if(!D||!D.items){const s={items:p.value,subtotal:ae.value,shipping:ne(),tax:me(),total:ie()};ee(s)}else D.items=p.value,D.subtotal=ae.value,D.total=ie(),D.shipping=ne(),D.tax=me(),L.value&&(D.country={code:L.value.countryCode,name:L.value.countryName});if(ye){const s=await ye();if(console.log(s,"store process payment"),s&&s.success)return localStorage&&(localStorage.removeItem(E.CART),p.value=[]),Ne(),Te(),s;throw console.error("Payment failed:",s),new Error((s==null?void 0:s.message)||"Payment processing failed")}else throw r({title:"Error",message:"Payment system is not available. Please refresh the page and try again.",toastType:"error",duration:3e3}),new Error("Payment system not available")}catch(s){console.error("Payment processing failed:",s);const e=de(s);throw r({title:"Payment Failed",message:e||"There was an error processing your payment. Please try again.",toastType:"error",duration:5e3}),s}},dt=()=>{w.value=!1,H&&H(E.GUEST_MODE,"true")},ut=()=>{w.value=!1,J.value="check"},ct=async()=>{try{pe.value=!0;const s={firstName:x.value.firstName,lastName:x.value.lastName,email:x.value.email,password:x.value.password,phone:x.value.phone,role:x.value.role};if(_){const e=await _(s);if(e&&e.success)i&&(i.firstName=x.value.firstName,i.lastName=x.value.lastName,i.email=x.value.email,i.phone=x.value.phone||""),j(),r&&r({title:e.title||"Account Created",message:e.message||"Your account has been created successfully!",toastType:"success",duration:3e3}),w.value=!1;else{e&&!e.success&&r&&r({title:e.title||"Signup Failed",message:e.message||"There was an error creating your account. Please try again.",toastType:"error",duration:5e3});return}}}catch(s){console.error("Signup failed:",s);const e=de(s);r&&r({title:"Signup Failed",message:e||"There was an error creating your account. Please try again.",toastType:"error",duration:5e3})}finally{pe.value=!1}},pt=async()=>{try{fe.value=!0;const s={email:re.value.email,password:re.value.password};if(F){const e=await F(s);if(e&&e.success){try{const l=JSON.parse(localStorage.getItem("user-data")||"{}");l&&i&&(i.firstName=l.firstName||"",i.lastName=l.lastName||"",i.email=l.email||"",i.phone=l.phone||"",j())}catch(l){console.warn("Failed to parse user data from localStorage:",l)}r&&r({title:e.title||"Signed In",message:e.message||"You have been signed in successfully!",toastType:"success",duration:3e3}),w.value=!1}else{e&&!e.success&&r&&r({title:e.title||"Sign In Failed",message:e.message||"There was an error signing in. Please check your credentials and try again.",toastType:"error",duration:5e3});return}}}catch(s){console.error("Signin failed:",s);const e=de(s);r&&r({title:"Sign In Failed",message:e||"There was an error signing in. Please check your credentials and try again.",toastType:"error",duration:5e3})}finally{fe.value=!1}},O=s=>typeof s!="number"||isNaN(s)?"0.00":s.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),ft=()=>Math.floor(Math.random()*9e5+1e5).toString(),mt=s=>{var o;let l=s.target.value.replace(/\s/g,"").replace(/[^0-9]/gi,"");const v=((o=l.match(/.{1,4}/g))==null?void 0:o.join(" "))||l;g.cardNumber=v},gt=s=>{let l=s.target.value.replace(/\D/g,"");l.length>=2&&(l=l.substring(0,2)+"/"+l.substring(2,4)),g.expiryDate=l},qe=async(s,e)=>{if(typeof s=="string"&&typeof e=="number"&&e>0)try{if(M){const l=await M(s,e);if(l&&l.success){const v=p.value.findIndex(o=>o.id===s);v!==-1&&(p.value[v].quantity=e,le()),r&&r({title:l.title||"Cart Updated",message:l.message||"Item quantity has been updated",toastType:"info",duration:2e3})}else l&&!l.success&&r&&r({title:l.title||"Update Failed",message:l.message||"Failed to update item quantity. Please try again.",toastType:"error",duration:3e3})}else{const l=p.value.findIndex(v=>v.id===s);l!==-1&&(p.value[l].quantity=e,le())}}catch(l){console.error("Failed to update item quantity:",l);const v=de(l);r&&r({title:"Update Failed",message:v||"Failed to update item quantity. Please try again.",toastType:"error",duration:3e3})}},vt=async s=>{if(typeof s=="string")try{if(B){const e=await B(s);e&&e.success?(p.value=p.value.filter(l=>l.id!==s),le(),r&&r({title:e.title||"Item Removed",message:e.message||"Item has been removed from your cart",toastType:"info",duration:3e3})):e&&!e.success&&r&&r({title:e.title||"Removal Failed",message:e.message||"Failed to remove item from cart. Please try again.",toastType:"error",duration:3e3})}else p.value=p.value.filter(e=>e.id!==s),le()}catch(e){console.error("Failed to remove item from cart:",e);const l=de(e);r&&r({title:"Removal Failed",message:l||"Failed to remove item from cart. Please try again.",toastType:"error",duration:3e3})}},ht=s=>{const e=s.target;e&&(e.src="/placeholder.svg?height=100&width=100")},Ye=()=>{const s=z?z(E.GUEST_MODE)==="true":!1,e=localStorage?localStorage.getItem("token"):null;!he.value&&!s&&!e&&(w.value=!0)};return Q(p,()=>{D&&(D.items=p.value,D.subtotal=ae.value),le()},{deep:!0}),Q(he,s=>{s?(w.value=!1,Z.value&&i&&(i.firstName=Z.value.firstName||"",i.lastName=Z.value.lastName||"",i.email=Z.value.email||"",i.phone=Z.value.phone||"",j())):Ye()}),Q(R,s=>{s&&(Te(),Ne())}),Q(S,s=>{ce&&(ce.value=s),j()}),Q(ce,s=>{typeof s=="number"&&s>=ve&&s<=_e&&(S.value=s,Ee())}),Q(i,()=>{j()},{deep:!0}),Q(n,()=>{j()}),Q(N,()=>{j()}),ke(async()=>{if(st(),at(),await rt(),nt(),$e(()=>{Ye()}),(!p.value||p.value.length===0)&&(P.value&&P.value.length>0?(p.value=P.value,le()):$.push("/artworks")),p.value&&p.value.length>0){const s={items:p.value,subtotal:ae.value,shipping:ne(),tax:me(),total:ie()};ee(s)}}),I({cancelCheckout:()=>{Ne(),Te(),$.push("/artworks")}}),(s,e)=>{const l=xt,v=es;return c(),f("div",as,[e[93]||(e[93]=t("div",{class:"fixed inset-0 opacity-5 pointer-events-none"},[t("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),!p.value||p.value.length===0?(c(),f("div",os,[t("div",rs,[t("div",ls,[m(a(Ft),{class:"w-12 h-12 text-slate-400"})]),e[36]||(e[36]=t("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"Your cart is empty",-1)),e[37]||(e[37]=t("p",{class:"text-slate-600 mb-8"},"Add some amazing artwork to your cart to continue with checkout.",-1)),m(l,{to:"/artworks",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"},{default:ge(()=>[m(a(De),{class:"w-4 h-4 mr-2"}),e[35]||(e[35]=Y(" Browse Artwork "))]),_:1,__:[35]})])])):a(R)?(c(),f("div",ns,[t("div",is,[t("div",ds,[t("div",us,[m(a(Dt),{class:"w-10 h-10 text-emerald-600"})]),e[38]||(e[38]=t("h2",{class:"text-3xl font-bold text-slate-800 mb-4"},"Order Confirmed!",-1)),e[39]||(e[39]=t("p",{class:"text-slate-600 mb-2"},"Thank you for your purchase",-1)),e[40]||(e[40]=t("p",{class:"text-slate-500 text-sm"},"We've sent a confirmation email with your order details",-1))]),t("div",cs,[t("div",ps,[e[41]||(e[41]=t("span",{class:"text-slate-600 font-medium"},"Order Number",-1)),t("span",fs,"#"+h(a(Se)||ft()),1)]),t("div",ms,[e[42]||(e[42]=t("span",{class:"text-slate-600 font-medium"},"Total Amount",-1)),t("span",gs,"$"+h(O(ie())),1)])]),m(l,{to:"/",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},{default:ge(()=>e[43]||(e[43]=[Y(" Continue Shopping ")])),_:1,__:[43]})])])):(c(),f("div",vs,[e[80]||(e[80]=t("div",{class:"text-center mt-20 mb-12"},[t("h1",{class:"text-3xl font-bold text-slate-800 mb-4"},"Secure Checkout"),t("p",{class:"text-slate-600 max-w-2xl mx-auto"},"Complete your purchase securely. Your information is protected with industry-standard encryption.")],-1)),t("div",hs,[t("div",xs,[t("div",bs,[t("div",{class:"h-full bg-gradient-to-r from-slate-800 to-slate-900 transition-all duration-500 ease-out",style:Et({width:`${(S.value-1)/2*100}%`})},null,4)]),t("div",ys,[t("div",{class:q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",S.value>=1?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[m(a(We),{class:"w-4 h-4"})],2),e[44]||(e[44]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Details",-1))]),t("div",ws,[t("div",{class:q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",S.value>=2?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[m(a(Qe),{class:"w-4 h-4"})],2),e[45]||(e[45]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Shipping",-1))]),t("div",_s,[t("div",{class:q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",S.value>=3?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[m(a(we),{class:"w-4 h-4"})],2),e[46]||(e[46]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Payment",-1))])])]),t("div",ks,[t("div",Cs,[m(Ie,{name:"slide-fade",mode:"out-in"},{default:ge(()=>[S.value===1?(c(),f("div",Ss,[t("div",Ns,[t("div",Es,[m(a(We),{class:"w-5 h-5 text-slate-600"})]),e[47]||(e[47]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Customer Details",-1))]),t("form",{onSubmit:Pe(Oe,["prevent"]),class:"space-y-6"},[t("div",Ts,[t("div",As,[e[48]||(e[48]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),b(t("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=o=>a(i).firstName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your first name",onInput:e[1]||(e[1]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).firstName]])]),t("div",Is,[e[49]||(e[49]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),b(t("input",{id:"lastName","onUpdate:modelValue":e[2]||(e[2]=o=>a(i).lastName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your last name",onInput:e[3]||(e[3]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).lastName]])])]),t("div",Ps,[e[50]||(e[50]=t("label",{for:"email",class:"block text-sm font-semibold text-slate-700"},"Email Address",-1)),b(t("input",{id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>a(i).email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",onInput:e[5]||(e[5]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).email]])]),t("div",Ms,[e[51]||(e[51]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone Number",-1)),b(t("input",{id:"phone","onUpdate:modelValue":e[6]||(e[6]=o=>a(i).phone=o),type:"tel",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your phone number",onInput:e[7]||(e[7]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).phone]])]),t("div",Fs,[e[52]||(e[52]=t("label",{for:"address",class:"block text-sm font-semibold text-slate-700"},"Street Address",-1)),b(t("input",{id:"address","onUpdate:modelValue":e[8]||(e[8]=o=>a(i).address=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your street address",onInput:e[9]||(e[9]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).address]])]),t("div",Ds,[t("div",$s,[e[53]||(e[53]=t("label",{for:"city",class:"block text-sm font-semibold text-slate-700"},"City",-1)),b(t("input",{id:"city","onUpdate:modelValue":e[10]||(e[10]=o=>a(i).city=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"City",onInput:e[11]||(e[11]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).city]])]),t("div",js,[e[54]||(e[54]=t("label",{for:"state",class:"block text-sm font-semibold text-slate-700"},"State",-1)),b(t("input",{id:"state","onUpdate:modelValue":e[12]||(e[12]=o=>a(i).state=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"State",onInput:e[13]||(e[13]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).state]])]),t("div",Us,[e[55]||(e[55]=t("label",{for:"zipCode",class:"block text-sm font-semibold text-slate-700"},"ZIP Code",-1)),b(t("input",{id:"zipCode","onUpdate:modelValue":e[14]||(e[14]=o=>a(i).zipCode=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"ZIP",onInput:e[15]||(e[15]=(...o)=>a(k)&&a(k)(...o))},null,544),[[C,a(i).zipCode]])])]),t("div",zs,[e[57]||(e[57]=t("label",{for:"country",class:"block text-sm font-semibold text-slate-700"},"Country",-1)),b(t("select",{id:"country","onUpdate:modelValue":e[16]||(e[16]=o=>a(i).country=o),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",onChange:Re},[e[56]||(e[56]=t("option",{value:""},"Select Country",-1)),(c(!0),f(Ge,null,Je(ot.value,o=>(c(),f("option",{key:o.countryCode,value:o.countryCode},h(o.countryName),9,Rs))),128))],544),[[At,a(i).country]])]),t("button",Ls,[e[58]||(e[58]=Y(" Continue to Shipping ")),m(a(Xe),{class:"w-5 h-5 ml-2"})])],32)])):S.value===2?(c(),f("div",Os,[t("div",Vs,[t("div",qs,[m(a(Qe),{class:"w-5 h-5 text-slate-600"})]),e[59]||(e[59]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Shipping Method",-1))]),t("div",Ys,[t("div",{class:q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",a(n)==="standard"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[17]||(e[17]=o=>Le("standard"))},[t("div",Bs,[t("div",{class:q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",a(n)==="standard"?"border-slate-800 bg-slate-800":"border-slate-300"])},[a(n)==="standard"?(c(),f("div",Hs)):A("",!0)],2),t("div",Gs,[t("div",Js,[e[60]||(e[60]=t("span",{class:"font-semibold text-slate-800"},"Standard Shipping",-1)),t("span",Ws,"$"+h(O(V.value)),1)]),e[61]||(e[61]=t("p",{class:"text-sm text-slate-600"},"Delivery within 5-7 business days",-1))])])],2),t("div",{class:q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",a(n)==="express"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[18]||(e[18]=o=>Le("express"))},[t("div",Qs,[t("div",{class:q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",a(n)==="express"?"border-slate-800 bg-slate-800":"border-slate-300"])},[a(n)==="express"?(c(),f("div",Xs)):A("",!0)],2),t("div",Ks,[t("div",Zs,[e[62]||(e[62]=t("span",{class:"font-semibold text-slate-800"},"Express Shipping",-1)),t("span",ea,"$"+h(O(V.value*2.5)),1)]),e[63]||(e[63]=t("p",{class:"text-sm text-slate-600"},"Delivery within 2-3 business days",-1))])])],2)]),t("div",ta,[t("button",{onClick:Ve,class:"flex-1 py-3 border-2 text-sm border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[m(a(De),{class:"w-4 h-4 mr-2"}),e[64]||(e[64]=Y(" Back "))]),t("button",{onClick:Oe,class:"flex-1 py-3 px-3 text-sm bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},[e[65]||(e[65]=Y(" Continue to Payment ")),m(a(Xe),{class:"w-4 h-4 ml-2"})])])])):S.value===3?(c(),f("div",sa,[t("div",aa,[t("div",oa,[m(a(we),{class:"w-5 h-5 text-slate-600"})]),e[66]||(e[66]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Payment Method",-1))]),t("div",ra,[t("div",{class:q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",a(N)==="flutterwave"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[19]||(e[19]=o=>lt("flutterwave"))},[t("div",la,[t("div",{class:q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",a(N)==="flutterwave"?"border-slate-800 bg-slate-800":"border-slate-300"])},[a(N)==="flutterwave"?(c(),f("div",na)):A("",!0)],2),e[67]||(e[67]=t("div",{class:"flex-1"},[t("span",{class:"font-semibold text-slate-800"},"Pay with Flutterwave"),t("p",{class:"text-sm text-slate-600"},"Secure payment via Flutterwave")],-1)),t("div",ia,[m(a(we),{class:"w-6 h-6 text-slate-600"})])])],2)]),m(Ie,{name:"fade"},{default:ge(()=>[a(N)==="manual"?(c(),f("div",da,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Card Details",-1)),t("div",ua,[t("div",ca,[e[68]||(e[68]=t("label",{for:"cardNumber",class:"block text-sm font-semibold text-slate-700"},"Card Number",-1)),t("div",pa,[b(t("input",{id:"cardNumber","onUpdate:modelValue":e[20]||(e[20]=o=>a(g).cardNumber=o),type:"text",placeholder:"1234 5678 9012 3456",required:"",class:"w-full px-4 py-3 pl-12 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",onInput:mt},null,544),[[C,a(g).cardNumber]]),m(a(we),{class:"w-5 h-5 text-slate-400 absolute left-4 top-1/2 transform -translate-y-1/2"})])]),t("div",fa,[e[69]||(e[69]=t("label",{for:"cardName",class:"block text-sm font-semibold text-slate-700"},"Cardholder Name",-1)),b(t("input",{id:"cardName","onUpdate:modelValue":e[21]||(e[21]=o=>a(g).cardName=o),type:"text",placeholder:"John Doe",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white"},null,512),[[C,a(g).cardName]])]),t("div",ma,[t("div",ga,[e[70]||(e[70]=t("label",{for:"expiryDate",class:"block text-sm font-semibold text-slate-700"},"Expiry Date",-1)),b(t("input",{id:"expiryDate","onUpdate:modelValue":e[22]||(e[22]=o=>a(g).expiryDate=o),type:"text",placeholder:"MM/YY",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",onInput:gt},null,544),[[C,a(g).expiryDate]])]),t("div",va,[e[71]||(e[71]=t("label",{for:"cvv",class:"block text-sm font-semibold text-slate-700"},"CVV",-1)),t("div",ha,[b(t("input",{id:"cvv","onUpdate:modelValue":e[23]||(e[23]=o=>a(g).cvv=o),type:"text",placeholder:"123",required:"",maxlength:"4",class:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white"},null,512),[[C,a(g).cvv]]),m(a(Lt),{class:"w-5 h-5 text-slate-400 absolute right-4 top-1/2 transform -translate-y-1/2 cursor-help",title:"3-digit security code on the back of your card"})])])])])])):A("",!0)]),_:1}),t("div",xa,[t("button",{onClick:Ve,class:"flex-1 py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[m(a(De),{class:"w-4 h-4 mr-2"}),e[73]||(e[73]=Y(" Back "))]),t("button",{onClick:it,disabled:a(oe),class:"flex-1 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[a(oe)?(c(),Me(a(Fe),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):A("",!0),Y(" "+h(a(oe)?"Processing...":`Complete Order - $${O(ie())}`),1)],8,ba)])])):A("",!0)]),_:1})]),t("div",ya,[t("div",wa,[t("div",_a,[t("div",ka,[m(a(jt),{class:"w-5 h-5 text-slate-600"})]),e[74]||(e[74]=t("h2",{class:"text-xl font-bold text-slate-800"},"Order Summary",-1))]),p.value&&p.value.length>0?(c(),f("div",Ca,[(c(!0),f(Ge,null,Je(p.value,o=>(c(),f("div",{key:o.id,class:"flex gap-4 p-4 border border-slate-100 rounded-xl hover:bg-slate-50 transition-all duration-200 group"},[t("div",Sa,[t("img",{src:o.image||"/placeholder.svg?height=64&width=64",alt:o.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:ht},null,40,Na)]),t("div",Ea,[t("h4",Ta,h(o.title),1),t("p",Aa,"$"+h(O(o.price)),1),o.size?(c(),f("p",Ia,"Size: "+h(o.size),1)):A("",!0),t("div",Pa,[t("button",{onClick:T=>qe(o.id,Math.max(1,o.quantity-1)),class:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors",disabled:o.quantity<=1},[m(a(Ot),{class:"w-3 h-3"})],8,Ma),t("span",Fa,h(o.quantity),1),t("button",{onClick:T=>qe(o.id,o.quantity+1),class:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors"},[m(a(Vt),{class:"w-3 h-3"})],8,Da),t("button",{onClick:T=>vt(o.id),class:"ml-auto w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-red-50 hover:border-red-200 hover:text-red-600 transition-colors"},[m(a(qt),{class:"w-3 h-3"})],8,$a)])]),t("div",ja,[t("span",Ua,"$"+h(O(o.price*o.quantity)),1)])]))),128))])):A("",!0),t("div",za,[t("div",Ra,[e[75]||(e[75]=t("span",{class:"text-slate-600"},"Subtotal",-1)),t("span",La,"$"+h(O(ae.value)),1)]),t("div",Oa,[e[76]||(e[76]=t("span",{class:"text-slate-600"},"Shipping",-1)),t("span",Va,h(ne()===0?"Free":`$${O(ne())}`),1)]),t("div",qa,[t("span",Ya,"Tax ("+h(G.value)+"%)",1),t("span",Ba,"$"+h(O(me())),1)]),L.value?(c(),f("div",Ha,[t("p",null,"Shipping to: "+h(L.value.countryName),1),t("p",null,"Tax Rate: "+h(G.value)+"%",1)])):A("",!0),t("div",Ga,[e[77]||(e[77]=t("span",{class:"text-slate-800"},"Total",-1)),t("span",Ja,"$"+h(O(ie())),1)])]),t("div",Wa,[t("div",Qa,[m(a(Rt),{class:"w-4 h-4 mr-2"}),e[78]||(e[78]=t("span",null,"Secure 256-bit SSL encryption",-1))]),e[79]||(e[79]=je('<div class="flex gap-2" data-v-3d66de9e><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-3d66de9e><span class="text-xs font-bold text-slate-600" data-v-3d66de9e>VISA</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-3d66de9e><span class="text-xs font-bold text-slate-600" data-v-3d66de9e>MC</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-3d66de9e><span class="text-xs font-bold text-slate-600" data-v-3d66de9e>AMEX</span></div></div>',1))])])])])])),m(Ie,{name:"modal"},{default:ge(()=>[w.value?(c(),f("div",Xa,[t("div",Ka,[t("button",{onClick:ut,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[m(a(Yt),{class:"w-4 h-4"})]),J.value==="check"?(c(),f("div",Za,[e[81]||(e[81]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-4"},"Welcome!",-1)),e[82]||(e[82]=t("p",{class:"text-slate-600 text-center mb-6"},"Sign in to track your orders and save your preferences, or continue as a guest.",-1)),t("div",eo,[t("button",{onClick:e[24]||(e[24]=o=>J.value="signin"),class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Sign In "),t("button",{onClick:e[25]||(e[25]=o=>J.value="signup"),class:"w-full py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium"}," Create Account "),t("button",{onClick:dt,class:"w-full py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium"}," Continue as Guest ")])])):J.value==="signin"?(c(),f("div",to,[e[85]||(e[85]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-6"},"Sign In",-1)),t("div",so,[m(v,{onCallback:u,authType:"login"})]),t("form",{onSubmit:Pe(pt,["prevent"]),class:"space-y-4"},[t("div",ao,[e[83]||(e[83]=t("label",{for:"signinEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),b(t("input",{id:"signinEmail","onUpdate:modelValue":e[26]||(e[26]=o=>re.value.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[C,re.value.email]])]),t("div",oo,[e[84]||(e[84]=t("label",{for:"signinPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),b(t("input",{id:"signinPassword","onUpdate:modelValue":e[27]||(e[27]=o=>re.value.password=o),type:"password",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"},null,512),[[C,re.value.password]])]),t("button",{type:"submit",disabled:fe.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[fe.value?(c(),Me(a(Fe),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):A("",!0),Y(" "+h(fe.value?"Signing In...":"Sign In"),1)],8,ro),t("div",lo,[t("button",{type:"button",onClick:e[28]||(e[28]=o=>J.value="signup"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Don't have an account? Sign up ")])],32)])):J.value==="signup"?(c(),f("div",no,[e[92]||(e[92]=t("h2",{class:"text-2xl text-center font-bold text-slate-800 mb-6"},"Create Account",-1)),t("div",io,[m(v,{onCallback:u,authType:"signup"})]),t("form",{onSubmit:Pe(ct,["prevent"]),class:"space-y-4"},[t("div",uo,[t("div",co,[e[86]||(e[86]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),b(t("input",{id:"firstName","onUpdate:modelValue":e[29]||(e[29]=o=>x.value.firstName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"First name"},null,512),[[C,x.value.firstName]])]),t("div",po,[e[87]||(e[87]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),b(t("input",{id:"lastName","onUpdate:modelValue":e[30]||(e[30]=o=>x.value.lastName=o),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Last name"},null,512),[[C,x.value.lastName]])])]),t("div",fo,[e[88]||(e[88]=t("label",{for:"signupEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),b(t("input",{id:"signupEmail","onUpdate:modelValue":e[31]||(e[31]=o=>x.value.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[C,x.value.email]])]),t("div",mo,[e[89]||(e[89]=t("label",{for:"signupPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),b(t("input",{id:"signupPassword","onUpdate:modelValue":e[32]||(e[32]=o=>x.value.password=o),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"},null,512),[[C,x.value.password]]),e[90]||(e[90]=t("p",{class:"text-xs text-slate-500"},"Password must be at least 6 characters",-1))]),t("div",go,[e[91]||(e[91]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone (Optional)",-1)),b(t("input",{id:"phone","onUpdate:modelValue":e[33]||(e[33]=o=>x.value.phone=o),type:"tel",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number"},null,512),[[C,x.value.phone]])]),t("button",{type:"submit",disabled:pe.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[pe.value?(c(),Me(a(Fe),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):A("",!0),Y(" "+h(pe.value?"Creating Account...":"Create Account"),1)],8,vo),t("div",ho,[t("button",{type:"button",onClick:e[34]||(e[34]=o=>J.value="signin"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Already have an account? Sign in ")])],32)])):A("",!0)])])):A("",!0)]),_:1})])}}}),To=It(bo,[["__scopeId","data-v-3d66de9e"]]);export{To as default};
