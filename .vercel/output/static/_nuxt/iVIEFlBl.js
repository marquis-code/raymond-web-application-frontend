import{_ as Ot}from"./Cs0szigb.js";import{G as mt,N as Dt,O as Ye,r as f,g as xe,p as Ae,P as me,Q as De,R as Lt,S as at,U as jt,V as Ut,W as Vt,X as Gt,e as yt,c as m,o as u,h as I,u as n,i as qe,t as r,E as He,f as ie,Y as $t,I as pt,J as ae,A as Pe,Z as zt,a as t,b as w,w as be,n as Q,T as Le,F as je,k as Ue,d as te,x as Ve,l as M,D as $,M as Ie,$ as nt,q as Ge,_ as Bt}from"./8_-c8HVq.js";import{u as qt}from"./W1-RMTXm.js";import{c as ee,u as Yt,S as Ht,C as Kt,U as lt,T as rt,L as Jt,a as $e}from"./DVQPRVay.js";import{u as Zt,a as Wt,b as Xt}from"./BCHWA3Jd.js";import{u as Qt}from"./D5KHIuL9.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ee("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=ee("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ee("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ee("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=ee("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=ee("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ee("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ee("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ee("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ee("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ee("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function io(){const d=mt(),{socialLogin:O,socialSignup:g,setAuthCredentials:F,socialAuthLoading:P,socialAuthError:C,logout:i}=Dt(),{createUser:j}=Ye(),z=f(null),_=f(null),R=f(!1),H=f(!1),ye=async()=>{try{R.value=!0;const{$auth:b}=De();if(!b){console.error("Firebase Auth is not initialized"),_.value="Firebase Auth is not initialized",H.value=!0,R.value=!1;return}return Lt(b,l=>{z.value=l,H.value=!0,R.value=!1},l=>{console.error("Auth state change error:",l),_.value="Authentication state error",H.value=!0,R.value=!1})}catch(b){console.error("Error initializing auth state:",b),_.value="Failed to initialize authentication",H.value=!0,R.value=!1}};xe(async()=>{await Ae(),await ye()});const pe=b=>{if(!b)return{firstName:"",lastName:""};const s=b.split(" "),l=s[0]||"",S=s.slice(1).join(" ");return{firstName:l,lastName:S}},fe=()=>{const b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let s="";for(let l=0;l<12;l++)s+=b.charAt(Math.floor(Math.random()*b.length));return s},le=async(b,s)=>{try{const{$auth:l}=De();if(!l)throw new Error("Firebase Auth is not initialized");R.value=!0,_.value=null,z.value&&await at(l);const T=(await Gt(l,b)).user,U=await T.getIdToken(),{firstName:K,lastName:D}=pe(T==null?void 0:T.displayName),A=fe(),B={idToken:U,provider:s,email:T.email||"",uid:T.uid,displayName:T.displayName||"",photoURL:T.photoURL||"",firstName:K,lastName:D,password:A};F(B);const Y=await O();if(console.log(Y,"logon result"),Y.success)return await j(Y.data),Y;const x=await g();if(console.log(x,"logon result"),x.success)return await j(x.data),x;throw new Error(x.message||"Social authentication failed")}catch(l){console.error("Social auth error:",l),_.value=l.message||"Authentication failed"}finally{R.value=!1}},Z=async()=>{const b=new Vt;return b.addScope("email"),b.addScope("profile"),b.setCustomParameters({prompt:"consent"}),await le(b,"google")},W=async()=>{const b=new Ut;b.addScope("email"),b.addScope("public_profile"),await le(b,"facebook")},he=async()=>{const b=new jt("apple.com");b.addScope("email"),b.addScope("name"),await le(b,"apple")},Ce=async()=>{try{const{$auth:b}=De();if(!b)throw new Error("Firebase Auth is not initialized");R.value=!0,await i(),await at(b),d.push("/login")}catch(b){_.value=b.message}finally{R.value=!1}};return{user:me(z),error:me(_),loading:me(R),initialized:me(H),socialAuthLoading:me(P),socialAuthError:me(C),signInWithGoogle:Z,signInWithFacebook:W,signInWithApple:he,logout:Ce}}const uo={class:"space-y-3"},co=["disabled"],mo={key:0},yo={key:1},po=["disabled"],fo={key:0},go={key:1},vo={key:2,class:"text-red-600 text-sm text-center"},bo=yt({__name:"SocialLoginButtons",props:{authType:{type:String}},emits:["callback"],setup(d,{emit:O}){const{showToast:g}=He(),{signInWithGoogle:F,loading:P,error:C,socialAuthLoading:i,socialAuthError:j}=io(),z=O,_=async()=>{try{const R=await F();z("callback",R)}catch(R){g({title:"Error",message:R,toastType:`${R} || Google login failed`,duration:3e3})}};return(R,H)=>(u(),m("div",uo,[d.authType==="login"?(u(),m("button",{key:0,onClick:_,disabled:n(P)||n(i),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[H[0]||(H[0]=qe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(P)&&!n(i)?(u(),m("span",mo,"Sign in with Google")):(u(),m("span",yo,"Signing in..."))],8,co)):I("",!0),d.authType==="signup"?(u(),m("button",{key:1,onClick:_,disabled:n(P)||n(i),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[H[1]||(H[1]=qe('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(P)&&!n(i)?(u(),m("span",fo,"Sign up with Google")):(u(),m("span",go,"Signing up..."))],8,po)):I("",!0),n(C)||n(j)?(u(),m("div",vo,r(n(C)||n(j)),1)):I("",!0)]))}}),{showToast:ut}=He(),Be={email:f(""),password:f("")},xo=()=>{mt();const d=f(!1),O=ie(()=>d.value||!Be.email.value||!Be.password.value);return{credential:Be,login:async F=>{var C;d.value=!0;const P=await $t.$_login({email:F.email,password:F.password});return console.log(P,"rse hee"),P.status===200||P.status===201?(Ye().createUser(P.data),ut({title:"Success",message:"Login was successfully",toastType:"success",duration:3e3})):ut({title:"Error",message:((C=P==null?void 0:P.data)==null?void 0:C.error)||"Something went wrong",toastType:"error",duration:3e3}),P},loading:d,isFormDisabled:O}};function ho(){pt();const{createOrder:d,loading:O}=Zt(),{handlePayment:g,paymentForm:F,loading:P,generateTxRef:C}=Wt(),i=f(null),j=f(""),z=f(""),_=f(!1),R=ie(()=>O.value||P.value),H=s=>s.map(l=>{let S=l.productId;return!S&&l.id&&(S=l.id.includes("-")?l.id.split("-")[0]:l.id),{product:S,quantity:l.quantity,price:l.price,size:l.size||"",color:l.color||"",discount:l.discount||0,total:l.price*l.quantity}}),ye=s=>({firstName:s.firstName,lastName:s.lastName,address:s.address,city:s.city,state:s.state,country:s.country,postalCode:s.zipCode||s.postalCode,phone:s.phone,email:s.email}),pe=s=>({isInstallment:!0,numberOfInstallments:parseInt(s.numberOfInstallments),downPayment:parseFloat(s.downPayment),installmentAmount:parseFloat(s.installmentAmount||0),interestRate:parseFloat(s.interestRate||0),totalPayable:parseFloat(s.totalPayable||0),paymentFrequency:s.paymentFrequency,paymentMethod:s.paymentMethod}),fe=s=>(s==null?void 0:s.taxRate)||2.5,le=async s=>{var l,S,T,U,K,D;try{z.value="",j.value="",_.value=!1,console.log("Processing checkout with data:",s);const A=H(s.items),B=ye(s.deliveryDetails),Y=B,x=fe(s.country),y={items:A,subtotal:parseFloat(s.subtotal.toFixed(2)),tax:parseFloat(s.tax.toFixed(2)),taxRate:x,shipping:parseFloat(s.shipping.toFixed(2)),discount:0,total:parseFloat(s.total.toFixed(2)),status:"pending",paymentStatus:"pending",paymentType:s.paymentType,shippingAddress:B,billingAddress:Y,paymentMethod:s.paymentMethod,paidAmount:0,refundedAmount:0,shippingMethod:s.deliveryMethod,shippingCost:parseFloat(s.shipping.toFixed(2)),shippingCarrier:s.deliveryMethod==="express"?"Express Courier":"Standard Shipping",currency:"USD",source:"web",locale:"en-US",notes:`Delivery Method: ${s.deliveryMethod}, Payment Method: ${s.paymentMethod}${s.paymentType==="installment"?", Payment Type: Installment Plan":""}`,metadata:{country:s.country,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),checkoutVersion:"2.0",paymentType:s.paymentType,deliveryMethod:s.deliveryMethod,cartItemsCount:s.items.length,hasInstallmentItems:s.items.some(p=>p.hasInstallmentOption)}};s.paymentType==="installment"&&s.installmentConfig?(y.installmentInfo=pe(s.installmentConfig),y.paidAmount=parseFloat(s.installmentConfig.downPayment),y.paymentStatus="partially_paid",y.metadata={...y.metadata,installmentDetails:{startDate:s.installmentConfig.startDate,needsFormalAgreement:s.installmentConfig.needsFormalAgreement||!1,productSize:s.installmentConfig.productSize||((l=A[0])==null?void 0:l.size),originalInterestRate:s.installmentConfig.interestRate,paymentFrequency:s.installmentConfig.paymentFrequency,calculatedAt:new Date().toISOString(),downPaymentPercentage:parseFloat(s.installmentConfig.downPayment)/parseFloat(s.total.toFixed(2))*100}},y.notes+=`, Installment Terms: ${y.installmentInfo.numberOfInstallments} payments of $${(S=y.installmentInfo.installmentAmount)==null?void 0:S.toFixed(2)}`):y.installmentInfo={isInstallment:!1};const G=new Date;s.deliveryMethod==="express"?G.setDate(G.getDate()+3):G.setDate(G.getDate()+7),y.estimatedDelivery=G,console.log("Sending order payload to backend:",y);const N=await d(y);if(console.log(N.data._id,"res here"),!N||!((T=N==null?void 0:N.data)!=null&&T._id))return z.value="Failed to create order",{success:!1,error:((U=N==null?void 0:N.data)==null?void 0:U.message)||"Failed to create order"};console.log("Order created successfully:",N),i.value=N;let c=N.total;s.paymentType==="installment"&&s.installmentConfig&&(c=parseFloat(s.installmentConfig.downPayment)||s.immediatePayment||0,console.log("Installment payment - charging down payment:",c));const re=await Z(N,c,s.paymentType);return{success:!0,order:N,paymentAmount:c,paymentType:s.paymentType,paymentResult:re}}catch(A){console.error("Checkout process failed:",A);const B=((D=(K=A==null?void 0:A.response)==null?void 0:K.data)==null?void 0:D.message)||(A==null?void 0:A.message)||"Checkout process failed";return z.value=B,{success:!1,error:B}}},Z=async(s,l,S)=>{var T,U,K,D,A,B,Y,x,y,G,N,c,re,p,E;console.log(s,"order object before payment processing");try{console.log("Processing payment for order:",s.data._id,"Amount:",l),F.value.amount=l;const V=C();F.value.tx_ref=V,F.value.meta={orderId:(T=s==null?void 0:s.data)==null?void 0:T._id,orderNumber:(U=s==null?void 0:s.data)==null?void 0:U.orderNumber,paymentType:S,...S==="installment"&&{isDownPayment:!0,installmentPlan:(K=s==null?void 0:s.data)==null?void 0:K.installmentInfo,remainingAmount:((D=s==null?void 0:s.data)==null?void 0:D.total)-l}},F.value.customer={email:((B=(A=s==null?void 0:s.data)==null?void 0:A.shippingAddress)==null?void 0:B.email)||"",phone_number:((x=(Y=s==null?void 0:s.data)==null?void 0:Y.shippingAddress)==null?void 0:x.phone)||"",name:`${((G=(y=s==null?void 0:s.data)==null?void 0:y.shippingAddress)==null?void 0:G.firstName)||""} ${((c=(N=s==null?void 0:s.data)==null?void 0:N.shippingAddress)==null?void 0:c.lastName)||""}`.trim()},F.value.title=`Order ${(re=s==null?void 0:s.data)==null?void 0:re.orderNumber}`,F.value.description=S==="installment"?`Down payment for installment order ${(p=s==null?void 0:s.data)==null?void 0:p.orderNumber}`:`Payment for order ${(E=s==null?void 0:s.data)==null?void 0:E.orderNumber}`,console.log("Payment form configured:",F.value);const J=await g(s==null?void 0:s.data);return console.log(J,"Final payment result"),{success:!0,paymentReference:V,amount:l,paymentResult:J}}catch(V){return console.error("Payment processing failed:",V),j.value=V.message||"Payment processing failed",{success:!1,error:V.message||"Payment processing failed"}}};return{processCheckout:le,verifyPayment:async(s,l)=>{var S,T,U;try{return!s&&!l?{success:!1,error:"No payment reference provided"}:(console.log("Verifying payment:",{flw_ref:s,tx_ref:l}),_.value=!0,{success:!0,flw_ref:s,tx_ref:l,orderId:((S=i.value)==null?void 0:S._id)||"",orderNumber:((T=i.value)==null?void 0:T.orderNumber)||"",paymentType:((U=i.value)==null?void 0:U.paymentType)||"full"})}catch(K){return console.error("Payment verification failed:",K),{success:!1,error:K.message||"Payment verification failed"}}},createInstallmentPlan:async(s,l)=>{try{return console.log("Creating installment plan for order:",s,l),{success:!0,installmentPlanId:`plan-${s}-${Date.now()}`,message:"Installment plan created successfully"}}catch(S){return console.error("Failed to create installment plan:",S),{success:!1,error:S.message||"Failed to create installment plan"}}},resetCheckout:()=>{i.value=null,j.value="",z.value="",_.value=!1},orderResponse:i,getPaymentSummary:()=>{var l;if(!i.value)return null;const s=i.value;return{orderNumber:s.orderNumber,total:s.total,paymentType:s.paymentType,installmentInfo:s.installmentInfo,items:s.items,paidAmount:s.paymentType==="installment"?((l=s.installmentInfo)==null?void 0:l.downPayment)||0:s.total}},isLoading:R,orderLoading:O,paymentLoading:P,orderCreationError:z,paymentError:j,paymentComplete:_,paymentForm:F}}const ne={$_create_shipping_config(d){return ae.post("/shipping-tax/shipping",d)},$_create_tax_config(d){return ae.post("/shipping-tax/tax",d)},$_get_all_shipping_configs(){return ae.get("/shipping-tax/shipping")},$_get_all_tax_configs(){return ae.get("/shipping-tax/tax")},$_update_shipping_config(d,O){return ae.patch(`/shipping-tax/shipping/${d}`,O)},$_update_tax_config(d,O){return ae.patch(`/shipping-tax/tax/${d}`,O)},$_delete_shipping_config(d){return ae.delete(`/shipping-tax/shipping/${d}`)},$_delete_tax_config(d){return ae.delete(`/shipping-tax/tax/${d}`)}},Co=()=>{const d=f(null),O=async()=>{try{return(await ne.$_get_all_tax_configs()).data}catch(C){throw d.value=C.message||"Failed to fetch tax configs",d.value}},g=async C=>{try{return(await ne.$_create_tax_config({...C})).data}catch(i){throw d.value=i.message||"Failed to create tax config",d.value}},F=async(C,i)=>{try{return(await ne.$_update_tax_config(C,{countryCode:i.countryCode||"",countryName:i.countryName||"",vatRate:i.vatRate||0,isActive:i.isActive!==void 0?i.isActive:!0})).data}catch(j){throw d.value=j.message||"Failed to update tax config",d.value}},P=async C=>{try{return(await ne.$_delete_tax_config(C)).data}catch(i){throw d.value=i.message||"Failed to delete tax config",d.value}};return xe(()=>{O()}),{error:d,fetchTaxConfigs:O,createTaxConfig:g,updateTaxConfig:F,deleteTaxConfig:P}},wo=()=>{const d=f(null),O=async()=>{try{const C=await ne.$_get_all_shipping_configs();return console.log(C,"fetching00000000000000000"),C.data}catch(C){throw d.value=C.message||"Failed to fetch shipping configs",d.value}},g=async C=>{try{return(await ne.$_create_shipping_config({...C})).data}catch(i){throw d.value=i.message||"Failed to create shipping config",d.value}},F=async(C,i)=>{try{return(await ne.$_update_shipping_config(C,{countryCode:i.countryCode||"",countryName:i.countryName||"",shippingRate:i.shippingRate||0,isActive:i.isActive!==void 0?i.isActive:!0})).data}catch(j){throw d.value=j.message||"Failed to update shipping config",d.value}},P=async C=>{try{const i=await ne.$_delete_shipping_config(C);return console.log(i,"config here"),i.data}catch(i){throw d.value=i.message||"Failed to delete shipping config",d.value}};return xe(()=>{O()}),{error:d,fetchShippingConfigs:O,createShippingConfig:g,updateShippingConfig:F,deleteShippingConfig:P}},No={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100"},_o={key:0,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},So={class:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200 text-center"},Po={class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center"},Io={key:1,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},To={class:"max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200"},Ao={class:"text-center mb-8"},ko={class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},Mo={class:"bg-slate-50 rounded-xl p-6 mb-8"},Eo={class:"flex justify-between items-center mb-3"},Fo={class:"font-bold text-slate-800"},Ro={class:"flex justify-between items-center mb-3"},Oo={class:"font-bold text-slate-800"},Do={key:0,class:"flex justify-between items-center mb-3"},Lo={class:"font-bold text-emerald-600"},jo={class:"flex justify-between items-center"},Uo={class:"text-slate-600 font-medium"},Vo={class:"font-bold text-xl text-slate-800"},Go={key:2,class:"container mx-auto px-4 py-8 lg:py-12"},$o={class:"max-w-2xl mx-auto mb-12"},zo={class:"flex items-center justify-between relative"},Bo={class:"relative flex flex-col items-center"},qo={class:"relative flex flex-col items-center"},Yo={class:"relative flex flex-col items-center"},Ho={class:"lg:grid space-y-6 lg:space-y-0 grid-cols-5 gap-8 lg:max-w-7xl mx-auto"},Ko={class:"lg:col-span-3"},Jo={key:0,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},Zo={class:"flex items-center mb-6"},Wo={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Xo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qo={class:"space-y-2"},es={class:"space-y-2"},ts={class:"space-y-2"},os={class:"space-y-2"},ss={class:"space-y-2"},as={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ns={class:"space-y-2"},ls={class:"space-y-2"},rs={class:"space-y-2"},is={class:"space-y-2"},us=["value"],ds={type:"submit",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},cs={key:1,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},ms={class:"flex items-center mb-6"},ys={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},ps={class:"space-y-4 mb-8"},fs={class:"flex items-center"},gs={key:0,class:"w-3 h-3 rounded-full bg-white"},vs={class:"flex-1"},bs={class:"flex justify-between items-center mb-1"},xs={class:"font-bold text-slate-800"},hs={class:"flex gap-2"},Cs={key:2,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},ws={class:"flex items-center mb-6"},Ns={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},_s={class:"mb-8"},Ss={class:"space-y-4"},Ps={class:"flex items-center"},Is={key:0,class:"w-3 h-3 rounded-full bg-white"},Ts={class:"flex-1"},As={class:"flex justify-between items-center mb-1"},ks={class:"font-bold text-emerald-600"},Ms={class:"w-10 h-10 bg-emerald-100 rounded-md flex items-center justify-center ml-4"},Es={class:"flex items-center"},Fs={key:0,class:"w-3 h-3 rounded-full bg-white"},Rs={class:"flex-1"},Os={class:"flex justify-between items-center mb-1"},Ds={class:"font-bold text-blue-600"},Ls={class:"w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center ml-4"},js={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Us={class:"flex items-center"},Vs={class:"mt-2 text-xs text-yellow-700"},Gs={key:0,class:"mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200"},$s={class:"text-lg font-semibold text-slate-800 mb-6 flex items-center"},zs={class:"space-y-6"},Bs={class:"bg-white p-4 rounded-lg border border-blue-200"},qs={class:"flex justify-between items-center mb-2"},Ys={class:"text-lg font-bold text-slate-800"},Hs={class:"space-y-3"},Ks=["value"],Js={class:"space-y-3"},Zs={class:"space-y-3"},Ws={class:"block text-sm font-semibold text-slate-700"},Xs={class:"relative"},Qs=["min","max"],ea={class:"flex justify-between text-xs text-slate-500"},ta={class:"space-y-3"},oa=["min"],sa={class:"space-y-3"},aa={class:"space-y-3"},na={class:"space-y-2"},la={class:"flex items-center"},ra={class:"flex items-center"},ia={key:0,class:"bg-white p-6 rounded-lg border border-blue-200"},ua={class:"space-y-3"},da={class:"flex justify-between"},ca={class:"font-semibold"},ma={class:"flex justify-between"},ya={class:"font-semibold"},pa={class:"flex justify-between"},fa={class:"font-semibold"},ga={class:"flex justify-between"},va={class:"font-semibold"},ba={class:"flex justify-between"},xa={class:"font-semibold"},ha={class:"border-t pt-3"},Ca={class:"flex justify-between"},wa={class:"font-bold text-lg"},Na={class:"mb-8"},_a={class:"space-y-4"},Sa={class:"flex items-center"},Pa={key:0,class:"w-3 h-3 rounded-full bg-white"},Ia={class:"w-10 h-10 bg-slate-100 rounded-md flex items-center justify-center"},Ta={class:"lg:flex space-y-6 lg:space-y-0 gap-4"},Aa=["disabled"],ka={class:"lg:col-span-2"},Ma={class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-6 sticky top-6"},Ea={class:"flex items-center mb-6"},Fa={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Ra={key:0,class:"space-y-4 mb-6 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},Oa={class:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0"},Da=["src","alt"],La={class:"flex-1 min-w-0"},ja={class:"font-semibold text-slate-800 text-sm truncate"},Ua={class:"text-sm text-slate-600"},Va={class:"flex items-center gap-2 mt-1"},Ga={key:0,class:"text-xs px-2 py-1 bg-slate-100 rounded-full text-slate-600"},$a={key:1,class:"text-xs px-2 py-1 bg-slate-100 rounded-full text-slate-600"},za={key:2,class:"text-xs px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full"},Ba={class:"flex items-center mt-2"},qa=["onClick","disabled"],Ya={class:"mx-3 text-sm font-semibold min-w-[2rem] text-center"},Ha=["onClick"],Ka=["onClick"],Ja={class:"text-right"},Za={class:"font-semibold text-slate-800"},Wa={class:"border-t border-slate-200 pt-4 space-y-3"},Xa={class:"flex justify-between text-sm"},Qa={class:"font-semibold text-slate-800"},en={class:"flex justify-between text-sm"},tn={class:"font-semibold text-slate-800"},on={class:"flex justify-between text-sm"},sn={class:"text-slate-600"},an={class:"font-semibold text-slate-800"},nn={key:0,class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},ln={class:"flex justify-between text-xs text-blue-700 mb-1"},rn={class:"flex justify-between text-xs text-blue-700 mb-1"},un={class:"flex justify-between text-xs text-blue-700"},dn={key:1,class:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg"},cn={key:0},mn={class:"flex justify-between font-bold text-lg pt-3 border-t border-slate-200"},yn={class:"text-slate-800"},pn={class:"text-slate-800"},fn={key:2,class:"bg-emerald-50 p-3 rounded-lg border border-emerald-200"},gn={class:"flex justify-between font-semibold text-emerald-800"},vn={class:"mt-6 pt-4 border-t border-slate-200"},bn={class:"flex items-center text-sm text-slate-600 mb-3"},xn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},hn={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative"},Cn={key:0},wn={class:"space-y-3"},Nn={key:1},_n={class:"mb-4"},Sn={class:"space-y-2"},Pn={class:"space-y-2"},In=["disabled"],Tn={class:"text-center"},An={key:2},kn={class:"mb-4"},Mn={class:"grid grid-cols-2 gap-4"},En={class:"space-y-2"},Fn={class:"space-y-2"},Rn={class:"space-y-2"},On={class:"space-y-2"},Dn={class:"space-y-2"},Ln=["disabled"],jn={class:"text-center"},Un=2.5,dt=1,ct=3,Vn=yt({__name:"checkout",setup(d){const{detectCountry:O,formatCurrency:g}=Qt();f(50),xe(()=>{O()});const F=pt(),P=zt(),{processCheckout:C,isLoading:i,paymentComplete:j}=ho(),z=f(!1),{showToast:_}=He(),R=o=>{o.success&&(z.value=!1)},{removeFromCart:H,updateCartItemQuantity:ye}=qt(),{signup:pe}=Yt(),{login:fe}=xo(),{isLoggedIn:le}=Ye(),{setItem:Z,getItem:W,removeItem:he}=Xt(),{fetchShippingConfigs:Ce}=wo(),{fetchTaxConfigs:b}=Co(),s=f([]),l=f([]),S=f(null),T=f(0),U=f(0),K=f(!1),D=f(1),A=f("check"),B=f(!1),Y=f(!1),x=f([]),y=f({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:""}),G=f("standard"),N=f("flutterwave"),c=f("full"),re=f(""),p=f({numberOfInstallments:"",paymentFrequency:"",downPayment:0,startDate:"",paymentMethod:"",needsFormalAgreement:!1,interestRate:0,totalAmount:0}),E=f({downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0}),V=f(null),J=f({firstName:"",lastName:"",email:"",password:"",phone:"",role:"customer"}),ge=f({email:"",password:""}),L={CART:"art-gallery-cart",CHECKOUT_STEP:"checkout-step",DELIVERY_DETAILS:"checkout-delivery-details",DELIVERY_METHOD:"checkout-delivery-method",PAYMENT_METHOD:"checkout-payment-method",PAYMENT_TYPE:"checkout-payment-type",INSTALLMENT_CONFIG:"checkout-installment-config",SELECTED_COUNTRY:"checkout-selected-country",SHIPPING_CONFIG:"checkout-shipping-config",TAX_CONFIG:"checkout-tax-config",GUEST_MODE:"checkout-guest-mode"},ft=()=>{const o=P.query.paymentType;o&&["full","installment"].includes(o)?(c.value=o,console.log("Payment type initialized from query params:",c.value)):(c.value="full",console.log("Payment type defaulted to full payment"))},ve=ie(()=>{console.log("Checking installment options for cart items:",x.value);const o=x.value.some(e=>{const h=e.hasInstallmentOption===!0&&e.installmentConfig&&e.installmentConfig.enabled===!0;return console.log("Item {item.id}: hasInstallmentOption={item.hasInstallmentOption}, config enabled={item.installmentConfig?.enabled}, result={hasInstallment}"),h});return console.log("Overall hasInstallmentOptions:",o),o}),gt=ie(()=>x.value.filter(o=>o.hasInstallmentOption===!0&&o.installmentConfig&&o.installmentConfig.enabled===!0)),Ke=ie(()=>{const o=new Set;x.value.forEach(h=>{var k;if(h.hasInstallmentOption===!0&&((k=h.installmentConfig)==null?void 0:k.enabled)===!0){const a=h.installmentConfig;a.availableTerms&&Array.isArray(a.availableTerms)&&a.availableTerms.forEach(q=>o.add(q))}});const e=Array.from(o).sort((h,k)=>h-k);return console.log("Available installment terms:",e),e}),vt=()=>{if(!ve.value)return 0;const o=X(),e=Math.max(...Ke.value);return o/e},bt=o=>{if(!V.value){const v=X(),ce=v*.2;return(v-ce)/o}const e=X(),h=V.value.minimumDownPaymentPercentage||20,k=e*h/100,a=e-k,q=(V.value.interestRate||0)/12/100;if(q>0){const v=Math.pow(1+q,o);return a*q*v/(v-1)}else return a/o},ke=()=>{const o=x.value.find(e=>e.hasInstallmentOption===!0&&e.installmentConfig&&e.installmentConfig.enabled===!0);return console.log("Current installment config from item:",o==null?void 0:o.installmentConfig),(o==null?void 0:o.installmentConfig)||null};Pe(x,()=>{V.value=ke(),console.log("Updated currentInstallmentConfig:",V.value)},{deep:!0});const Je=()=>{var o;return((o=V.value)==null?void 0:o.minimumDownPaymentPercentage)||20},Ze=()=>{var o;return((o=V.value)==null?void 0:o.maximumDownPaymentPercentage)||80},ue=()=>X()*Je()/100,we=()=>X()*Ze()/100,We=()=>{var o;return((o=V.value)==null?void 0:o.interestRate)||0},xt=()=>new Date().toISOString().split("T")[0],de=()=>{if(console.log("Calculating installment details..."),console.log("Config:",p.value),!p.value.numberOfInstallments||!p.value.downPayment){console.log("Missing required fields for calculation"),E.value={downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0};return}const o=X(),e=Number(p.value.downPayment),h=o-e,k=parseInt(p.value.numberOfInstallments),a=We(),q=a/12/100;console.log("Calculation inputs:",{totalAmount:o,downPayment:e,remainingAmount:h,numberOfInstallments:k,annualInterestRate:a,monthlyInterestRate:q});let v=0,ce=0;if(q>0){const st=Math.pow(1+q,k);v=h*q*st/(st-1),ce=v*k-h}else v=h/k,ce=0;const Oe=e+v*k;console.log("Calculation results:",{installmentAmount:v,totalInterest:ce,totalPayable:Oe}),E.value={downPayment:e,installmentAmount:v,totalInterest:ce,totalPayable:Oe,remainingAmount:h},p.value.totalAmount=o,p.value.interestRate=a},Me=ie(()=>{if(console.log("Checking payment config validity..."),console.log("Payment type:",c.value),console.log("Payment method:",N.value),c.value==="full"){const o=N.value!=="";return console.log("Full payment valid:",o),o}else if(c.value==="installment"){const o=p.value,e=N.value!==""&&o.numberOfInstallments!==""&&o.paymentFrequency!==""&&o.downPayment>0&&o.startDate!==""&&o.paymentMethod!==""&&o.downPayment>=ue()&&o.downPayment<=we()&&typeof o.needsFormalAgreement=="boolean";return console.log("Installment payment validation:",{paymentMethod:N.value!=="",numberOfInstallments:o.numberOfInstallments!=="",paymentFrequency:o.paymentFrequency!=="",downPayment:o.downPayment>0,startDate:o.startDate!=="",installmentPaymentMethod:o.paymentMethod!=="",downPaymentRange:o.downPayment>=ue()&&o.downPayment<=we(),formalAgreement:typeof o.needsFormalAgreement=="boolean",overall:e}),e}return!1}),ht=()=>i.value?"Processing...":c.value==="installment"?`Pay Down Payment - ${g(E.value.downPayment)}`:`Complete Order - ${g(X())}`,Ee=o=>{if(c.value=o,o==="installment"&&(V.value=ke(),V.value)){p.value.downPayment=ue();const e=new Date;e.setDate(e.getDate()+30),p.value.startDate=e.toISOString().split("T")[0],Ae(()=>{de()})}oe()},Ct=()=>{try{if(localStorage){const o=localStorage.getItem(L.CART);if(o){const e=JSON.parse(o);if(Array.isArray(e))return x.value=e,console.log("Loaded cart from storage:",e),e}}}catch(o){console.error("Failed to load cart from localStorage:",o)}return[]},Fe=()=>{try{localStorage&&localStorage.setItem(L.CART,JSON.stringify(x.value))}catch(o){console.error("Failed to save cart to localStorage:",o)}},oe=()=>{try{localStorage&&(Z(L.CHECKOUT_STEP,D.value.toString()),Z(L.DELIVERY_METHOD,G.value),Z(L.PAYMENT_METHOD,N.value),Z(L.PAYMENT_TYPE,c.value),Z(L.INSTALLMENT_CONFIG,JSON.stringify(p.value)),Z(L.DELIVERY_DETAILS,JSON.stringify(y.value)),S.value&&Z(L.SELECTED_COUNTRY,JSON.stringify({countryInfo:S.value,shippingFee:T.value,taxRate:U.value})))}catch(o){console.error("Failed to persist checkout data:",o)}},se=()=>{oe()},wt=()=>{try{if(localStorage){const o=W(L.CHECKOUT_STEP);if(o&&!isNaN(Number(o))){const v=Number(o);v>=dt&&v<=ct&&(D.value=v)}const e=W(L.DELIVERY_METHOD);e&&["standard","express","pickup"].includes(e)&&(G.value=e);const h=W(L.PAYMENT_METHOD);if(h&&["flutterwave","interswitch","manual"].includes(h)&&(N.value=h),c.value==="full"){const v=W(L.PAYMENT_TYPE);v&&["full","installment"].includes(v)&&(c.value=v)}const k=W(L.INSTALLMENT_CONFIG);if(k)try{const v=JSON.parse(k);Object.assign(p.value,v)}catch(v){console.error("Failed to parse saved installment config",v)}const a=W(L.DELIVERY_DETAILS);if(a)try{const v=JSON.parse(a);Object.assign(y.value,v)}catch(v){console.error("Failed to parse saved delivery details",v)}const q=W(L.SELECTED_COUNTRY);if(q)try{const v=JSON.parse(q);S.value=v.countryInfo,T.value=v.shippingFee||0,U.value=v.taxRate||0}catch(v){console.error("Failed to parse saved country data",v)}}}catch(o){console.error("Failed to load persisted checkout data:",o)}},Nt=()=>{try{localStorage&&Object.values(L).forEach(o=>{he(o)})}catch(o){console.error("Failed to clear persisted checkout data:",o)}},Xe=f([{countryCode:"NG",countryName:"Nigeria"},{countryCode:"US",countryName:"United States"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"CA",countryName:"Canada"},{countryCode:"AU",countryName:"Australia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"FR",countryName:"France"},{countryCode:"IT",countryName:"Italy"},{countryCode:"ES",countryName:"Spain"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"AT",countryName:"Austria"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"NO",countryName:"Norway"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"FI",countryName:"Finland"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"GR",countryName:"Greece"},{countryCode:"PL",countryName:"Poland"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"RO",countryName:"Romania"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"MT",countryName:"Malta"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"JP",countryName:"Japan"},{countryCode:"KR",countryName:"South Korea"},{countryCode:"CN",countryName:"China"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"IN",countryName:"India"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"IR",countryName:"Iran"},{countryCode:"IQ",countryName:"Iraq"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"OM",countryName:"Oman"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"SY",countryName:"Syria"},{countryCode:"IL",countryName:"Israel"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"RU",countryName:"Russia"},{countryCode:"BY",countryName:"Belarus"},{countryCode:"UA",countryName:"Ukraine"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"PA",countryName:"Panama"},{countryCode:"CU",countryName:"Cuba"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"VE",countryName:"Venezuela"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"LY",countryName:"Libya"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"SZ",countryName:"Eswatini"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"ST",countryName:"São Tomé and Príncipe"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"CG",countryName:"Republic of the Congo"},{countryCode:"CD",countryName:"Democratic Republic of the Congo"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"TD",countryName:"Chad"},{countryCode:"NE",countryName:"Niger"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"ML",countryName:"Mali"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"TG",countryName:"Togo"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"AO",countryName:"Angola"},{countryCode:"AU",countryName:"Australia"},{countryCode:"NZ",countryName:"New Zealand"},{countryCode:"PG",countryName:"Papua New Guinea"},{countryCode:"FJ",countryName:"Fiji"},{countryCode:"SB",countryName:"Solomon Islands"},{countryCode:"VU",countryName:"Vanuatu"},{countryCode:"NC",countryName:"New Caledonia"},{countryCode:"PF",countryName:"French Polynesia"},{countryCode:"WS",countryName:"Samoa"},{countryCode:"TO",countryName:"Tonga"},{countryCode:"KI",countryName:"Kiribati"},{countryCode:"TV",countryName:"Tuvalu"},{countryCode:"NR",countryName:"Nauru"},{countryCode:"PW",countryName:"Palau"},{countryCode:"FM",countryName:"Federated States of Micronesia"},{countryCode:"MH",countryName:"Marshall Islands"}]),Ne=ie(()=>x.value.reduce((o,e)=>o+e.price*e.quantity,0)),_e=()=>T.value*(G.value==="express"?Un:1),Re=()=>{const o=Ne.value,e=_e();return(o+e)*(U.value/100)},X=()=>{const o=Ne.value,e=_e(),h=Re();return o+e+h},_t=async()=>{if(!K.value){K.value=!0;try{const[o,e]=await Promise.all([Ce(),b()]);o&&(s.value=o),e&&(l.value=e)}catch(o){console.error("Failed to load shipping and tax configs:",o),_({title:"Configuration Error",message:"Failed to load shipping and tax information. Using default rates.",toastType:"warning",duration:5e3})}finally{K.value=!1}}},St=()=>{const o=y.value.country,e=Xe.value.find(h=>h.countryCode===o);if(e){S.value=e;const h=s.value.find(a=>a.countryCode===o&&a.isActive);console.log(h,"selected shipping cionfig"),h?T.value=h.shippingRate:T.value=o==="NG"?0:25;const k=l.value.find(a=>a.countryCode===o&&a.isActive);if(k)U.value=k.vatRate;else{const a={NG:7.5,US:8.5,GB:20,CA:13,AU:10,DE:19,FR:20};U.value=a[o]||0}oe()}},Pt=o=>{G.value=o,oe()},It=o=>{N.value=o,oe()},Qe=()=>{D.value<ct&&(D.value++,oe())},et=()=>{D.value>dt&&(D.value--,oe())},tt=(o,e)=>{const h=x.value.findIndex(k=>k.id===o);h!==-1&&e>0&&(x.value[h].quantity=e,Fe(),ye(o,e))},Tt=o=>{x.value=x.value.filter(e=>e.id!==o),Fe(),H(o),_({title:"Item Removed",message:"Item has been removed from your cart",toastType:"info",duration:3e3})},Se=()=>{z.value=!1,A.value="check"},At=()=>{Z(L.GUEST_MODE,"true"),Se()},kt=async()=>{B.value=!0;try{const o=await pe(J.value);o.success?(_({title:"Account Created",message:"Your account has been created successfully!",toastType:"success",duration:5e3}),Se()):_({title:"Signup Failed",message:o.message||"Failed to create account",toastType:"error",duration:5e3})}catch(o){console.error("Signup error:",o),_({title:"Signup Error",message:"An error occurred during signup",toastType:"error",duration:5e3})}finally{B.value=!1}},Mt=async()=>{Y.value=!0;try{const o=await fe(ge.value);o.status===200||o.status===201?(_({title:"Welcome Back",message:"You have been signed in successfully!",toastType:"success",duration:5e3}),Se()):_({title:"Sign In Failed",message:o.message||"Invalid credentials",toastType:"error",duration:5e3})}catch(o){console.error("Signin error:",o),_({title:"Sign In Error",message:"An error occurred during sign in",toastType:"error",duration:5e3})}finally{Y.value=!1}},Et=async()=>{if(console.log("Processing payment..."),console.log("Payment type:",c.value),console.log("Payment config valid:",Me.value),!Me.value){_({title:"Invalid Configuration",message:"Please complete all required fields before proceeding",toastType:"error",duration:5e3});return}try{const o={items:x.value,deliveryDetails:y.value,deliveryMethod:G.value,paymentMethod:N.value,paymentType:c.value,subtotal:Ne.value,shipping:_e(),tax:Re(),total:X(),country:S.value,installmentConfig:c.value==="installment"?{...p.value,summary:E.value}:null};console.log("Order data prepared:",o);const e=await C(o);if(console.log("Checkout result:",e),e.success)re.value=e.orderId||ot(),x.value=[],Fe(),Nt(),_({title:"Order Successful",message:"Your order #{orderId.value} has been placed successfully!",toastType:"success",duration:5e3});else throw console.log(e,"resal message here"),new Error(e.error||"Payment processing failed")}catch(o){console.error("Payment processing error:",o),_({title:"Payment Failed",message:o.message||"An error occurred while processing your payment",toastType:"error",duration:5e3})}},ot=()=>(Date.now().toString().slice(-6),Math.random().toString(36).substring(2,5).toUpperCase(),"ORD{timestamp}{random}"),Ft=o=>{const e=o.target;e.src="/placeholder.svg?height=64&width=64"},Rt=()=>{const o=W?W(L.GUEST_MODE)==="true":!1,e=localStorage?localStorage.getItem("token"):null;!le.value&&!o&&!e&&(z.value=!0)};return Pe(()=>P.query,o=>{if(o.paymentType&&["full","installment"].includes(o.paymentType)){const e=o.paymentType;c.value!==e&&(c.value=e,Ee(e))}},{immediate:!0}),Pe(c,o=>{const e={...P.query};o!==e.paymentType&&F.push({query:{...e,paymentType:o}})},{immediate:!1}),Pe(()=>p.value,()=>{c.value==="installment"&&de(),oe()},{deep:!0}),xe(async()=>{if(console.log("Checkout page mounted"),Ae(()=>{Rt()}),ft(),Ct(),wt(),await _t(),V.value=ke(),c.value==="installment"&&ve.value){p.value.downPayment=ue();const o=new Date;o.setDate(o.getDate()+30),p.value.startDate=o.toISOString().split("T")[0],Ae(()=>{de()})}console.log("Checkout initialization complete"),console.log("Cart items:",x.value),console.log("Has installment options:",ve.value),console.log("Selected payment type:",c.value)}),(o,e)=>{const h=Ot,k=bo;return u(),m("div",No,[e[116]||(e[116]=t("div",{class:"fixed inset-0 opacity-5 pointer-events-none"},[t("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),!x.value||x.value.length===0?(u(),m("div",_o,[t("div",So,[t("div",Po,[w(n(Ht),{class:"w-12 h-12 text-slate-400"})]),e[32]||(e[32]=t("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"Your cart is empty",-1)),e[33]||(e[33]=t("p",{class:"text-slate-600 mb-8"},"Add some amazing products to your cart to continue with checkout.",-1)),w(h,{to:"/artworks",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"},{default:be(()=>[w(n(ze),{class:"w-4 h-4 mr-2"}),e[31]||(e[31]=te(" Browse Products "))]),_:1,__:[31]})])])):n(j)?(u(),m("div",Io,[t("div",To,[t("div",Ao,[t("div",ko,[w(n(Kt),{class:"w-10 h-10 text-emerald-600"})]),e[34]||(e[34]=t("h2",{class:"text-3xl font-bold text-slate-800 mb-4"},"Order Confirmed!",-1)),e[35]||(e[35]=t("p",{class:"text-slate-600 mb-2"},"Thank you for your purchase",-1)),e[36]||(e[36]=t("p",{class:"text-slate-500 text-sm"},"We've sent a confirmation email with your order details",-1))]),t("div",Mo,[t("div",Eo,[e[37]||(e[37]=t("span",{class:"text-slate-600 font-medium"},"Order Number",-1)),t("span",Fo,"#"+r(re.value||ot()),1)]),t("div",Ro,[e[38]||(e[38]=t("span",{class:"text-slate-600 font-medium"},"Payment Type",-1)),t("span",Oo,r(c.value==="installment"?"Installment Plan":"Full Payment"),1)]),c.value==="installment"?(u(),m("div",Do,[e[39]||(e[39]=t("span",{class:"text-slate-600 font-medium"},"Down Payment",-1)),t("span",Lo,r(n(g)(E.value.downPayment)),1)])):I("",!0),t("div",jo,[t("span",Uo,r(c.value==="installment"?"Total Order Value":"Total Amount"),1),t("span",Vo,r(n(g)(X())),1)])]),w(h,{to:"/",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},{default:be(()=>e[40]||(e[40]=[te(" Continue Shopping ")])),_:1,__:[40]})])])):(u(),m("div",Go,[e[103]||(e[103]=t("div",{class:"text-center mt-20 mb-12"},[t("h1",{class:"text-xl lg:text-3xl font-bold text-slate-800 mb-4"},"Secure Checkout"),t("p",{class:"text-slate-600 max-w-2xl mx-auto"},"Complete your purchase securely. Your information is protected with industry-standard encryption.")],-1)),t("div",$o,[t("div",zo,[e[44]||(e[44]=t("div",{class:"absolute top-4 left-0 right-0 h-0.5 bg-slate-200"},[t("div",{class:"h-full bg-gradient-to-r from-slate-800 to-slate-900 transition-all duration-500 ease-out",style:{width:"{((currentStep - 1) / 2) * 100}%"}})],-1)),t("div",Bo,[t("div",{class:Q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",D.value>=1?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[w(n(lt),{class:"w-4 h-4"})],2),e[41]||(e[41]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Details",-1))]),t("div",qo,[t("div",{class:Q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",D.value>=2?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[w(n(rt),{class:"w-4 h-4"})],2),e[42]||(e[42]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Shipping",-1))]),t("div",Yo,[t("div",{class:Q(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",D.value>=3?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[w(n(Te),{class:"w-4 h-4"})],2),e[43]||(e[43]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Payment",-1))])])]),t("div",Ho,[t("div",Ko,[w(Le,{name:"slide-fade",mode:"out-in"},{default:be(()=>[D.value===1?(u(),m("div",Jo,[t("div",Zo,[t("div",Wo,[w(n(lt),{class:"w-5 h-5 text-slate-600"})]),e[45]||(e[45]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Customer Details",-1))]),t("form",{onSubmit:Ve(Qe,["prevent"]),class:"space-y-6"},[t("div",Xo,[t("div",Qo,[e[46]||(e[46]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),M(t("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=a=>y.value.firstName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your first name",onInput:se},null,544),[[$,y.value.firstName]])]),t("div",es,[e[47]||(e[47]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),M(t("input",{id:"lastName","onUpdate:modelValue":e[1]||(e[1]=a=>y.value.lastName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your last name",onInput:se},null,544),[[$,y.value.lastName]])])]),t("div",ts,[e[48]||(e[48]=t("label",{for:"email",class:"block text-sm font-semibold text-slate-700"},"Email Address",-1)),M(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=a=>y.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",onInput:se},null,544),[[$,y.value.email]])]),t("div",os,[e[49]||(e[49]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone Number",-1)),M(t("input",{id:"phone","onUpdate:modelValue":e[3]||(e[3]=a=>y.value.phone=a),type:"tel",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your phone number",onInput:se},null,544),[[$,y.value.phone]])]),t("div",ss,[e[50]||(e[50]=t("label",{for:"address",class:"block text-sm font-semibold text-slate-700"},"Street Address",-1)),M(t("input",{id:"address","onUpdate:modelValue":e[4]||(e[4]=a=>y.value.address=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your street address",onInput:se},null,544),[[$,y.value.address]])]),t("div",as,[t("div",ns,[e[51]||(e[51]=t("label",{for:"city",class:"block text-sm font-semibold text-slate-700"},"City",-1)),M(t("input",{id:"city","onUpdate:modelValue":e[5]||(e[5]=a=>y.value.city=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"City",onInput:se},null,544),[[$,y.value.city]])]),t("div",ls,[e[52]||(e[52]=t("label",{for:"state",class:"block text-sm font-semibold text-slate-700"},"State",-1)),M(t("input",{id:"state","onUpdate:modelValue":e[6]||(e[6]=a=>y.value.state=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"State",onInput:se},null,544),[[$,y.value.state]])]),t("div",rs,[e[53]||(e[53]=t("label",{for:"zipCode",class:"block text-sm font-semibold text-slate-700"},"ZIP Code",-1)),M(t("input",{id:"zipCode","onUpdate:modelValue":e[7]||(e[7]=a=>y.value.zipCode=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"ZIP",onInput:se},null,544),[[$,y.value.zipCode]])])]),t("div",is,[e[55]||(e[55]=t("label",{for:"country",class:"block text-sm font-semibold text-slate-700"},"Country",-1)),M(t("select",{id:"country","onUpdate:modelValue":e[8]||(e[8]=a=>y.value.country=a),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",onChange:St},[e[54]||(e[54]=t("option",{value:""},"Select Country",-1)),(u(!0),m(je,null,Ue(Xe.value,a=>(u(),m("option",{key:a.countryCode,value:a.countryCode},r(a.countryName),9,us))),128))],544),[[Ie,y.value.country]])]),t("button",ds,[e[56]||(e[56]=te(" Continue to Shipping ")),w(n(it),{class:"w-5 h-5 ml-2"})])],32)])):D.value===2?(u(),m("div",cs,[t("div",ms,[t("div",ys,[w(n(rt),{class:"w-5 h-5 text-slate-600"})]),e[57]||(e[57]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Shipping Method",-1))]),t("div",ps,[t("div",{class:Q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",G.value==="standard"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[9]||(e[9]=a=>Pt("standard"))},[t("div",fs,[t("div",{class:Q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",G.value==="standard"?"border-slate-800 bg-slate-800":"border-slate-300"])},[G.value==="standard"?(u(),m("div",gs)):I("",!0)],2),t("div",vs,[t("div",bs,[e[58]||(e[58]=t("span",{class:"font-semibold text-slate-800"},"Express Shipping",-1)),t("span",xs,r(n(g)(T.value)),1)]),e[59]||(e[59]=t("p",{class:"text-sm text-slate-600"},"Delivery within 5-7 business days",-1))])])],2)]),t("div",hs,[t("button",{onClick:et,class:"flex-1 py-3 border-2 text-sm border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[w(n(ze),{class:"w-4 h-4 mr-2"}),e[60]||(e[60]=te(" Back "))]),t("button",{onClick:Qe,class:"flex-1 py-3 px-3 text-sm bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},[e[61]||(e[61]=te(" Continue to Payment ")),w(n(it),{class:"w-4 h-4 ml-2"})])])])):D.value===3?(u(),m("div",Cs,[t("div",ws,[t("div",Ns,[w(n(Te),{class:"w-5 h-5 text-slate-600"})]),e[62]||(e[62]=t("h2",{class:"text-lg lg:text-2xl font-bold text-slate-800"},"Payment Options",-1))]),t("div",_s,[e[68]||(e[68]=t("h3",{class:"text-base lg:text-lg font-semibold text-slate-800 mb-4"},"Choose Payment Type",-1)),t("div",Ss,[t("div",{class:Q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",c.value==="full"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[10]||(e[10]=a=>Ee("full"))},[t("div",Ps,[t("div",{class:Q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",c.value==="full"?"border-slate-800 bg-slate-800":"border-slate-300"])},[c.value==="full"?(u(),m("div",Is)):I("",!0)],2),t("div",Ts,[t("div",As,[e[63]||(e[63]=t("span",{class:"font-semibold text-slate-800"},"Pay Full Amount",-1)),t("span",ks,r(n(g)(X())),1)]),e[64]||(e[64]=t("p",{class:"text-sm text-slate-600"},"Complete payment now with no additional fees",-1))]),t("div",Ms,[w(n(Te),{class:"w-6 h-6 text-emerald-600"})])])],2),ve.value?(u(),m("div",{key:0,class:Q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",c.value==="installment"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[11]||(e[11]=a=>Ee("installment"))},[t("div",Es,[t("div",{class:Q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",c.value==="installment"?"border-slate-800 bg-slate-800":"border-slate-300"])},[c.value==="installment"?(u(),m("div",Fs)):I("",!0)],2),t("div",Rs,[t("div",Os,[e[65]||(e[65]=t("span",{class:"font-semibold text-slate-800"},"Installment Plan",-1)),t("span",Ds,"From "+r(n(g)(vt()))+"/month",1)]),e[66]||(e[66]=t("p",{class:"text-sm text-slate-600"},"Split your payment into manageable installments",-1))]),t("div",Ls,[w(n(eo),{class:"w-6 h-6 text-blue-600"})])])],2)):I("",!0),ve.value?I("",!0):(u(),m("div",js,[t("div",Us,[w(n(to),{class:"w-5 h-5 text-yellow-600 mr-2"}),e[67]||(e[67]=t("span",{class:"text-sm text-yellow-800"},"No installment options available for current cart items",-1))]),t("div",Vs,[t("p",null,"Cart items with installment options: "+r(gt.value.length),1),t("p",null,"Total cart items: "+r(x.value.length),1)])]))])]),w(Le,{name:"fade"},{default:be(()=>[c.value==="installment"?(u(),m("div",Gs,[t("h3",$s,[w(n(ao),{class:"w-5 h-5 mr-2 text-blue-600"}),e[69]||(e[69]=te(" Configure Your Installment Plan "))]),t("div",zs,[t("div",Bs,[t("div",qs,[e[70]||(e[70]=t("span",{class:"text-sm font-medium text-slate-600"},"Total Amount Agreed",-1)),t("span",Ys,r(n(g)(X())),1)]),e[71]||(e[71]=t("p",{class:"text-xs text-slate-500"},"This is the total amount you agree to pay including interest",-1))]),t("div",Hs,[e[73]||(e[73]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Preferred number of installments? ",-1)),M(t("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>p.value.numberOfInstallments=a),onChange:de,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},[e[72]||(e[72]=t("option",{value:""},"Select installment terms",-1)),(u(!0),m(je,null,Ue(Ke.value,a=>(u(),m("option",{key:a,value:a},r(a)+" months (Est. "+r(n(g)(bt(a)))+"/month) ",9,Ks))),128))],544),[[Ie,p.value.numberOfInstallments]])]),t("div",Js,[e[75]||(e[75]=t("label",{class:"block text-sm font-semibold text-slate-700"}," How often would you like to pay? ",-1)),M(t("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>p.value.paymentFrequency=a),onChange:de,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},e[74]||(e[74]=[t("option",{value:""},"Select payment frequency",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"biweekly"},"Bi-weekly (Every 2 weeks)",-1),t("option",{value:"monthly"},"Monthly",-1)]),544),[[Ie,p.value.paymentFrequency]])]),t("div",Zs,[t("label",Ws," Down Payment Amount ("+r(Je())+"% - "+r(Ze())+"%) ",1),t("div",Xs,[e[76]||(e[76]=t("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"},null,-1)),M(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>p.value.downPayment=a),onInput:de,type:"number",min:ue(),max:we(),step:"0.01",class:"w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter down payment amount",required:""},null,40,Qs),[[$,p.value.downPayment,void 0,{number:!0}]])]),t("div",ea,[t("span",null,"Min: "+r(n(g)(ue())),1),t("span",null,"Max: "+r(n(g)(we())),1)])]),t("div",ta,[e[77]||(e[77]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Start date for the first payment? ",-1)),M(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>p.value.startDate=a),type:"date",min:xt(),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},null,8,oa),[[$,p.value.startDate]])]),t("div",sa,[e[79]||(e[79]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Preferred payment method? ",-1)),M(t("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>p.value.paymentMethod=a),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},e[78]||(e[78]=[t("option",{value:""},"Select payment method",-1),t("option",{value:"auto_deduction"},"Auto Deduction (Recommended)",-1),t("option",{value:"manual"},"Manual Payment",-1)]),512),[[Ie,p.value.paymentMethod]])]),t("div",aa,[e[82]||(e[82]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Do you need a formal agreement for this plan? ",-1)),t("div",na,[t("label",la,[M(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>p.value.needsFormalAgreement=a),type:"radio",value:!0,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[nt,p.value.needsFormalAgreement]]),e[80]||(e[80]=t("span",{class:"ml-2 text-sm text-slate-700"},"Yes, I need a formal agreement",-1))]),t("label",ra,[M(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>p.value.needsFormalAgreement=a),type:"radio",value:!1,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[nt,p.value.needsFormalAgreement]]),e[81]||(e[81]=t("span",{class:"ml-2 text-sm text-slate-700"},"No, proceed without formal agreement",-1))])])]),E.value.installmentAmount>0?(u(),m("div",ia,[e[89]||(e[89]=t("h4",{class:"font-semibold text-slate-800 mb-4"},"Installment Plan Summary",-1)),t("div",ua,[t("div",da,[e[83]||(e[83]=t("span",{class:"text-sm text-slate-600"},"Down Payment (Today)",-1)),t("span",ca,r(n(g)(E.value.downPayment)),1)]),t("div",ma,[e[84]||(e[84]=t("span",{class:"text-sm text-slate-600"},"Installment Amount",-1)),t("span",ya,r(n(g)(E.value.installmentAmount)),1)]),t("div",pa,[e[85]||(e[85]=t("span",{class:"text-sm text-slate-600"},"Number of Payments",-1)),t("span",fa,r(p.value.numberOfInstallments),1)]),t("div",ga,[e[86]||(e[86]=t("span",{class:"text-sm text-slate-600"},"Interest Rate",-1)),t("span",va,r(We())+"% annually",1)]),t("div",ba,[e[87]||(e[87]=t("span",{class:"text-sm text-slate-600"},"Total Interest",-1)),t("span",xa,r(n(g)(E.value.totalInterest)),1)]),t("div",ha,[t("div",Ca,[e[88]||(e[88]=t("span",{class:"font-semibold text-slate-800"},"Total Payable",-1)),t("span",wa,r(n(g)(E.value.totalPayable)),1)])])])])):I("",!0)])])):I("",!0)]),_:1}),t("div",Na,[e[91]||(e[91]=t("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Payment Gateway",-1)),t("div",_a,[t("div",{class:Q(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",N.value==="flutterwave"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[19]||(e[19]=a=>It("flutterwave"))},[t("div",Sa,[t("div",{class:Q(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",N.value==="flutterwave"?"border-slate-800 bg-slate-800":"border-slate-300"])},[N.value==="flutterwave"?(u(),m("div",Pa)):I("",!0)],2),e[90]||(e[90]=t("div",{class:"flex-1"},[t("span",{class:"font-semibold text-slate-800"},"Pay with Card"),t("p",{class:"text-sm text-slate-600"},"Secure payment via Flutterwave")],-1)),t("div",Ia,[w(n(Te),{class:"w-6 h-6 text-slate-600"})])])],2)])]),t("div",Ta,[t("button",{onClick:et,class:"flex-1 py-3 border-2 w-full border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[w(n(ze),{class:"w-4 h-4 mr-2"}),e[92]||(e[92]=te(" Back "))]),t("button",{onClick:Et,disabled:n(i)||!Me.value,class:"flex-1 py-3 w-full bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[n(i)?(u(),Ge(n($e),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):I("",!0),te(" "+r(ht()),1)],8,Aa)])])):I("",!0)]),_:1})]),t("div",ka,[t("div",Ma,[t("div",Ea,[t("div",Fa,[w(n(no),{class:"w-5 h-5 text-slate-600"})]),e[93]||(e[93]=t("h2",{class:"text-lg lg:text-xl font-bold text-slate-800"},"Order Summary",-1))]),x.value&&x.value.length>0?(u(),m("div",Ra,[(u(!0),m(je,null,Ue(x.value,a=>(u(),m("div",{key:a.id,class:"flex gap-4 p-4 border border-slate-100 rounded-xl hover:bg-slate-50 transition-all duration-200 group"},[t("div",Oa,[t("img",{src:a.image||"/placeholder.svg?height=64&width=64",alt:a.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:Ft},null,40,Da)]),t("div",La,[t("h4",ja,r(a.title),1),t("p",Ua,r(n(g)(a.price)),1),t("div",Va,[a.size?(u(),m("span",Ga,r(a.size),1)):I("",!0),a.color?(u(),m("span",$a,r(a.color),1)):I("",!0),a.hasInstallmentOption?(u(),m("span",za,"💳 Installments")):I("",!0)]),t("div",Ba,[t("button",{onClick:q=>tt(a.id,Math.max(1,a.quantity-1)),class:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors",disabled:a.quantity<=1},[w(n(oo),{class:"w-3 h-3"})],8,qa),t("span",Ya,r(a.quantity),1),t("button",{onClick:q=>tt(a.id,a.quantity+1),class:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors"},[w(n(so),{class:"w-3 h-3"})],8,Ha),t("button",{onClick:q=>Tt(a.id),class:"ml-auto w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-red-50 hover:border-red-200 hover:text-red-600 transition-colors"},[w(n(lo),{class:"w-3 h-3"})],8,Ka)])]),t("div",Ja,[t("span",Za,r(n(g)(a.price*a.quantity)),1)])]))),128))])):I("",!0),t("div",Wa,[t("div",Xa,[e[94]||(e[94]=t("span",{class:"text-slate-600"},"Subtotal",-1)),t("span",Qa,r(n(g)(Ne.value)),1)]),t("div",en,[e[95]||(e[95]=t("span",{class:"text-slate-600"},"Shipping",-1)),t("span",tn,r(_e()===0?"Free":"{formatCurrency(getShippingCost())}"),1)]),t("div",on,[t("span",sn,"Tax ("+r(U.value)+"%)",1),t("span",an,r(n(g)(Re())),1)]),c.value==="installment"&&E.value.installmentAmount>0?(u(),m("div",nn,[e[98]||(e[98]=t("div",{class:"text-xs font-semibold text-blue-800 mb-2"},"Installment Plan",-1)),t("div",ln,[e[96]||(e[96]=t("span",null,"Down Payment",-1)),t("span",null,r(n(g)(E.value.downPayment)),1)]),t("div",rn,[t("span",null,r(p.value.numberOfInstallments)+" × "+r(n(g)(E.value.installmentAmount)),1),t("span",null,r(n(g)(E.value.installmentAmount*p.value.numberOfInstallments)),1)]),t("div",un,[e[97]||(e[97]=t("span",null,"Total Interest",-1)),t("span",null,r(n(g)(E.value.totalInterest)),1)])])):I("",!0),S.value?(u(),m("div",dn,[t("p",null,"Shipping to: "+r(S.value.countryName),1),t("p",null,"Tax Rate: "+r(U.value)+"%",1),c.value==="installment"?(u(),m("p",cn,"Payment Type: Installment Plan")):I("",!0)])):I("",!0),t("div",mn,[t("span",yn,r(c.value==="installment"?"Total Payable":"Total"),1),t("span",pn,r(n(g)(c.value==="installment"&&E.value.totalPayable>0?E.value.totalPayable:X())),1)]),c.value==="installment"&&E.value.downPayment>0?(u(),m("div",fn,[t("div",gn,[e[99]||(e[99]=t("span",null,"Today's Payment",-1)),t("span",null,r(n(g)(E.value.downPayment)),1)]),e[100]||(e[100]=t("p",{class:"text-xs text-emerald-600 mt-1"},"Down payment due now",-1))])):I("",!0)]),t("div",vn,[t("div",bn,[w(n(Jt),{class:"w-4 h-4 mr-2"}),e[101]||(e[101]=t("span",null,"Secure 256-bit SSL encryption",-1))]),e[102]||(e[102]=qe('<div class="flex gap-2" data-v-d60ca9ba><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-d60ca9ba><span class="text-xs font-bold text-slate-600" data-v-d60ca9ba>VISA</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-d60ca9ba><span class="text-xs font-bold text-slate-600" data-v-d60ca9ba>MC</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-d60ca9ba><span class="text-xs font-bold text-slate-600" data-v-d60ca9ba>AMEX</span></div></div>',1))])])])])])),w(Le,{name:"modal"},{default:be(()=>[z.value?(u(),m("div",xn,[t("div",hn,[t("button",{onClick:Se,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[w(n(ro),{class:"w-4 h-4"})]),A.value==="check"?(u(),m("div",Cn,[e[104]||(e[104]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-4"},"Welcome!",-1)),e[105]||(e[105]=t("p",{class:"text-slate-600 text-center mb-6"},"Sign in to track your orders and save your preferences, or continue as a guest.",-1)),t("div",wn,[t("button",{onClick:e[20]||(e[20]=a=>A.value="signin"),class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Sign In "),t("button",{onClick:e[21]||(e[21]=a=>A.value="signup"),class:"w-full py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium"}," Create Account "),t("button",{onClick:At,class:"w-full py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium"}," Continue as Guest ")])])):A.value==="signin"?(u(),m("div",Nn,[e[108]||(e[108]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-6"},"Sign In",-1)),t("div",_n,[w(k,{onCallback:R,authType:"login"})]),t("form",{onSubmit:Ve(Mt,["prevent"]),class:"space-y-4"},[t("div",Sn,[e[106]||(e[106]=t("label",{for:"signinEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),M(t("input",{id:"signinEmail","onUpdate:modelValue":e[22]||(e[22]=a=>ge.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[$,ge.value.email]])]),t("div",Pn,[e[107]||(e[107]=t("label",{for:"signinPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),M(t("input",{id:"signinPassword","onUpdate:modelValue":e[23]||(e[23]=a=>ge.value.password=a),type:"password",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"},null,512),[[$,ge.value.password]])]),t("button",{type:"submit",disabled:Y.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[Y.value?(u(),Ge(n($e),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):I("",!0),te(" "+r(Y.value?"Signing In...":"Sign In"),1)],8,In),t("div",Tn,[t("button",{type:"button",onClick:e[24]||(e[24]=a=>A.value="signup"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Don't have an account? Sign up ")])],32)])):A.value==="signup"?(u(),m("div",An,[e[115]||(e[115]=t("h2",{class:"text-2xl text-center font-bold text-slate-800 mb-6"},"Create Account",-1)),t("div",kn,[w(k,{onCallback:R,authType:"signup"})]),t("form",{onSubmit:Ve(kt,["prevent"]),class:"space-y-4"},[t("div",Mn,[t("div",En,[e[109]||(e[109]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),M(t("input",{id:"firstName","onUpdate:modelValue":e[25]||(e[25]=a=>J.value.firstName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"First name"},null,512),[[$,J.value.firstName]])]),t("div",Fn,[e[110]||(e[110]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),M(t("input",{id:"lastName","onUpdate:modelValue":e[26]||(e[26]=a=>J.value.lastName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Last name"},null,512),[[$,J.value.lastName]])])]),t("div",Rn,[e[111]||(e[111]=t("label",{for:"signupEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),M(t("input",{id:"signupEmail","onUpdate:modelValue":e[27]||(e[27]=a=>J.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[$,J.value.email]])]),t("div",On,[e[112]||(e[112]=t("label",{for:"signupPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),M(t("input",{id:"signupPassword","onUpdate:modelValue":e[28]||(e[28]=a=>J.value.password=a),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"},null,512),[[$,J.value.password]]),e[113]||(e[113]=t("p",{class:"text-xs text-slate-500"},"Password must be at least 6 characters",-1))]),t("div",Dn,[e[114]||(e[114]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone (Optional)",-1)),M(t("input",{id:"phone","onUpdate:modelValue":e[29]||(e[29]=a=>J.value.phone=a),type:"tel",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number"},null,512),[[$,J.value.phone]])]),t("button",{type:"submit",disabled:B.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[B.value?(u(),Ge(n($e),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):I("",!0),te(" "+r(B.value?"Creating Account...":"Create Account"),1)],8,Ln),t("div",jn,[t("button",{type:"button",onClick:e[30]||(e[30]=a=>A.value="signin"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Already have an account? Sign in ")])],32)])):I("",!0)])])):I("",!0)]),_:1})])}}}),Hn=Bt(Vn,[["__scopeId","data-v-d60ca9ba"]]);export{Hn as default};
