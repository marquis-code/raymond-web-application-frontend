import{_ as os}from"./BkbOIlTM.js";import{u as kt,N as as,O as Xe,r as h,g as ke,q as St,P as Ne,Q as He,R as ns,S as pt,U as ls,V as rs,W as is,X as us,e as Ve,c as d,o as i,i as x,l as n,j as Ze,t as l,I as Qe,f as re,B as At,a as e,b as g,m as U,A as Pe,s as xe,w as ce,F as we,k as Ce,E as je,_ as et,h as Ee,x as G,M as ft,Y as ds,D as It,G as ve,Z as cs,n as vt,d as le,J as Q,$ as gt}from"./C7QN4FsU.js";import{c as ee}from"./DYtn4Eor.js";import{u as ms}from"./BjEvTxbT.js";import{u as ys,S as ps,C as fs,U as bt,T as ht,L as vs,a as Ke}from"./q3qnhGRR.js";import{u as gs,a as bs,b as hs}from"./Ox_S47JP.js";import{u as xs}from"./B-q0t4HL.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=ee("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ee("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ee("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ee("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ee("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ee("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ee("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ee("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ee("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=ee("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ee("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ee("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ee("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ee("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=ee("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ee("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ms(){const v=kt(),{socialLogin:j,socialSignup:O,setAuthCredentials:r,socialAuthLoading:_,socialAuthError:w,logout:c}=as(),{createUser:M}=Xe(),W=h(null),R=h(null),y=h(!1),q=h(!1),oe=async()=>{try{y.value=!0;const{$auth:I}=He();if(!I){console.error("Firebase Auth is not initialized"),R.value="Firebase Auth is not initialized",q.value=!0,y.value=!1;return}return ns(I,f=>{W.value=f,q.value=!0,y.value=!1},f=>{console.error("Auth state change error:",f),R.value="Authentication state error",q.value=!0,y.value=!1})}catch(I){console.error("Error initializing auth state:",I),R.value="Failed to initialize authentication",q.value=!0,y.value=!1}};ke(async()=>{await St(),await oe()});const ue=I=>{if(!I)return{firstName:"",lastName:""};const o=I.split(" "),f=o[0]||"",V=o.slice(1).join(" ");return{firstName:f,lastName:V}},de=()=>{const I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let o="";for(let f=0;f<12;f++)o+=I.charAt(Math.floor(Math.random()*I.length));return o},ae=async(I,o)=>{try{const{$auth:f}=He();if(!f)throw new Error("Firebase Auth is not initialized");y.value=!0,R.value=null,W.value&&await pt(f);const F=(await us(f,I)).user,B=await F.getIdToken(),{firstName:p,lastName:P}=ue(F==null?void 0:F.displayName),u=de(),T={idToken:B,provider:o,email:F.email||"",uid:F.uid,displayName:F.displayName||"",photoURL:F.photoURL||"",firstName:p,lastName:P,password:u};r(T);const H=await j();if(console.log(H,"logon result"),H.success)return await M(H.data),H;const X=await O();if(console.log(X,"logon result"),X.success)return await M(X.data),X;throw new Error(X.message||"Social authentication failed")}catch(f){console.error("Social auth error:",f),R.value=f.message||"Authentication failed"}finally{y.value=!1}},be=async()=>{const I=new is;return I.addScope("email"),I.addScope("profile"),I.setCustomParameters({prompt:"consent"}),await ae(I,"google")},J=async()=>{const I=new rs;I.addScope("email"),I.addScope("public_profile"),await ae(I,"facebook")},te=async()=>{const I=new ls("apple.com");I.addScope("email"),I.addScope("name"),await ae(I,"apple")},_e=async()=>{try{const{$auth:I}=He();if(!I)throw new Error("Firebase Auth is not initialized");y.value=!0,await c(),await pt(I),v.push("/login")}catch(I){R.value=I.message}finally{y.value=!1}};return{user:Ne(W),error:Ne(R),loading:Ne(y),initialized:Ne(q),socialAuthLoading:Ne(_),socialAuthError:Ne(w),signInWithGoogle:be,signInWithFacebook:J,signInWithApple:te,logout:_e}}const Es={class:"space-y-3"},Ds=["disabled"],Fs={key:0},Os={key:1},Rs=["disabled"],$s={key:0},js={key:1},Vs={key:2,class:"text-red-600 text-sm text-center"},Ls=Ve({__name:"SocialLoginButtons",props:{authType:{type:String}},emits:["callback"],setup(v,{emit:j}){const{showToast:O}=Qe(),{signInWithGoogle:r,loading:_,error:w,socialAuthLoading:c,socialAuthError:M}=Ms(),W=j,R=async()=>{try{const y=await r();W("callback",y)}catch(y){O({title:"Error",message:y,toastType:`${y} || Google login failed`,duration:3e3})}};return(y,q)=>(i(),d("div",Es,[v.authType==="login"?(i(),d("button",{key:0,onClick:R,disabled:n(_)||n(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[q[0]||(q[0]=Ze('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(_)&&!n(c)?(i(),d("span",Fs,"Sign in with Google")):(i(),d("span",Os,"Signing in..."))],8,Ds)):x("",!0),v.authType==="signup"?(i(),d("button",{key:1,onClick:R,disabled:n(_)||n(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[q[1]||(q[1]=Ze('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!n(_)&&!n(c)?(i(),d("span",$s,"Sign up with Google")):(i(),d("span",js,"Signing up..."))],8,Rs)):x("",!0),n(w)||n(M)?(i(),d("div",Vs,l(n(w)||n(M)),1)):x("",!0)]))}}),Us=["disabled"],Bs={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg max-h-60 overflow-y-auto"},zs=["onClick"],Gs={key:0,class:"mt-1 text-sm text-red-600 animate-pulse"},Ys=Ve({__name:"CustomDropdown",props:{options:{},modelValue:{},placeholder:{default:"Select an option"},disabled:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{default:""}},emits:["update:modelValue","change"],setup(v,{emit:j}){const O=v,r=j,_=h(!1),w=h(),c=re(()=>O.options.find(y=>y.value===O.modelValue)||null),M=y=>{y.preventDefault(),y.stopPropagation(),O.disabled||(_.value=!_.value)},W=y=>{r("update:modelValue",y.value),r("change",y.value),_.value=!1},R=y=>{w.value&&!w.value.contains(y.target)&&(_.value=!1)};return ke(()=>{document.addEventListener("click",R)}),At(()=>{document.removeEventListener("click",R)}),(y,q)=>(i(),d("div",{class:"relative",ref_key:"dropdownRef",ref:w},[e("button",{onClick:Pe(M,["prevent"]),class:U(["w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white text-left flex items-center justify-between",{"border-red-300 ring-2 ring-red-200":y.hasError}]),type:"button",disabled:y.disabled},[e("span",{class:U({"text-slate-400":!c.value,"text-slate-800":c.value})},l(c.value?c.value.label:y.placeholder),3),g(n(Cs),{class:U(["w-5 h-5 text-slate-400 transition-transform duration-200",{"rotate-180":_.value}])},null,8,["class"])],10,Us),g(xe,{name:"dropdown"},{default:ce(()=>[_.value?(i(),d("div",Bs,[(i(!0),d(we,null,Ce(y.options,oe=>{var ue,de;return i(),d("div",{key:oe.value,onClick:Pe(ae=>W(oe),["stop"]),class:U(["px-4 py-3 hover:bg-slate-50 cursor-pointer transition-colors duration-150 flex items-center justify-between",{"bg-blue-50 text-blue-700":((ue=c.value)==null?void 0:ue.value)===oe.value}])},[e("span",null,l(oe.label),1),((de=c.value)==null?void 0:de.value)===oe.value?(i(),je(n(ws),{key:0,class:"w-4 h-4 text-blue-600"})):x("",!0)],10,zs)}),128))])):x("",!0)]),_:1}),y.hasError&&y.errorMessage?(i(),d("div",Gs,l(y.errorMessage),1)):x("",!0)],512))}}),$e=et(Ys,[["__scopeId","data-v-4e253b08"]]),qs=["disabled"],Hs={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg p-4"},Ks={class:"flex items-center justify-between mb-4"},Ws={class:"flex items-center gap-2"},Js=["value"],Zs=["value"],Xs={class:"grid grid-cols-7 gap-1 mb-2"},Qs={class:"grid grid-cols-7 gap-1"},eo=["onClick","disabled"],to={key:0,class:"mt-1 text-sm text-red-600 animate-pulse"},so=Ve({__name:"CustomDatePicker",props:{modelValue:{},placeholder:{default:"Select a date"},disabled:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{default:""},minDate:{default:""},maxDate:{default:""}},emits:["update:modelValue","change"],setup(v,{emit:j}){const O=v,r=j,_=h(!1),w=h(),c=h(new Date().getMonth()),M=h(new Date().getFullYear()),W=["January","February","March","April","May","June","July","August","September","October","November","December"],R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=re(()=>O.modelValue?new Date(O.modelValue):null),q=re(()=>{const p=new Date().getFullYear(),P=[];for(let u=p-5;u<=p+10;u++)P.push(u);return P}),oe=re(()=>{const p=new Date(M.value,c.value,1);new Date(M.value,c.value+1,0);const P=new Date(p);P.setDate(P.getDate()-p.getDay());const u=[],T=new Date(P);for(let H=0;H<42;H++)u.push({day:T.getDate(),month:T.getMonth(),year:T.getFullYear(),isCurrentMonth:T.getMonth()===c.value,date:new Date(T)}),T.setDate(T.getDate()+1);return u}),ue=()=>{O.disabled||(_.value=!_.value)},de=p=>{if(J(p))return;const P=te(p.date);r("update:modelValue",P),r("change",P),_.value=!1},ae=p=>y.value?p.day===y.value.getDate()&&p.month===y.value.getMonth()&&p.year===y.value.getFullYear():!1,be=p=>{const P=new Date;return p.day===P.getDate()&&p.month===P.getMonth()&&p.year===P.getFullYear()},J=p=>{const P=p.date;if(O.minDate){const u=new Date(O.minDate);if(P<u)return!0}if(O.maxDate){const u=new Date(O.maxDate);if(P>u)return!0}return!1},te=p=>p.toISOString().split("T")[0],_e=p=>p.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),I=()=>{c.value===0?(c.value=11,M.value--):c.value--},o=()=>{c.value===11?(c.value=0,M.value++):c.value++},f=()=>{},V=()=>{r("update:modelValue",""),r("change",""),_.value=!1},F=()=>{const P=te(new Date);r("update:modelValue",P),r("change",P),_.value=!1},B=p=>{w.value&&!w.value.contains(p.target)&&(_.value=!1)};return Ee(()=>O.modelValue,p=>{if(p){const P=new Date(p);c.value=P.getMonth(),M.value=P.getFullYear()}},{immediate:!0}),ke(()=>{document.addEventListener("click",B)}),At(()=>{document.removeEventListener("click",B)}),(p,P)=>(i(),d("div",{class:"relative",ref_key:"datePickerRef",ref:w},[e("button",{onClick:ue,class:U(["w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white text-left flex items-center justify-between",{"border-red-300 ring-2 ring-red-200":p.hasError}]),disabled:p.disabled,type:"button"},[e("span",{class:U({"text-slate-400":!y.value,"text-slate-800":y.value})},l(y.value?_e(y.value):p.placeholder),3),g(n(Tt),{class:U(["w-5 h-5 text-slate-400 transition-transform duration-200",{"rotate-180":_.value}])},null,8,["class"])],10,qs),g(xe,{name:"datepicker"},{default:ce(()=>[_.value?(i(),d("div",Hs,[e("div",Ks,[e("button",{onClick:I,type:"button",class:"p-1 hover:bg-slate-100 rounded-lg transition-colors"},[g(n(_s),{class:"w-4 h-4"})]),e("div",Ws,[G(e("select",{"onUpdate:modelValue":P[0]||(P[0]=u=>c.value=u),onChange:f,class:"text-sm font-medium bg-transparent border-none focus:outline-none"},[(i(),d(we,null,Ce(W,(u,T)=>e("option",{key:T,value:T},l(u),9,Js)),64))],544),[[ft,c.value]]),G(e("select",{"onUpdate:modelValue":P[1]||(P[1]=u=>M.value=u),onChange:f,class:"text-sm font-medium bg-transparent border-none focus:outline-none"},[(i(!0),d(we,null,Ce(q.value,u=>(i(),d("option",{key:u,value:u},l(u),9,Zs))),128))],544),[[ft,M.value]])]),e("button",{onClick:o,type:"button",class:"p-1 hover:bg-slate-100 rounded-lg transition-colors"},[g(n(Ns),{class:"w-4 h-4"})])]),e("div",Xs,[(i(),d(we,null,Ce(R,u=>e("div",{key:u,class:"text-xs font-medium text-slate-500 text-center py-2"},l(u),1)),64))]),e("div",Qs,[(i(!0),d(we,null,Ce(oe.value,u=>(i(),d("button",{key:`${u.year}-${u.month}-${u.day}`,onClick:T=>de(u),type:"button",disabled:J(u),class:U(["w-8 h-8 text-sm rounded-lg transition-all duration-150 flex items-center justify-center",{"text-slate-400":!u.isCurrentMonth,"text-slate-800":u.isCurrentMonth&&!ae(u),"bg-blue-600 text-white font-medium":ae(u),"hover:bg-slate-100":u.isCurrentMonth&&!ae(u)&&!J(u),"bg-blue-100 text-blue-700":be(u)&&!ae(u),"opacity-50 cursor-not-allowed":J(u),"cursor-pointer":!J(u)}])},l(u.day),11,eo))),128))]),e("div",{class:"flex justify-between mt-4 pt-3 border-t border-slate-200"},[e("button",{onClick:V,type:"button",class:"text-sm text-slate-600 hover:text-slate-800 transition-colors"}," Clear "),e("button",{onClick:F,type:"button",class:"text-sm text-blue-600 hover:text-blue-800 transition-colors"}," Today ")])])):x("",!0)]),_:1}),p.hasError&&p.errorMessage?(i(),d("div",to,l(p.errorMessage),1)):x("",!0)],512))}}),oo=et(so,[["__scopeId","data-v-008c50f1"]]),{showToast:_t}=Qe(),Je={email:h(""),password:h("")},ao=()=>{kt();const v=h(!1),j=re(()=>v.value||!Je.email.value||!Je.password.value);return{credential:Je,login:async r=>{var w;v.value=!0;const _=await ds.$_login({email:r.email,password:r.password});return console.log(_,"rse hee"),_.status===200||_.status===201?(Xe().createUser(_.data),_t({title:"Success",message:"Login was successfully",toastType:"success",duration:3e3})):_t({title:"Error",message:((w=_==null?void 0:_.data)==null?void 0:w.error)||"Something went wrong",toastType:"error",duration:3e3}),_},loading:v,isFormDisabled:j}};function no(){It();const{createOrder:v,loading:j}=gs(),{handlePayment:O,paymentForm:r,loading:_,generateTxRef:w}=bs(),c=h(null),M=h(""),W=h(""),R=h(!1),y=re(()=>j.value||_.value),q=o=>o.map(f=>{let V=f.productId;return!V&&f.id&&(V=f.id.includes("-")?f.id.split("-")[0]:f.id),{product:V,quantity:f.quantity,price:f.price,size:f.size||"",color:f.color||"",discount:f.discount||0,total:f.price*f.quantity}}),oe=o=>({firstName:o.firstName,lastName:o.lastName,address:o.address,city:o.city,state:o.state,country:o.country,postalCode:o.zipCode||o.postalCode,phone:o.phone,email:o.email}),ue=o=>({isInstallment:!0,numberOfInstallments:parseInt(o.numberOfInstallments),downPayment:parseFloat(o.downPayment),installmentAmount:parseFloat(o.installmentAmount||0),interestRate:parseFloat(o.interestRate||0),totalPayable:parseFloat(o.totalPayable||0),paymentFrequency:o.paymentFrequency,paymentMethod:o.paymentMethod}),de=o=>(o==null?void 0:o.taxRate)||2.5,ae=async o=>{var f,V,F,B,p,P;try{W.value="",M.value="",R.value=!1,console.log("Processing checkout with data:",o);const u=q(o.items),T=oe(o.deliveryDetails),H=T,X=de(o.country),k={items:u,subtotal:parseFloat(o.subtotal.toFixed(2)),tax:parseFloat(o.tax.toFixed(2)),taxRate:X,shipping:parseFloat(o.shipping.toFixed(2)),discount:0,total:parseFloat(o.total.toFixed(2)),status:"pending",paymentStatus:"pending",paymentType:o.paymentType,shippingAddress:T,billingAddress:H,paymentMethod:o.paymentMethod,paidAmount:0,refundedAmount:0,shippingMethod:o.deliveryMethod,shippingCost:parseFloat(o.shipping.toFixed(2)),shippingCarrier:o.deliveryMethod==="express"?"Express Courier":"Standard Shipping",currency:"USD",source:"web",locale:"en-US",notes:`Delivery Method: ${o.deliveryMethod}, Payment Method: ${o.paymentMethod}${o.paymentType==="installment"?", Payment Type: Installment Plan":""}`,metadata:{country:o.country,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),checkoutVersion:"2.0",paymentType:o.paymentType,deliveryMethod:o.deliveryMethod,cartItemsCount:o.items.length,hasInstallmentItems:o.items.some(me=>me.hasInstallmentOption)}};o.paymentType==="installment"&&o.installmentConfig?(k.installmentInfo=ue(o.installmentConfig),k.paidAmount=parseFloat(o.installmentConfig.downPayment),k.paymentStatus="partially_paid",k.metadata={...k.metadata,installmentDetails:{startDate:o.installmentConfig.startDate,needsFormalAgreement:o.installmentConfig.needsFormalAgreement||!1,productSize:o.installmentConfig.productSize||((f=u[0])==null?void 0:f.size),originalInterestRate:o.installmentConfig.interestRate,paymentFrequency:o.installmentConfig.paymentFrequency,calculatedAt:new Date().toISOString(),downPaymentPercentage:parseFloat(o.installmentConfig.downPayment)/parseFloat(o.total.toFixed(2))*100}},k.notes+=`, Installment Terms: ${k.installmentInfo.numberOfInstallments} payments of $${(V=k.installmentInfo.installmentAmount)==null?void 0:V.toFixed(2)}`):k.installmentInfo={isInstallment:!1};const E=new Date;o.deliveryMethod==="express"?E.setDate(E.getDate()+3):E.setDate(E.getDate()+7),k.estimatedDelivery=E,console.log("Sending order payload to backend:",k);const $=await v(k);if(console.log($.data._id,"res here"),!$||!((F=$==null?void 0:$.data)!=null&&F._id))return W.value="Failed to create order",{success:!1,error:((B=$==null?void 0:$.data)==null?void 0:B.message)||"Failed to create order"};console.log("Order created successfully:",$),c.value=$;let K=$.total;o.paymentType==="installment"&&o.installmentConfig&&(K=parseFloat(o.installmentConfig.downPayment)||o.immediatePayment||0,console.log("Installment payment - charging down payment:",K));const N=await be($,K,o.paymentType);return{success:!0,order:$,paymentAmount:K,paymentType:o.paymentType,paymentResult:N}}catch(u){console.error("Checkout process failed:",u);const T=((P=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:P.message)||(u==null?void 0:u.message)||"Checkout process failed";return W.value=T,{success:!1,error:T}}},be=async(o,f,V)=>{var F,B,p,P,u,T,H,X,k,E,$,K,N,me,se;console.log(o,"order object before payment processing");try{console.log("Processing payment for order:",o.data._id,"Amount:",f),r.value.amount=f;const m=w();r.value.tx_ref=m,r.value.meta={orderId:(F=o==null?void 0:o.data)==null?void 0:F._id,orderNumber:(B=o==null?void 0:o.data)==null?void 0:B.orderNumber,paymentType:V,...V==="installment"&&{isDownPayment:!0,installmentPlan:(p=o==null?void 0:o.data)==null?void 0:p.installmentInfo,remainingAmount:((P=o==null?void 0:o.data)==null?void 0:P.total)-f}},r.value.customer={email:((T=(u=o==null?void 0:o.data)==null?void 0:u.shippingAddress)==null?void 0:T.email)||"",phone_number:((X=(H=o==null?void 0:o.data)==null?void 0:H.shippingAddress)==null?void 0:X.phone)||"",name:`${((E=(k=o==null?void 0:o.data)==null?void 0:k.shippingAddress)==null?void 0:E.firstName)||""} ${((K=($=o==null?void 0:o.data)==null?void 0:$.shippingAddress)==null?void 0:K.lastName)||""}`.trim()},r.value.title=`Order ${(N=o==null?void 0:o.data)==null?void 0:N.orderNumber}`,r.value.description=V==="installment"?`Down payment for installment order ${(me=o==null?void 0:o.data)==null?void 0:me.orderNumber}`:`Payment for order ${(se=o==null?void 0:o.data)==null?void 0:se.orderNumber}`,console.log("Payment form configured:",r.value);const L=await O(o==null?void 0:o.data);return console.log(L,"Final payment result"),{success:!0,paymentReference:m,amount:f,paymentResult:L}}catch(m){return console.error("Payment processing failed:",m),M.value=m.message||"Payment processing failed",{success:!1,error:m.message||"Payment processing failed"}}};return{processCheckout:ae,verifyPayment:async(o,f)=>{var V,F,B;try{return!o&&!f?{success:!1,error:"No payment reference provided"}:(console.log("Verifying payment:",{flw_ref:o,tx_ref:f}),R.value=!0,{success:!0,flw_ref:o,tx_ref:f,orderId:((V=c.value)==null?void 0:V._id)||"",orderNumber:((F=c.value)==null?void 0:F.orderNumber)||"",paymentType:((B=c.value)==null?void 0:B.paymentType)||"full"})}catch(p){return console.error("Payment verification failed:",p),{success:!1,error:p.message||"Payment verification failed"}}},createInstallmentPlan:async(o,f)=>{try{return console.log("Creating installment plan for order:",o,f),{success:!0,installmentPlanId:`plan-${o}-${Date.now()}`,message:"Installment plan created successfully"}}catch(V){return console.error("Failed to create installment plan:",V),{success:!1,error:V.message||"Failed to create installment plan"}}},resetCheckout:()=>{c.value=null,M.value="",W.value="",R.value=!1},orderResponse:c,getPaymentSummary:()=>{var f;if(!c.value)return null;const o=c.value;return{orderNumber:o.orderNumber,total:o.total,paymentType:o.paymentType,installmentInfo:o.installmentInfo,items:o.items,paidAmount:o.paymentType==="installment"?((f=o.installmentInfo)==null?void 0:f.downPayment)||0:o.total}},isLoading:y,orderLoading:j,paymentLoading:_,orderCreationError:W,paymentError:M,paymentComplete:R,paymentForm:r}}const ge={$_create_shipping_config(v){return ve.post("/shipping-tax/shipping",v)},$_create_tax_config(v){return ve.post("/shipping-tax/tax",v)},$_get_all_shipping_configs(){return ve.get("/shipping-tax/shipping")},$_get_all_tax_configs(){return ve.get("/shipping-tax/tax")},$_update_shipping_config(v,j){return ve.patch(`/shipping-tax/shipping/${v}`,j)},$_update_tax_config(v,j){return ve.patch(`/shipping-tax/tax/${v}`,j)},$_delete_shipping_config(v){return ve.delete(`/shipping-tax/shipping/${v}`)},$_delete_tax_config(v){return ve.delete(`/shipping-tax/tax/${v}`)}},lo=()=>{const v=h(null),j=async()=>{try{return(await ge.$_get_all_tax_configs()).data}catch(w){throw v.value=w.message||"Failed to fetch tax configs",v.value}},O=async w=>{try{return(await ge.$_create_tax_config({...w})).data}catch(c){throw v.value=c.message||"Failed to create tax config",v.value}},r=async(w,c)=>{try{return(await ge.$_update_tax_config(w,{countryCode:c.countryCode||"",countryName:c.countryName||"",vatRate:c.vatRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(M){throw v.value=M.message||"Failed to update tax config",v.value}},_=async w=>{try{return(await ge.$_delete_tax_config(w)).data}catch(c){throw v.value=c.message||"Failed to delete tax config",v.value}};return ke(()=>{j()}),{error:v,fetchTaxConfigs:j,createTaxConfig:O,updateTaxConfig:r,deleteTaxConfig:_}},ro=()=>{const v=h(null),j=async()=>{try{const w=await ge.$_get_all_shipping_configs();return console.log(w,"fetching00000000000000000"),w.data}catch(w){throw v.value=w.message||"Failed to fetch shipping configs",v.value}},O=async w=>{try{return(await ge.$_create_shipping_config({...w})).data}catch(c){throw v.value=c.message||"Failed to create shipping config",v.value}},r=async(w,c)=>{try{return(await ge.$_update_shipping_config(w,{countryCode:c.countryCode||"",countryName:c.countryName||"",shippingRate:c.shippingRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(M){throw v.value=M.message||"Failed to update shipping config",v.value}},_=async w=>{try{const c=await ge.$_delete_shipping_config(w);return console.log(c,"config here"),c.data}catch(c){throw v.value=c.message||"Failed to delete shipping config",v.value}};return ke(()=>{j()}),{error:v,fetchShippingConfigs:j,createShippingConfig:O,updateShippingConfig:r,deleteShippingConfig:_}},io={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100"},uo={key:0,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},co={class:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200 text-center"},mo={class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center"},yo={key:1,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},po={class:"max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200"},fo={class:"text-center mb-8"},vo={class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},go={class:"bg-slate-50 rounded-xl p-6 mb-8"},bo={class:"flex justify-between items-center mb-3"},ho={class:"font-bold text-slate-800"},xo={class:"flex justify-between items-center mb-3"},wo={class:"font-bold text-slate-800"},Co={key:0,class:"flex justify-between items-center mb-3"},_o={class:"font-bold text-emerald-600"},No={class:"flex justify-between items-center"},Po={class:"text-slate-600 font-medium"},ko={class:"font-bold text-xl text-slate-800"},So={key:2,class:"container mx-auto px-4 py-8 lg:py-12"},Ao={class:"max-w-2xl mx-auto mb-12"},Io={class:"flex items-center justify-between relative"},To={class:"absolute top-4 left-0 right-0 h-0.5 bg-slate-200"},Mo={class:"relative flex flex-col items-center"},Eo={class:"relative flex flex-col items-center"},Do={class:"relative flex flex-col items-center"},Fo={class:"lg:grid space-y-6 lg:space-y-0 grid-cols-5 gap-8 lg:max-w-7xl mx-auto"},Oo={class:"lg:col-span-3"},Ro={key:0,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},$o={class:"flex items-center mb-6"},jo={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Vo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Lo={class:"space-y-2"},Uo={class:"space-y-2"},Bo={class:"space-y-2"},zo={class:"space-y-2"},Go={class:"space-y-2"},Yo={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},qo={class:"space-y-2"},Ho={class:"space-y-2"},Ko={class:"space-y-2"},Wo={class:"space-y-2"},Jo={type:"submit",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},Zo={key:1,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},Xo={class:"flex items-center mb-6"},Qo={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},ea={class:"space-y-4 mb-8"},ta={class:"flex items-center"},sa={key:0,class:"w-3 h-3 rounded-full bg-white"},oa={class:"flex-1"},aa={class:"flex justify-between items-center mb-1"},na={class:"font-bold text-slate-800"},la={class:"flex gap-2"},ra={key:2,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},ia={class:"flex items-center mb-6"},ua={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},da={class:"mb-8"},ca={class:"space-y-4"},ma={class:"flex items-center"},ya={key:0,class:"w-3 h-3 rounded-full bg-white"},pa={class:"flex-1"},fa={class:"flex justify-between items-center mb-1"},va={class:"font-bold text-emerald-600"},ga={class:"w-10 h-10 bg-emerald-100 rounded-md flex items-center justify-center ml-4"},ba={class:"flex items-center"},ha={key:0,class:"w-3 h-3 rounded-full bg-white"},xa={class:"flex-1"},wa={class:"flex justify-between items-center mb-1"},Ca={class:"font-bold text-blue-600"},_a={class:"w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center ml-4"},Na={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Pa={class:"flex items-center"},ka={class:"mt-2 text-xs text-yellow-700"},Sa={key:0,class:"mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200"},Aa={class:"text-lg font-semibold text-slate-800 mb-6 flex items-center"},Ia={class:"space-y-6"},Ta={class:"bg-white p-4 rounded-lg border border-blue-200"},Ma={class:"flex justify-between items-center mb-2"},Ea={class:"text-lg font-bold text-slate-800"},Da={class:"space-y-3"},Fa={class:"space-y-2"},Oa={class:"grid grid-cols-1 gap-3 mt-4"},Ra=["onClick"],$a={class:"flex justify-between items-start"},ja={class:"flex-1"},Va={class:"flex items-center gap-2 mb-2"},La={key:0,class:"w-2 h-2 rounded-full bg-white"},Ua={class:"font-semibold text-slate-800"},Ba={class:"space-y-1 text-sm"},za={class:"flex justify-between"},Ga={class:"font-semibold text-slate-800"},Ya={class:"flex justify-between"},qa={class:"text-slate-700"},Ha={class:"flex justify-between"},Ka={class:"text-slate-700"},Wa={class:"flex justify-between font-semibold border-t pt-1 mt-2"},Ja={class:"text-slate-800"},Za=["onClick"],Xa={class:"space-y-3"},Qa={class:"space-y-3"},en={class:"relative"},tn={class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500 font-medium"},sn=["min","max"],on={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},an={class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium"},nn={key:0,class:"text-sm text-red-600 animate-pulse flex items-center"},ln={key:0,class:"space-y-2"},rn={class:"flex justify-between text-xs text-slate-500"},un={class:"bg-slate-100 rounded-lg p-3"},dn={class:"flex justify-between text-xs text-slate-600 mb-1"},cn={class:"w-full bg-slate-200 rounded-full h-2"},mn={class:"text-xs text-slate-500 mt-2"},yn={key:1,class:"text-xs text-slate-500 bg-yellow-50 border border-yellow-200 rounded-lg p-3"},pn={class:"flex items-center"},fn={class:"space-y-3"},vn={class:"space-y-3"},gn={class:"space-y-3"},bn={class:"space-y-2"},hn={class:"flex items-center"},xn={class:"flex items-center"},wn={key:0,class:"bg-white p-6 rounded-lg border border-blue-200"},Cn={class:"space-y-3"},_n={class:"flex justify-between"},Nn={class:"font-semibold"},Pn={class:"flex justify-between"},kn={class:"font-semibold"},Sn={class:"flex justify-between"},An={class:"font-semibold"},In={class:"flex justify-between"},Tn={class:"font-semibold"},Mn={class:"flex justify-between"},En={class:"font-semibold"},Dn={class:"border-t pt-3"},Fn={class:"flex justify-between"},On={class:"font-bold text-lg"},Rn={class:"mb-8"},$n={class:"space-y-4"},jn={class:"flex items-center"},Vn={key:0,class:"w-3 h-3 rounded-full bg-white"},Ln={class:"w-10 h-10 bg-slate-100 rounded-md flex items-center justify-center"},Un={class:"lg:flex space-y-6 lg:space-y-0 gap-4"},Bn=["disabled"],zn={class:"lg:col-span-2"},Gn={class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-6 sticky top-6"},Yn={class:"flex items-center mb-6"},qn={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Hn={key:0,class:"space-y-4 mb-6 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},Kn={class:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0"},Wn=["src","alt"],Jn={class:"flex-1 min-w-0"},Zn={class:"font-semibold text-slate-800 text-sm truncate"},Xn={class:"text-sm text-slate-600"},Qn={class:"flex flex-col items-start justify-start gap-2 mt-1"},el={key:0,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},tl={key:1,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},sl={key:2,class:"text-xs px-2 py-1 block bg-emerald-100 text-emerald-700 rounded-full"},ol={class:"flex flex-wrap items-center gap-3 mt-2"},al={class:"flex items-center gap-2"},nl=["onClick","disabled"],ll={class:"text-sm font-semibold text-center min-w-[2rem]"},rl=["onClick"],il=["onClick"],ul={class:"text-right"},dl={class:"font-semibold text-slate-800"},cl={class:"border-t border-slate-200 pt-4 space-y-3"},ml={class:"flex justify-between text-sm"},yl={class:"font-semibold text-slate-800"},pl={class:"flex justify-between text-sm"},fl={class:"font-semibold text-slate-800"},vl={class:"flex justify-between text-sm"},gl={class:"text-slate-600"},bl={class:"font-semibold text-slate-800"},hl={key:0,class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},xl={class:"flex justify-between text-xs text-blue-700 mb-1"},wl={class:"flex justify-between text-xs text-blue-700 mb-1"},Cl={class:"flex justify-between text-xs text-blue-700"},_l={key:1,class:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg"},Nl={key:0},Pl={class:"flex justify-between font-bold text-lg pt-3 border-t border-slate-200"},kl={class:"text-slate-800"},Sl={class:"text-slate-800"},Al={key:2,class:"bg-emerald-50 p-3 rounded-lg border border-emerald-200"},Il={class:"flex justify-between font-semibold text-emerald-800"},Tl={class:"mt-6 pt-4 border-t border-slate-200"},Ml={class:"flex items-center text-sm text-slate-600 mb-3"},El={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},Dl={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative"},Fl={key:0},Ol={class:"space-y-3"},Rl={key:1},$l={class:"mb-4"},jl={class:"space-y-2"},Vl={class:"space-y-2"},Ll=["disabled"],Ul={class:"text-center"},Bl={key:2},zl={class:"mb-4"},Gl={class:"grid grid-cols-2 gap-4"},Yl={class:"space-y-2"},ql={class:"space-y-2"},Hl={class:"space-y-2"},Kl={class:"space-y-2"},Wl={class:"space-y-2"},Jl=["disabled"],Zl={class:"text-center"},Xl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},Ql={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto"},er={key:0},tr={class:"text-2xl font-bold text-slate-800 mb-6"},sr={class:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl"},or={class:"space-y-2"},ar={class:"flex items-center justify-between p-2 bg-white rounded-lg"},nr={class:"font-bold text-emerald-600"},lr={class:"flex items-center justify-between p-2 bg-white rounded-lg"},rr={class:"text-sm font-medium text-slate-700"},ir={class:"font-bold text-blue-600"},ur={class:"space-y-4"},dr={class:"bg-slate-50 rounded-xl p-4"},cr={class:"space-y-3"},mr={class:"flex justify-between items-center"},yr={class:"font-semibold"},pr={class:"border-t pt-3"},fr={class:"flex justify-between items-center mb-2"},vr={class:"text-slate-600"},gr={class:"font-semibold text-emerald-600"},br={class:"flex justify-between items-center mb-2"},hr={class:"font-semibold"},xr={class:"flex justify-between items-center mb-2"},wr={class:"text-slate-600"},Cr={class:"font-semibold"},_r={class:"border-t pt-3"},Nr={class:"flex justify-between items-center font-bold text-lg"},Pr={class:"text-slate-800"},kr={class:"flex justify-between items-center text-sm text-slate-600 mt-1"},Sr={class:"font-medium"},Ar={class:"bg-blue-50 rounded-xl p-4"},Ir={class:"text-sm text-slate-700 space-y-2"},Tr={class:"list-disc list-inside ml-4 space-y-1"},Mr={class:"bg-yellow-50 rounded-xl p-4"},Er={class:"font-semibold text-slate-800 mb-3"},Dr={class:"text-sm text-slate-700"},Fr={class:"grid grid-cols-2 gap-4"},Or={class:"text-xs space-y-1"},Rr={key:0},$r={key:1},jr={key:2},Vr={key:3},Lr={class:"text-xs space-y-1"},Ur={key:0},Br={key:1},zr={key:2},Gr=2.5,Nt=1,Pt=3,Yr=Ve({__name:"checkout",setup(v){const{userCurrency:j,initializeUserCurrency:O,convertFromUSD:r}=xs(),_=It(),w=cs(),{processCheckout:c,isLoading:M,paymentComplete:W}=no(),R=h(!1),{showToast:y}=Qe(),q=s=>{s.success&&(R.value=!1)},{removeFromCart:oe,updateCartItemQuantity:ue}=ms(),{signup:de}=ys(),{login:ae}=ao(),{isLoggedIn:be}=Xe(),{setItem:J,getItem:te,removeItem:_e}=hs(),{fetchShippingConfigs:I}=ro(),{fetchTaxConfigs:o}=lo(),f=h([]),V=h([]),F=h(null),B=h(0),p=h(0),P=h(!1),u=h(1),T=h("check"),H=h(!1),X=h(!1),k=h([]),E=h({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:""}),$=h("standard"),K=h("flutterwave"),N=h("full"),me=h(""),se=h(""),m=h({numberOfInstallments:"",paymentFrequency:"",downPayment:0,startDate:"",paymentMethod:"",needsFormalAgreement:!1,interestRate:0,totalAmount:0}),L=h({downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0}),Se=h(null),ie=h({firstName:"",lastName:"",email:"",password:"",phone:"",role:"customer"}),Ae=h({email:"",password:""}),Y={CART:"art-gallery-cart",CHECKOUT_STEP:"checkout-step",DELIVERY_DETAILS:"checkout-delivery-details",DELIVERY_METHOD:"checkout-delivery-method",PAYMENT_METHOD:"checkout-payment-method",PAYMENT_TYPE:"checkout-payment-type",INSTALLMENT_CONFIG:"checkout-installment-config",SELECTED_COUNTRY:"checkout-selected-country",SHIPPING_CONFIG:"checkout-shipping-config",TAX_CONFIG:"checkout-tax-config",GUEST_MODE:"checkout-guest-mode"},Mt=re(()=>rt.value.map(s=>({value:s.countryCode,label:s.countryName}))),tt=re(()=>Le.value.map(s=>{const t=mt(s);return{value:s.toString(),label:`${s} months`,estimate:t,displayText:`${s} months - ${r(t.monthlyPayment).formattedAmount}/month (20% down)`}})),Et=[{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly (Every 2 weeks)"},{value:"monthly",label:"Monthly"}],Dt=[{value:"auto_deduction",label:"Auto Deduction (Recommended)"},{value:"manual",label:"Manual Payment"}],Ft=()=>{const s=w.query.paymentType;s&&["full","installment"].includes(s)?(N.value=s,console.log("Payment type initialized from query params:",N.value)):(N.value="full",console.log("Payment type defaulted to full payment"))},Ie=re(()=>{console.log("Checking installment options for cart items:",k.value);const s=k.value.some(t=>{var C,a,A;let b=!1;return(C=t.installmentConfig)!=null&&C.enabled&&(b=!0),(A=(a=t.sizeConfig)==null?void 0:a.installmentConfig)!=null&&A.enabled&&(b=!0),t.hasInstallmentOption===!0&&(b=!0),console.log(`Item ${t.id}: hasInstallment=${b}`),b});return console.log("Overall hasInstallmentOptions:",s),s}),Ot=re(()=>k.value.filter(s=>s.hasInstallmentOption===!0&&s.installmentConfig&&s.installmentConfig.enabled===!0)),Le=re(()=>{const s=[3,6,12];return k.value.some(b=>{var C,a,A;return((C=b.installmentConfig)==null?void 0:C.enabled)||((A=(a=b.sizeConfig)==null?void 0:a.installmentConfig)==null?void 0:A.enabled)||b.hasInstallmentOption===!0})?(console.log("Available installment terms (fixed):",s),s):[]}),Rt=()=>{if(!Ie.value||Le.value.length===0)return 0;const s=ye();if(!s)return 0;const t=s.minimumAmount||0,b=z(),C=Math.max(...Le.value),a=s.minimumDownPaymentPercentage||20,A=b*a/100,S=b-A,Z=(s.interestRate||0)/12/100;let ne=0;if(Z>0){const fe=Math.pow(1+Z,C);ne=S*Z*fe/(fe-1)}else ne=S/C;return Math.max(t,ne)},$t=()=>{const s=ye(),t=parseInt(m.value.numberOfInstallments),b=Number(m.value.downPayment),C=z(),a=C*.2;return[3,6,12].includes(t)?Math.abs(b-a)>.01?(se.value=`Down payment must be exactly 20% (${r(a).formattedAmount})`,!1):s!=null&&s.minimumAmount&&C<s.minimumAmount?(se.value=`Minimum order amount for installments is ${r(s.minimumAmount).formattedAmount}`,!1):!0:(se.value="Please select 3, 6, or 12 months payment plan",!1)},ye=()=>{var b,C,a;const s=k.value.find(A=>{var S,Z,ne;return((S=A.installmentConfig)==null?void 0:S.enabled)||((ne=(Z=A.sizeConfig)==null?void 0:Z.installmentConfig)==null?void 0:ne.enabled)||A.hasInstallmentOption===!0});if(!s)return null;let t=null;return(C=(b=s.sizeConfig)==null?void 0:b.installmentConfig)!=null&&C.enabled?t=s.sizeConfig.installmentConfig:(a=s.installmentConfig)!=null&&a.enabled&&(t=s.installmentConfig),t&&(t.minimumDownPaymentPercentage=t.minimumDownPaymentPercentage||20,t.maximumDownPaymentPercentage=t.maximumDownPaymentPercentage||80),console.log("Current installment config from product data:",t),t};Ee(k,()=>{Se.value=ye(),console.log("Updated currentInstallmentConfig:",Se.value)},{deep:!0});const st=()=>20,ot=()=>20,Te=()=>z()*.2,Ue=()=>z()*.2,at=()=>{const s=ye();return(s==null?void 0:s.interestRate)||0},jt=()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]},Vt=()=>{if(!m.value.downPayment)return 0;const s=z();return Math.round(m.value.downPayment/s*100)},nt=()=>{if(m.value.numberOfInstallments){const s=z();m.value.downPayment=s*.2,se.value=""}De()},lt=()=>{if(!m.value.numberOfInstallments){se.value="Please select the number of months first";return}const t=z()*.2;m.value.downPayment=t,se.value="",De()},Lt=()=>{if(m.value.numberOfInstallments&&m.value.downPayment>0){const s=Te();m.value.downPayment<s&&(m.value.downPayment=s,lt())}},De=()=>{if(console.log("Calculating installment details..."),console.log("Config:",m.value),!m.value.numberOfInstallments||!m.value.downPayment){console.log("Missing required fields for calculation"),L.value={downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0};return}const s=z(),t=Number(m.value.downPayment),b=s-t,C=parseInt(m.value.numberOfInstallments),a=at(),A=a/12/100;console.log("Calculation inputs:",{totalAmount:s,downPayment:t,remainingAmount:b,numberOfInstallments:C,annualInterestRate:a,monthlyInterestRate:A});let S=0,Z=0;if(A>0){const fe=Math.pow(1+A,C);S=b*A*fe/(fe-1),Z=S*C-b}else S=b/C,Z=0;const ne=t+S*C;console.log("Calculation results:",{installmentAmount:S,totalInterest:Z,totalPayable:ne}),L.value={downPayment:t,installmentAmount:S,totalInterest:Z,totalPayable:ne,remainingAmount:b},m.value.totalAmount=s,m.value.interestRate=a},Be=re(()=>{if(console.log("Checking payment config validity..."),console.log("Payment type:",N.value),console.log("Payment method:",K.value),N.value==="full"){const s=K.value!=="";return console.log("Full payment valid:",s),s}else if(N.value==="installment"){const s=m.value;if(!ye())return console.log("No product installment config available"),!1;const b=K.value!==""&&s.numberOfInstallments!==""&&s.paymentFrequency!==""&&s.downPayment>0&&s.startDate!==""&&s.paymentMethod!==""&&typeof s.needsFormalAgreement=="boolean"&&!se.value,C=$t(),a=b&&C;return console.log("Installment payment validation:",{basicValidation:b,productValidation:C,overall:a}),a}return!1}),Ut=()=>M.value?"Processing...":N.value==="installment"?`Pay Initial Amount - ${r(L.value.downPayment).formattedAmount}`:`Complete Order - ${r(z()).formattedAmount}`,ze=s=>{if(N.value=s,s==="installment"&&(Se.value=ye(),Se.value)){const t=new Date;t.setDate(t.getDate()+30),m.value.startDate=t.toISOString().split("T")[0]}he()},Bt=s=>{if(!s){F.value=null,B.value=0,p.value=0;return}const t=String(s),b=rt.value.find(C=>C.countryCode===t);if(b){F.value=b;const C=f.value.find(A=>A.countryCode===t&&A.isActive);console.log(C,"selected shipping config"),C?B.value=C.shippingRate:B.value=t==="NG"?0:25;const a=V.value.find(A=>A.countryCode===t&&A.isActive);if(a)p.value=a.vatRate;else{const A={NG:7.5,US:8.5,GB:20,CA:13,AU:10,DE:19,FR:20};p.value=A[t]||0}}},zt=()=>{try{if(localStorage){const s=localStorage.getItem(Y.CART);if(s){const t=JSON.parse(s);if(Array.isArray(t))return k.value=t,console.log("Loaded cart from storage:",t),t}}}catch(s){console.error("Failed to load cart from localStorage:",s)}return[]},Ge=()=>{try{localStorage&&localStorage.setItem(Y.CART,JSON.stringify(k.value))}catch(s){console.error("Failed to save cart to localStorage:",s)}},he=()=>{try{localStorage&&(J(Y.CHECKOUT_STEP,u.value.toString()),J(Y.DELIVERY_METHOD,$.value),J(Y.PAYMENT_METHOD,K.value),J(Y.PAYMENT_TYPE,N.value),J(Y.INSTALLMENT_CONFIG,JSON.stringify(m.value)),J(Y.DELIVERY_DETAILS,JSON.stringify(E.value)),F.value&&J(Y.SELECTED_COUNTRY,JSON.stringify({countryInfo:F.value,shippingFee:B.value,taxRate:p.value})))}catch(s){console.error("Failed to persist checkout data:",s)}},pe=()=>{he()},Gt=()=>{try{if(localStorage){const s=te(Y.CHECKOUT_STEP);if(s&&!isNaN(Number(s))){const S=Number(s);S>=Nt&&S<=Pt&&(u.value=S)}const t=te(Y.DELIVERY_METHOD);t&&["standard","express","pickup"].includes(t)&&($.value=t);const b=te(Y.PAYMENT_METHOD);if(b&&["flutterwave","interswitch","manual"].includes(b)&&(K.value=b),N.value==="full"){const S=te(Y.PAYMENT_TYPE);S&&["full","installment"].includes(S)&&(N.value=S)}const C=te(Y.INSTALLMENT_CONFIG);if(C)try{const S=JSON.parse(C);Object.assign(m.value,S)}catch(S){console.error("Failed to parse saved installment config",S)}const a=te(Y.DELIVERY_DETAILS);if(a)try{const S=JSON.parse(a);Object.assign(E.value,S)}catch(S){console.error("Failed to parse saved delivery details",S)}const A=te(Y.SELECTED_COUNTRY);if(A)try{const S=JSON.parse(A);F.value=S.countryInfo,B.value=S.shippingFee||0,p.value=S.taxRate||0}catch(S){console.error("Failed to parse saved country data",S)}}}catch(s){console.error("Failed to load persisted checkout data:",s)}},Yt=()=>{try{localStorage&&Object.values(Y).forEach(s=>{_e(s)})}catch(s){console.error("Failed to clear persisted checkout data:",s)}},rt=h([{countryCode:"NG",countryName:"Nigeria"},{countryCode:"US",countryName:"United States"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"CA",countryName:"Canada"},{countryCode:"AU",countryName:"Australia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"FR",countryName:"France"},{countryCode:"IT",countryName:"Italy"},{countryCode:"ES",countryName:"Spain"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"AT",countryName:"Austria"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"NO",countryName:"Norway"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"FI",countryName:"Finland"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"GR",countryName:"Greece"},{countryCode:"PL",countryName:"Poland"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"RO",countryName:"Romania"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"MT",countryName:"Malta"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"JP",countryName:"Japan"},{countryCode:"KR",countryName:"South Korea"},{countryCode:"CN",countryName:"China"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"IN",countryName:"India"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"IR",countryName:"Iran"},{countryCode:"IQ",countryName:"Iraq"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"OM",countryName:"Oman"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"SY",countryName:"Syria"},{countryCode:"IL",countryName:"Israel"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"RU",countryName:"Russia"},{countryCode:"BY",countryName:"Belarus"},{countryCode:"UA",countryName:"Ukraine"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"PA",countryName:"Panama"},{countryCode:"CU",countryName:"Cuba"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"VE",countryName:"Venezuela"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"LY",countryName:"Libya"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"SZ",countryName:"Eswatini"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"ST",countryName:"So Tom and Prncipe"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"CG",countryName:"Republic of the Congo"},{countryCode:"CD",countryName:"Democratic Republic of the Congo"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"TD",countryName:"Chad"},{countryCode:"NE",countryName:"Niger"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"ML",countryName:"Mali"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"CI",countryName:"Cte d'Ivoire"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"TG",countryName:"Togo"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"AO",countryName:"Angola"}]),Fe=re(()=>k.value.reduce((s,t)=>s+t.price*t.quantity,0)),Me=()=>B.value*($.value==="express"?Gr:1),Ye=()=>{const s=Fe.value,t=Me();return(s+t)*(p.value/100)},z=()=>{const s=Fe.value,t=Me(),b=Ye();return s+t+b},qt=async()=>{if(!P.value){P.value=!0;try{const[s,t]=await Promise.all([I(),o()]);console.log(t,"Tax configs"),console.log(s,"Shipping Configs"),s&&(f.value=s),t&&(V.value=t)}catch(s){console.error("Failed to load shipping and tax configs:",s),y({title:"Configuration Error",message:"Failed to load shipping and tax information. Using default rates.",toastType:"warning",duration:5e3})}finally{P.value=!1}}},Ht=s=>{$.value=s,he()},Kt=s=>{K.value=s,he()},it=()=>{u.value<Pt&&(u.value++,he())},ut=()=>{u.value>Nt&&(u.value--,he())},dt=(s,t)=>{const b=k.value.findIndex(C=>C.id===s);b!==-1&&t>0&&(k.value[b].quantity=t,Ge(),ue(s,t))},Wt=s=>{k.value=k.value.filter(t=>t.id!==s),Ge(),oe(s),y({title:"Item Removed",message:"Item has been removed from your cart",toastType:"info",duration:3e3})},Oe=()=>{R.value=!1,T.value="check"},Jt=()=>{J(Y.GUEST_MODE,"true"),Oe()},Zt=async()=>{H.value=!0;try{const s=await de(ie.value);s.success?(y({title:"Account Created",message:"Your account has been created successfully!",toastType:"success",duration:5e3}),Oe()):y({title:"Signup Failed",message:s.message||"Failed to create account",toastType:"error",duration:5e3})}catch(s){console.error("Signup error:",s),y({title:"Signup Error",message:"An error occurred during signup",toastType:"error",duration:5e3})}finally{H.value=!1}},Xt=async()=>{X.value=!0;try{const s=await ae(Ae.value);s.status===200||s.status===201?(y({title:"Welcome Back",message:"You have been signed in successfully!",toastType:"success",duration:5e3}),Oe()):y({title:"Sign In Failed",message:s.message||"Invalid credentials",toastType:"error",duration:5e3})}catch(s){console.error("Signin error:",s),y({title:"Sign In Error",message:"An error occurred during sign in",toastType:"error",duration:5e3})}finally{X.value=!1}},Qt=async()=>{if(console.log("Processing payment..."),console.log("Payment type:",N.value),console.log("Payment config valid:",Be.value),!Be.value){y({title:"Invalid Configuration",message:"Please complete all required fields before proceeding",toastType:"error",duration:5e3});return}try{const s={items:k.value,deliveryDetails:E.value,deliveryMethod:$.value,paymentMethod:K.value,paymentType:N.value,subtotal:Fe.value,shipping:Me(),tax:Ye(),total:z(),country:F.value,installmentConfig:N.value==="installment"?{...m.value,summary:L.value}:null};console.log("Order data prepared:",s);const t=await c(s);if(console.log("Checkout result:",t),t.success)me.value=t.orderId||ct(),k.value=[],Ge(),Yt(),y({title:"Order Successful",message:`Your order #${me.value} has been placed successfully!`,toastType:"success",duration:5e3});else throw console.log(t,"result message here"),new Error(t.error||"Payment processing failed")}catch(s){console.error("Payment processing error:",s),y({title:"Payment Failed",message:s.message||"An error occurred while processing your payment",toastType:"error",duration:5e3})}},ct=()=>{const s=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,5).toUpperCase();return`ORD${s}${t}`},es=s=>{const t=s.target;t.src="/placeholder.svg?height=64&width=64"},ts=()=>{const s=te?te(Y.GUEST_MODE)==="true":!1,t=localStorage?localStorage.getItem("token"):null;!be.value&&!s&&!t&&(R.value=!0)};Ee(()=>w.query,s=>{if(s.paymentType&&["full","installment"].includes(s.paymentType)){const t=s.paymentType;N.value!==t&&(N.value=t,ze(t))}},{immediate:!0}),Ee(N,s=>{const t={...w.query};s!==t.paymentType&&_.push({query:{...t,paymentType:s}})},{immediate:!1}),Ee(()=>m.value,()=>{N.value==="installment"&&De(),he()},{deep:!0}),ke(async()=>{if(console.log("Checkout page mounted"),St(()=>{ts()}),Ft(),zt(),Gt(),await qt(),await O(),Se.value=ye(),N.value==="installment"&&Ie.value){const s=new Date;s.setDate(s.getDate()+30),m.value.startDate=s.toISOString().split("T")[0]}console.log("Checkout initialization complete"),console.log("Cart items:",k.value),console.log("Has installment options:",Ie.value),console.log("Selected payment type:",N.value)});const mt=s=>{const t=z(),b=ye(),C=t*.2,a=t-C,A=(b==null?void 0:b.interestRate)||5,S=A/12/100;let Z=0,ne=0;if(S>0){const fe=Math.pow(1+S,s);Z=a*S*fe/(fe-1),ne=Z*s-a}else Z=a/s,ne=0;return{monthlyPayment:Z,downPayment:C,totalInterest:ne,totalPayable:C+Z*s,interestRate:A,term:s}},qe=h(!1),D=h(null),ss=s=>{D.value=mt(parseInt(s)),qe.value=!0},yt=()=>{qe.value=!1,D.value=null};return(s,t)=>{const b=os,C=Ls;return i(),d("div",io,[t[133]||(t[133]=e("div",{class:"fixed inset-0 opacity-5 pointer-events-none"},[e("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),!k.value||k.value.length===0?(i(),d("div",uo,[e("div",co,[e("div",mo,[g(n(ps),{class:"w-12 h-12 text-slate-400"})]),t[32]||(t[32]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"Your shopping cart is empty",-1)),t[33]||(t[33]=e("p",{class:"text-slate-600 mb-8"},"Browse our amazing collection and add items to your cart to get started with your purchase.",-1)),g(b,{to:"/artworks",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"},{default:ce(()=>[g(n(We),{class:"w-4 h-4 mr-2"}),t[31]||(t[31]=le(" Browse Products "))]),_:1,__:[31]})])])):n(W)?(i(),d("div",yo,[e("div",po,[e("div",fo,[e("div",vo,[g(n(fs),{class:"w-10 h-10 text-emerald-600"})]),t[34]||(t[34]=e("h2",{class:"text-3xl font-bold text-slate-800 mb-4"},"Order Successfully Placed!",-1)),t[35]||(t[35]=e("p",{class:"text-slate-600 mb-2"},"Thank you for choosing us for your purchase",-1)),t[36]||(t[36]=e("p",{class:"text-slate-500 text-sm"},"A confirmation email with your order details has been sent to your email address",-1))]),e("div",go,[e("div",bo,[t[37]||(t[37]=e("span",{class:"text-slate-600 font-medium"},"Order Reference",-1)),e("span",ho,"#"+l(me.value||ct()),1)]),e("div",xo,[t[38]||(t[38]=e("span",{class:"text-slate-600 font-medium"},"Payment Method",-1)),e("span",wo,l(N.value==="installment"?"Payment Plan":"Full Payment"),1)]),N.value==="installment"?(i(),d("div",Co,[t[39]||(t[39]=e("span",{class:"text-slate-600 font-medium"},"Initial Payment",-1)),e("span",_o,l(n(r)(L.value.downPayment).formattedAmount),1)])):x("",!0),e("div",No,[e("span",Po,l(N.value==="installment"?"Total Order Value":"Total Amount"),1),e("span",ko,l(n(r)(z()).formattedAmount),1)])]),g(b,{to:"/",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},{default:ce(()=>t[40]||(t[40]=[le(" Continue Shopping ")])),_:1,__:[40]})])])):(i(),d("div",So,[t[108]||(t[108]=e("div",{class:"text-center mt-20 mb-12"},[e("h1",{class:"text-xl lg:text-3xl font-bold text-slate-800 mb-4"},"Secure Checkout Process"),e("p",{class:"text-slate-600 max-w-2xl mx-auto"},"Complete your purchase safely and securely. All your personal and payment information is protected with advanced encryption technology.")],-1)),e("div",Ao,[e("div",Io,[e("div",To,[e("div",{class:"h-full bg-gradient-to-r from-slate-800 to-slate-900 transition-all duration-500 ease-out",style:vt({width:`${(u.value-1)/2*100}%`})},null,4)]),e("div",Mo,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=1?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[g(n(bt),{class:"w-4 h-4"})],2),t[41]||(t[41]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Personal Info",-1))]),e("div",Eo,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=2?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[g(n(ht),{class:"w-4 h-4"})],2),t[42]||(t[42]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Delivery",-1))]),e("div",Do,[e("div",{class:U(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",u.value>=3?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[g(n(Re),{class:"w-4 h-4"})],2),t[43]||(t[43]=e("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Payment",-1))])])]),e("div",Fo,[e("div",Oo,[g(xe,{name:"slide-fade",mode:"out-in"},{default:ce(()=>[u.value===1?(i(),d("div",Ro,[e("div",$o,[e("div",jo,[g(n(bt),{class:"w-5 h-5 text-slate-600"})]),t[44]||(t[44]=e("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Personal Information",-1))]),e("form",{onSubmit:Pe(it,["prevent"]),class:"space-y-6"},[e("div",Vo,[e("div",Lo,[t[45]||(t[45]=e("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name *",-1)),G(e("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=a=>E.value.firstName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your first name",onInput:pe},null,544),[[Q,E.value.firstName]])]),e("div",Uo,[t[46]||(t[46]=e("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name *",-1)),G(e("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=a=>E.value.lastName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your last name",onInput:pe},null,544),[[Q,E.value.lastName]])])]),e("div",Bo,[t[47]||(t[47]=e("label",{for:"email",class:"block text-sm font-semibold text-slate-700"},"Email Address *",-1)),G(e("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=a=>E.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",onInput:pe},null,544),[[Q,E.value.email]]),t[48]||(t[48]=e("p",{class:"text-xs text-slate-500"},"We'll send your order confirmation to this email",-1))]),e("div",zo,[t[49]||(t[49]=e("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone Number *",-1)),G(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=a=>E.value.phone=a),type:"tel",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your phone number",onInput:pe},null,544),[[Q,E.value.phone]]),t[50]||(t[50]=e("p",{class:"text-xs text-slate-500"},"For delivery updates and order notifications",-1))]),e("div",Go,[t[51]||(t[51]=e("label",{for:"address",class:"block text-sm font-semibold text-slate-700"},"Complete Address *",-1)),G(e("input",{id:"address","onUpdate:modelValue":t[4]||(t[4]=a=>E.value.address=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your complete street address",onInput:pe},null,544),[[Q,E.value.address]])]),e("div",Yo,[e("div",qo,[t[52]||(t[52]=e("label",{for:"city",class:"block text-sm font-semibold text-slate-700"},"City *",-1)),G(e("input",{id:"city","onUpdate:modelValue":t[5]||(t[5]=a=>E.value.city=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"City",onInput:pe},null,544),[[Q,E.value.city]])]),e("div",Ho,[t[53]||(t[53]=e("label",{for:"state",class:"block text-sm font-semibold text-slate-700"},"State/Province *",-1)),G(e("input",{id:"state","onUpdate:modelValue":t[6]||(t[6]=a=>E.value.state=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"State",onInput:pe},null,544),[[Q,E.value.state]])]),e("div",Ko,[t[54]||(t[54]=e("label",{for:"zipCode",class:"block text-sm font-semibold text-slate-700"},"ZIP/Postal Code *",-1)),G(e("input",{id:"zipCode","onUpdate:modelValue":t[7]||(t[7]=a=>E.value.zipCode=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"ZIP",onInput:pe},null,544),[[Q,E.value.zipCode]])])]),e("div",Wo,[t[55]||(t[55]=e("label",{for:"country",class:"block text-sm font-semibold text-slate-700"},"Country *",-1)),g($e,{modelValue:E.value.country,"onUpdate:modelValue":t[8]||(t[8]=a=>E.value.country=a),options:Mt.value,placeholder:"Select your country",onChange:Bt},null,8,["modelValue","options"])]),e("button",Jo,[t[56]||(t[56]=le(" Continue to Delivery Options ")),g(n(xt),{class:"w-5 h-5 ml-2"})])],32)])):u.value===2?(i(),d("div",Zo,[e("div",Xo,[e("div",Qo,[g(n(ht),{class:"w-5 h-5 text-slate-600"})]),t[57]||(t[57]=e("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Delivery Options",-1))]),e("div",ea,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",$.value==="standard"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[9]||(t[9]=a=>Ht("standard"))},[e("div",ta,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",$.value==="standard"?"border-slate-800 bg-slate-800":"border-slate-300"])},[$.value==="standard"?(i(),d("div",sa)):x("",!0)],2),e("div",oa,[e("div",aa,[t[58]||(t[58]=e("span",{class:"font-semibold text-slate-800"},"Express Delivery",-1)),e("span",na,l(n(r)(B.value).formattedAmount),1)]),t[59]||(t[59]=e("p",{class:"text-sm text-slate-600"},"Fast and reliable delivery within 5-7 business days",-1)),t[60]||(t[60]=e("p",{class:"text-xs text-slate-500 mt-1"},"Includes package tracking and delivery confirmation",-1))])])],2)]),e("div",la,[e("button",{onClick:ut,class:"flex-1 py-3 border-2 text-sm border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[g(n(We),{class:"w-4 h-4 mr-2"}),t[61]||(t[61]=le(" Back "))]),e("button",{onClick:it,class:"flex-1 py-3 px-3 text-sm bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},[t[62]||(t[62]=le(" Continue to Payment ")),g(n(xt),{class:"w-4 h-4 ml-2"})])])])):u.value===3?(i(),d("div",ra,[e("div",ia,[e("div",ua,[g(n(Re),{class:"w-5 h-5 text-slate-600"})]),t[63]||(t[63]=e("h2",{class:"text-lg lg:text-2xl font-bold text-slate-800"},"Payment Setup",-1))]),e("div",da,[t[69]||(t[69]=e("h3",{class:"text-base lg:text-lg font-semibold text-slate-800 mb-4"},"Choose Your Payment Method",-1)),e("div",ca,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",N.value==="full"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[10]||(t[10]=a=>ze("full"))},[e("div",ma,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",N.value==="full"?"border-slate-800 bg-slate-800":"border-slate-300"])},[N.value==="full"?(i(),d("div",ya)):x("",!0)],2),e("div",pa,[e("div",fa,[t[64]||(t[64]=e("span",{class:"font-semibold text-slate-800"},"Pay Complete Amount Now",-1)),e("span",va,l(n(r)(z()).formattedAmount),1)]),t[65]||(t[65]=e("p",{class:"text-sm text-slate-600"},"Complete your purchase immediately with no additional charges or fees",-1))]),e("div",ga,[g(n(Re),{class:"w-6 h-6 text-emerald-600"})])])],2),Ie.value?(i(),d("div",{key:0,class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",N.value==="installment"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[11]||(t[11]=a=>ze("installment"))},[e("div",ba,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",N.value==="installment"?"border-slate-800 bg-slate-800":"border-slate-300"])},[N.value==="installment"?(i(),d("div",ha)):x("",!0)],2),e("div",xa,[e("div",wa,[t[66]||(t[66]=e("span",{class:"font-semibold text-slate-800"},"Flexible Payment Plan",-1)),e("span",Ca,"Starting from "+l(n(r)(Rt()).formattedAmount)+"/month",1)]),t[67]||(t[67]=e("p",{class:"text-sm text-slate-600"},"Break down your payment into manageable monthly installments with flexible terms",-1))]),e("div",_a,[g(n(Tt),{class:"w-6 h-6 text-blue-600"})])])],2)):x("",!0),Ie.value?x("",!0):(i(),d("div",Na,[e("div",Pa,[g(n(wt),{class:"w-5 h-5 text-yellow-600 mr-2"}),t[68]||(t[68]=e("span",{class:"text-sm text-yellow-800"},"Payment plans are not available for the current items in your cart",-1))]),e("div",ka,[e("p",null,"Items eligible for payment plans: "+l(Ot.value.length)+" of "+l(k.value.length),1)])]))])]),g(xe,{name:"fade"},{default:ce(()=>[N.value==="installment"?(i(),d("div",Sa,[e("h3",Aa,[g(n(As),{class:"w-5 h-5 mr-2 text-blue-600"}),t[70]||(t[70]=le(" Set Up Your Payment Plan "))]),e("div",Ia,[e("div",Ta,[e("div",Ma,[t[71]||(t[71]=e("span",{class:"text-sm font-medium text-slate-600"},"Total Purchase Amount",-1)),e("span",Ea,l(n(r)(z()).formattedAmount),1)]),t[72]||(t[72]=e("p",{class:"text-xs text-slate-500"},"This is the total amount for your order including all fees and taxes",-1))]),e("div",Da,[t[77]||(t[77]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How many months would you like to spread the payments? * ",-1)),e("div",Fa,[g($e,{modelValue:m.value.numberOfInstallments,"onUpdate:modelValue":t[12]||(t[12]=a=>m.value.numberOfInstallments=a),options:tt.value.map(a=>({value:a.value,label:a.displayText})),placeholder:"Choose your payment duration",onChange:nt},null,8,["modelValue","options"]),e("div",Oa,[(i(!0),d(we,null,Ce(tt.value,a=>(i(),d("div",{key:a.value,class:U(["border rounded-lg p-4 hover:bg-slate-50 transition-colors cursor-pointer",m.value.numberOfInstallments===a.value?"border-blue-500 bg-blue-50":"border-slate-200"]),onClick:A=>{m.value.numberOfInstallments=a.value,nt()}},[e("div",$a,[e("div",ja,[e("div",Va,[e("div",{class:U(["w-4 h-4 rounded-full border-2 flex items-center justify-center",m.value.numberOfInstallments===a.value?"border-blue-500 bg-blue-500":"border-slate-300"])},[m.value.numberOfInstallments===a.value?(i(),d("div",La)):x("",!0)],2),e("span",Ua,l(a.label),1)]),e("div",Ba,[e("div",za,[t[73]||(t[73]=e("span",{class:"text-slate-600"},"Monthly Payment:",-1)),e("span",Ga,l(n(r)(a.estimate.monthlyPayment).formattedAmount),1)]),e("div",Ya,[t[74]||(t[74]=e("span",{class:"text-slate-600"},"Min. Down Payment:",-1)),e("span",qa,l(n(r)(a.estimate.downPayment).formattedAmount),1)]),e("div",Ha,[t[75]||(t[75]=e("span",{class:"text-slate-600"},"Total Interest:",-1)),e("span",Ka,l(n(r)(a.estimate.totalInterest).formattedAmount),1)]),e("div",Wa,[t[76]||(t[76]=e("span",{class:"text-slate-800"},"Total You'll Pay:",-1)),e("span",Ja,l(n(r)(a.estimate.totalPayable).formattedAmount),1)])])]),e("button",{onClick:Pe(A=>ss(a.value),["stop"]),class:"ml-3 px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors"}," View Details ",8,Za)])],10,Ra))),128))])]),t[78]||(t[78]=e("p",{class:"text-xs text-slate-500"},"Compare different payment terms to find what works best for your budget",-1))]),e("div",Xa,[t[79]||(t[79]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How often would you prefer to make payments? * ",-1)),g($e,{modelValue:m.value.paymentFrequency,"onUpdate:modelValue":t[13]||(t[13]=a=>m.value.paymentFrequency=a),options:Et,placeholder:"Select payment schedule",onChange:De},null,8,["modelValue"])]),e("div",Qa,[t[81]||(t[81]=e("label",{class:"block text-sm font-semibold text-slate-700"}," Initial Payment Amount * ",-1)),e("div",en,[e("span",tn,l(n(j)||"USD"),1),G(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>m.value.downPayment=a),onInput:lt,onBlur:Lt,type:"number",min:Te(),max:Ue(),step:"0.01",class:U(["w-full pl-16 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",se.value?"border-red-300 ring-2 ring-red-200":"border-slate-300"]),placeholder:"Enter initial payment amount",required:""},null,42,sn),[[Q,m.value.downPayment,void 0,{number:!0}]]),m.value.downPayment>0&&!se.value?(i(),d("div",on,[e("span",an,l(Vt())+"% ",1)])):x("",!0)]),g(xe,{name:"error-fade"},{default:ce(()=>[se.value?(i(),d("div",nn,[g(n(Ps),{class:"w-4 h-4 mr-1"}),le(" "+l(se.value),1)])):x("",!0)]),_:1}),m.value.numberOfInstallments?(i(),d("div",ln,[e("div",rn,[e("span",null,"Minimum for "+l(m.value.numberOfInstallments)+" months: "+l(n(r)(Te()).formattedAmount),1),e("span",null,"Maximum: "+l(n(r)(Ue()).formattedAmount),1)]),e("div",un,[e("div",dn,[e("span",null,l(st())+"%",1),e("span",null,l(ot())+"%",1)]),e("div",cn,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:vt({width:`${Math.min(100,Math.max(0,(m.value.downPayment-Te())/(Ue()-Te())*100))}%`})},null,4)]),e("p",mn," For "+l(m.value.numberOfInstallments)+" months plan: Pay between "+l(st())+"% - "+l(ot())+"% upfront ",1)])])):(i(),d("div",yn,[e("p",pn,[g(n(wt),{class:"w-4 h-4 mr-1"}),t[80]||(t[80]=le(" Please select the number of months first to see payment limits "))])]))]),e("div",fn,[t[82]||(t[82]=e("label",{class:"block text-sm font-semibold text-slate-700"}," When should your first installment payment be due? * ",-1)),g(oo,{modelValue:m.value.startDate,"onUpdate:modelValue":t[15]||(t[15]=a=>m.value.startDate=a),"min-date":jt(),placeholder:"Select first payment date"},null,8,["modelValue","min-date"]),t[83]||(t[83]=e("p",{class:"text-xs text-slate-500"},"Choose a date at least 7 days from today for your first installment",-1))]),e("div",vn,[t[84]||(t[84]=e("label",{class:"block text-sm font-semibold text-slate-700"}," How would you like to make your installment payments? * ",-1)),g($e,{modelValue:m.value.paymentMethod,"onUpdate:modelValue":t[16]||(t[16]=a=>m.value.paymentMethod=a),options:Dt,placeholder:"Choose payment method"},null,8,["modelValue"])]),e("div",gn,[t[87]||(t[87]=e("label",{class:"block text-sm font-semibold text-slate-700"}," Would you like a formal payment agreement document? * ",-1)),e("div",bn,[e("label",hn,[G(e("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>m.value.needsFormalAgreement=a),type:"radio",value:!0,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[gt,m.value.needsFormalAgreement]]),t[85]||(t[85]=e("span",{class:"ml-2 text-sm text-slate-700"},"Yes, I would like a formal agreement document",-1))]),e("label",xn,[G(e("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>m.value.needsFormalAgreement=a),type:"radio",value:!1,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[gt,m.value.needsFormalAgreement]]),t[86]||(t[86]=e("span",{class:"ml-2 text-sm text-slate-700"},"No, proceed without formal documentation",-1))])])]),L.value.installmentAmount>0?(i(),d("div",wn,[t[94]||(t[94]=e("h4",{class:"font-semibold text-slate-800 mb-4"},"Your Payment Plan Summary",-1)),e("div",Cn,[e("div",_n,[t[88]||(t[88]=e("span",{class:"text-sm text-slate-600"},"Initial Payment (Today)",-1)),e("span",Nn,l(n(r)(L.value.downPayment).formattedAmount),1)]),e("div",Pn,[t[89]||(t[89]=e("span",{class:"text-sm text-slate-600"},"Monthly Payment Amount",-1)),e("span",kn,l(n(r)(L.value.installmentAmount).formattedAmount),1)]),e("div",Sn,[t[90]||(t[90]=e("span",{class:"text-sm text-slate-600"},"Number of Monthly Payments",-1)),e("span",An,l(m.value.numberOfInstallments),1)]),e("div",In,[t[91]||(t[91]=e("span",{class:"text-sm text-slate-600"},"Annual Interest Rate",-1)),e("span",Tn,l(at())+"%",1)]),e("div",Mn,[t[92]||(t[92]=e("span",{class:"text-sm text-slate-600"},"Total Interest Charges",-1)),e("span",En,l(n(r)(L.value.totalInterest).formattedAmount),1)]),e("div",Dn,[e("div",Fn,[t[93]||(t[93]=e("span",{class:"font-semibold text-slate-800"},"Total Amount You'll Pay",-1)),e("span",On,l(n(r)(L.value.totalPayable).formattedAmount),1)])])])])):x("",!0)])])):x("",!0)]),_:1}),e("div",Rn,[t[96]||(t[96]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Secure Payment Gateway",-1)),e("div",$n,[e("div",{class:U(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",K.value==="flutterwave"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:t[19]||(t[19]=a=>Kt("flutterwave"))},[e("div",jn,[e("div",{class:U(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",K.value==="flutterwave"?"border-slate-800 bg-slate-800":"border-slate-300"])},[K.value==="flutterwave"?(i(),d("div",Vn)):x("",!0)],2),t[95]||(t[95]=e("div",{class:"flex-1"},[e("span",{class:"font-semibold text-slate-800"},"Pay Securely with Card"),e("p",{class:"text-sm text-slate-600"},"Safe and secure payment processing via Flutterwave")],-1)),e("div",Ln,[g(n(Re),{class:"w-6 h-6 text-slate-600"})])])],2)])]),e("div",Un,[e("button",{onClick:ut,class:"flex-1 py-3 border-2 w-full border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[g(n(We),{class:"w-4 h-4 mr-2"}),t[97]||(t[97]=le(" Back "))]),e("button",{onClick:Qt,disabled:n(M)||!Be.value,class:"flex-1 py-3 w-full bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[n(M)?(i(),je(n(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(Ut()),1)],8,Bn)])])):x("",!0)]),_:1})]),e("div",zn,[e("div",Gn,[e("div",Yn,[e("div",qn,[g(n(Is),{class:"w-5 h-5 text-slate-600"})]),t[98]||(t[98]=e("h2",{class:"text-lg lg:text-xl font-bold text-slate-800"},"Order Summary",-1))]),k.value&&k.value.length>0?(i(),d("div",Hn,[(i(!0),d(we,null,Ce(k.value,a=>(i(),d("div",{key:a.id,class:"flex gap-4 p-4 border border-slate-100 rounded-xl hover:bg-slate-50 transition-all duration-200 group"},[e("div",Kn,[e("img",{src:a.image||"/placeholder.svg?height=64&width=64",alt:a.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:es},null,40,Wn)]),e("div",Jn,[e("h4",Zn,l(a.title),1),e("p",Xn,l(n(r)(a.price).formattedAmount),1),e("div",Qn,[a.size?(i(),d("span",el,l(a.size),1)):x("",!0),a.color?(i(),d("span",tl,l(a.color),1)):x("",!0),a.hasInstallmentOption?(i(),d("span",sl,"Payment Plans Available")):x("",!0)]),e("div",ol,[e("div",al,[e("button",{onClick:A=>dt(a.id,Math.max(1,a.quantity-1)),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors",disabled:a.quantity<=1},[g(n(ks),{class:"w-4 h-4"})],8,nl),e("span",ll,l(a.quantity),1),e("button",{onClick:A=>dt(a.id,a.quantity+1),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors"},[g(n(Ss),{class:"w-4 h-4"})],8,rl)]),e("button",{onClick:A=>Wt(a.id),class:"ml-auto w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-red-50 hover:border-red-200 hover:text-red-600 transition-colors"},[g(n(Ts),{class:"w-4 h-4"})],8,il)])]),e("div",ul,[e("span",dl,l(n(r)(a.price*a.quantity).formattedAmount),1)])]))),128))])):x("",!0),e("div",cl,[e("div",ml,[t[99]||(t[99]=e("span",{class:"text-slate-600"},"Subtotal",-1)),e("span",yl,l(n(r)(Fe.value).formattedAmount),1)]),e("div",pl,[t[100]||(t[100]=e("span",{class:"text-slate-600"},"Delivery",-1)),e("span",fl,l(Me()===0?"Free":`${n(r)(Me()).formattedAmount}`),1)]),e("div",vl,[e("span",gl,"Tax ("+l(p.value)+"%)",1),e("span",bl,l(n(r)(Ye()).formattedAmount),1)]),N.value==="installment"&&L.value.installmentAmount>0?(i(),d("div",hl,[t[103]||(t[103]=e("div",{class:"text-xs font-semibold text-blue-800 mb-2"},"Payment Plan Details",-1)),e("div",xl,[t[101]||(t[101]=e("span",null,"Initial Payment",-1)),e("span",null,l(n(r)(L.value.downPayment).formattedAmount),1)]),e("div",wl,[e("span",null,l(m.value.numberOfInstallments)+"  "+l(n(r)(L.value.installmentAmount).formattedAmount),1),e("span",null,l(n(r)(L.value.installmentAmount*m.value.numberOfInstallments).formattedAmount),1)]),e("div",Cl,[t[102]||(t[102]=e("span",null,"Interest Charges",-1)),e("span",null,l(n(r)(L.value.totalInterest).formattedAmount),1)])])):x("",!0),F.value?(i(),d("div",_l,[e("p",null,"Delivering to: "+l(F.value.countryName),1),e("p",null,"Tax Rate: "+l(p.value)+"%",1),N.value==="installment"?(i(),d("p",Nl,"Payment Method: Flexible Payment Plan")):x("",!0)])):x("",!0),e("div",Pl,[e("span",kl,l(N.value==="installment"?"Total Amount":"Total"),1),e("span",Sl,l(N.value==="installment"&&L.value.totalPayable>0?n(r)(L.value.totalPayable).formattedAmount:n(r)(z()).formattedAmount),1)]),N.value==="installment"&&L.value.downPayment>0?(i(),d("div",Al,[e("div",Il,[t[104]||(t[104]=e("span",null,"Amount Due Today",-1)),e("span",null,l(n(r)(L.value.downPayment).formattedAmount),1)]),t[105]||(t[105]=e("p",{class:"text-xs text-emerald-600 mt-1"},"Initial payment required to start your plan",-1))])):x("",!0)]),e("div",Tl,[e("div",Ml,[g(n(vs),{class:"w-4 h-4 mr-2"}),t[106]||(t[106]=e("span",null,"Protected by 256-bit SSL encryption",-1))]),t[107]||(t[107]=Ze('<div class="flex gap-2" data-v-5b471624><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-5b471624><span class="text-xs font-bold text-slate-600" data-v-5b471624>VISA</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-5b471624><span class="text-xs font-bold text-slate-600" data-v-5b471624>MC</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-5b471624><span class="text-xs font-bold text-slate-600" data-v-5b471624>AMEX</span></div></div>',1))])])])])])),g(xe,{name:"modal"},{default:ce(()=>[R.value?(i(),d("div",El,[e("div",Dl,[e("button",{onClick:Oe,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[g(n(Ct),{class:"w-4 h-4"})]),T.value==="check"?(i(),d("div",Fl,[t[109]||(t[109]=e("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-4"},"Welcome!",-1)),t[110]||(t[110]=e("p",{class:"text-slate-600 text-center mb-6"},"Sign in to track your orders and save your preferences, or continue as a guest.",-1)),e("div",Ol,[e("button",{onClick:t[20]||(t[20]=a=>T.value="signin"),class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Sign In "),e("button",{onClick:t[21]||(t[21]=a=>T.value="signup"),class:"w-full py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium"}," Create Account "),e("button",{onClick:Jt,class:"w-full py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium"}," Continue as Guest ")])])):T.value==="signin"?(i(),d("div",Rl,[t[113]||(t[113]=e("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-6"},"Sign In",-1)),e("div",$l,[g(C,{onCallback:q,authType:"login"})]),e("form",{onSubmit:Pe(Xt,["prevent"]),class:"space-y-4"},[e("div",jl,[t[111]||(t[111]=e("label",{for:"signinEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),G(e("input",{id:"signinEmail","onUpdate:modelValue":t[22]||(t[22]=a=>Ae.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[Q,Ae.value.email]])]),e("div",Vl,[t[112]||(t[112]=e("label",{for:"signinPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),G(e("input",{id:"signinPassword","onUpdate:modelValue":t[23]||(t[23]=a=>Ae.value.password=a),type:"password",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"},null,512),[[Q,Ae.value.password]])]),e("button",{type:"submit",disabled:X.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[X.value?(i(),je(n(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(X.value?"Signing In...":"Sign In"),1)],8,Ll),e("div",Ul,[e("button",{type:"button",onClick:t[24]||(t[24]=a=>T.value="signup"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Don't have an account? Sign up ")])],32)])):T.value==="signup"?(i(),d("div",Bl,[t[120]||(t[120]=e("h2",{class:"text-2xl text-center font-bold text-slate-800 mb-6"},"Create Account",-1)),e("div",zl,[g(C,{onCallback:q,authType:"signup"})]),e("form",{onSubmit:Pe(Zt,["prevent"]),class:"space-y-4"},[e("div",Gl,[e("div",Yl,[t[114]||(t[114]=e("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),G(e("input",{id:"firstName","onUpdate:modelValue":t[25]||(t[25]=a=>ie.value.firstName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"First name"},null,512),[[Q,ie.value.firstName]])]),e("div",ql,[t[115]||(t[115]=e("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),G(e("input",{id:"lastName","onUpdate:modelValue":t[26]||(t[26]=a=>ie.value.lastName=a),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Last name"},null,512),[[Q,ie.value.lastName]])])]),e("div",Hl,[t[116]||(t[116]=e("label",{for:"signupEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),G(e("input",{id:"signupEmail","onUpdate:modelValue":t[27]||(t[27]=a=>ie.value.email=a),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[Q,ie.value.email]])]),e("div",Kl,[t[117]||(t[117]=e("label",{for:"signupPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),G(e("input",{id:"signupPassword","onUpdate:modelValue":t[28]||(t[28]=a=>ie.value.password=a),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"},null,512),[[Q,ie.value.password]]),t[118]||(t[118]=e("p",{class:"text-xs text-slate-500"},"Password must be at least 6 characters",-1))]),e("div",Wl,[t[119]||(t[119]=e("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone (Optional)",-1)),G(e("input",{id:"phone","onUpdate:modelValue":t[29]||(t[29]=a=>ie.value.phone=a),type:"tel",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number"},null,512),[[Q,ie.value.phone]])]),e("button",{type:"submit",disabled:H.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[H.value?(i(),je(n(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):x("",!0),le(" "+l(H.value?"Creating Account...":"Create Account"),1)],8,Jl),e("div",Zl,[e("button",{type:"button",onClick:t[30]||(t[30]=a=>T.value="signin"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Already have an account? Sign in ")])],32)])):x("",!0)])])):x("",!0)]),_:1}),g(xe,{name:"modal"},{default:ce(()=>[qe.value?(i(),d("div",Xl,[e("div",Ql,[e("button",{onClick:yt,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[g(n(Ct),{class:"w-4 h-4"})]),D.value?(i(),d("div",er,[e("h2",tr,l(D.value.term)+" Month Payment Plan",1),e("div",sr,[t[122]||(t[122]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"Payment Timeline",-1)),e("div",or,[e("div",ar,[t[121]||(t[121]=e("span",{class:"text-sm font-medium text-slate-700"},"Today (Down Payment)",-1)),e("span",nr,l(n(r)(D.value.downPayment).formattedAmount),1)]),e("div",lr,[e("span",rr,"Monthly  "+l(D.value.term),1),e("span",ir,l(n(r)(D.value.monthlyPayment).formattedAmount),1)])])]),e("div",ur,[e("div",dr,[t[127]||(t[127]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"Cost Breakdown",-1)),e("div",cr,[e("div",mr,[t[123]||(t[123]=e("span",{class:"text-slate-600"},"Order Total",-1)),e("span",yr,l(n(r)(z()).formattedAmount),1)]),e("div",pr,[e("div",fr,[e("span",vr,"Down Payment ("+l(Math.round(D.value.downPayment/z()*100))+"%)",1),e("span",gr,l(n(r)(D.value.downPayment).formattedAmount),1)]),e("div",br,[t[124]||(t[124]=e("span",{class:"text-slate-600"},"Remaining Balance",-1)),e("span",hr,l(n(r)(z()-D.value.downPayment).formattedAmount),1)]),e("div",xr,[e("span",wr,"Interest ("+l(D.value.interestRate)+"% annually)",1),e("span",Cr,l(n(r)(D.value.totalInterest).formattedAmount),1)])]),e("div",_r,[e("div",Nr,[t[125]||(t[125]=e("span",{class:"text-slate-800"},"Total You'll Pay",-1)),e("span",Pr,l(n(r)(D.value.totalPayable).formattedAmount),1)]),e("div",kr,[t[126]||(t[126]=e("span",null,"Extra cost vs. full payment",-1)),e("span",Sr,l(n(r)(D.value.totalPayable-z()).formattedAmount),1)])])])]),e("div",Ar,[t[130]||(t[130]=e("h3",{class:"font-semibold text-slate-800 mb-3"},"How We Calculate Your Monthly Payment",-1)),e("div",Ir,[e("p",null,[t[128]||(t[128]=e("strong",null,"Formula:",-1)),le(" (Remaining Balance + Interest)  "+l(D.value.term)+" months",1)]),t[129]||(t[129]=e("p",null,[e("strong",null,"Calculation:")],-1)),e("ul",Tr,[e("li",null,"Remaining Balance: "+l(n(r)(z()-D.value.downPayment).formattedAmount),1),e("li",null,"Interest over "+l(D.value.term)+" months: "+l(n(r)(D.value.totalInterest).formattedAmount),1),e("li",null,"Total to be paid monthly: "+l(n(r)(z()-D.value.downPayment+D.value.totalInterest).formattedAmount),1),e("li",null,"Monthly Payment: "+l(n(r)(D.value.monthlyPayment).formattedAmount),1)])])]),e("div",Mr,[e("h3",Er,"Why Choose "+l(D.value.term)+" Months?",1),e("div",Dr,[e("div",Fr,[e("div",null,[t[131]||(t[131]=e("p",{class:"font-medium text-green-700 mb-1"}," Pros:",-1)),e("ul",Or,[D.value.term<=6?(i(),d("li",Rr," Lower total interest")):x("",!0),D.value.term<=6?(i(),d("li",$r," Pay off debt faster")):x("",!0),D.value.term>=12?(i(),d("li",jr," Lower monthly payments")):x("",!0),D.value.term>=12?(i(),d("li",Vr," Better cash flow")):x("",!0)])]),e("div",null,[t[132]||(t[132]=e("p",{class:"font-medium text-red-700 mb-1"}," Cons:",-1)),e("ul",Lr,[D.value.term<=6?(i(),d("li",Ur," Higher monthly payments")):x("",!0),D.value.term>=12?(i(),d("li",Br," More total interest")):x("",!0),D.value.term>=12?(i(),d("li",zr," Longer commitment")):x("",!0)])])])])])]),e("div",{class:"mt-6 pt-4 border-t"},[e("button",{onClick:yt,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Got It, Close Details ")])])):x("",!0)])])):x("",!0)]),_:1})])}}}),Qr=et(Yr,[["__scopeId","data-v-5b471624"]]);export{Qr as default};
