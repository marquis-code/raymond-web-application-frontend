import{_ as $t}from"./YWpQlVVc.js";import{u as vt,N as Gt,O as Xe,r as y,g as Se,s as Re,P as ve,Q as Ve,R as Vt,S as ut,U as zt,V as Bt,W as qt,X as Yt,e as bt,c as m,o as u,i as S,l as a,j as We,t as i,E as Qe,f as ye,Y as Ht,J as xt,G as me,h as be,Z as Kt,a as t,b as h,w as _e,n as Jt,m as oe,q as ze,F as Be,k as qe,d as re,B as Ye,x as A,H as z,M as Ee,$ as dt,z as He,_ as Zt}from"./OGZqr3Xg.js";import{u as Wt}from"./Bl7wNVeh.js";import{c as se,u as Xt,S as Qt,C as eo,U as ct,T as mt,L as to,a as Ke}from"./CvGmdLUg.js";import{u as oo,a as so,b as no}from"./DamUEMjs.js";import{u as ao}from"./CnYKx7Zt.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=se("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=se("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=se("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=se("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=se("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=se("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=se("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=se("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=se("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=se("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=se("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fo(){const d=vt(),{socialLogin:I,socialSignup:Y,setAuthCredentials:k,socialAuthLoading:r,socialAuthError:x,logout:c}=Gt(),{createUser:F}=Xe(),K=y(null),R=y(null),E=y(!1),B=y(!1),xe=async()=>{try{E.value=!0;const{$auth:v}=Ve();if(!v){console.error("Firebase Auth is not initialized"),R.value="Firebase Auth is not initialized",B.value=!0,E.value=!1;return}return Vt(v,l=>{K.value=l,B.value=!0,E.value=!1},l=>{console.error("Auth state change error:",l),R.value="Authentication state error",B.value=!0,E.value=!1})}catch(v){console.error("Error initializing auth state:",v),R.value="Failed to initialize authentication",B.value=!0,E.value=!1}};Se(async()=>{await Re(),await xe()});const ie=v=>{if(!v)return{firstName:"",lastName:""};const s=v.split(" "),l=s[0]||"",M=s.slice(1).join(" ");return{firstName:l,lastName:M}},q=()=>{const v="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let s="";for(let l=0;l<12;l++)s+=v.charAt(Math.floor(Math.random()*v.length));return s},ue=async(v,s)=>{try{const{$auth:l}=Ve();if(!l)throw new Error("Firebase Auth is not initialized");E.value=!0,R.value=null,K.value&&await ut(l);const O=(await Yt(l,v)).user,W=await O.getIdToken(),{firstName:J,lastName:ne}=ie(O==null?void 0:O.displayName),P=q(),$={idToken:W,provider:s,email:O.email||"",uid:O.uid,displayName:O.displayName||"",photoURL:O.photoURL||"",firstName:J,lastName:ne,password:P};k($);const G=await I();if(console.log(G,"logon result"),G.success)return await F(G.data),G;const H=await Y();if(console.log(H,"logon result"),H.success)return await F(H.data),H;throw new Error(H.message||"Social authentication failed")}catch(l){console.error("Social auth error:",l),R.value=l.message||"Authentication failed"}finally{E.value=!1}},he=async()=>{const v=new qt;return v.addScope("email"),v.addScope("profile"),v.setCustomParameters({prompt:"consent"}),await ue(v,"google")},Pe=async()=>{const v=new Bt;v.addScope("email"),v.addScope("public_profile"),await ue(v,"facebook")},Ae=async()=>{const v=new zt("apple.com");v.addScope("email"),v.addScope("name"),await ue(v,"apple")},Ie=async()=>{try{const{$auth:v}=Ve();if(!v)throw new Error("Firebase Auth is not initialized");E.value=!0,await c(),await ut(v),d.push("/login")}catch(v){R.value=v.message}finally{E.value=!1}};return{user:ve(K),error:ve(R),loading:ve(E),initialized:ve(B),socialAuthLoading:ve(r),socialAuthError:ve(x),signInWithGoogle:he,signInWithFacebook:Pe,signInWithApple:Ae,logout:Ie}}const go={class:"space-y-3"},vo=["disabled"],bo={key:0},xo={key:1},ho=["disabled"],Co={key:0},wo={key:1},No={key:2,class:"text-red-600 text-sm text-center"},_o=bt({__name:"SocialLoginButtons",props:{authType:{type:String}},emits:["callback"],setup(d,{emit:I}){const{showToast:Y}=Qe(),{signInWithGoogle:k,loading:r,error:x,socialAuthLoading:c,socialAuthError:F}=fo(),K=I,R=async()=>{try{const E=await k();K("callback",E)}catch(E){Y({title:"Error",message:E,toastType:`${E} || Google login failed`,duration:3e3})}};return(E,B)=>(u(),m("div",go,[d.authType==="login"?(u(),m("button",{key:0,onClick:R,disabled:a(r)||a(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[B[0]||(B[0]=We('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!a(r)&&!a(c)?(u(),m("span",bo,"Sign in with Google")):(u(),m("span",xo,"Signing in..."))],8,vo)):S("",!0),d.authType==="signup"?(u(),m("button",{key:1,onClick:R,disabled:a(r)||a(c),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-full shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[B[1]||(B[1]=We('<svg class="w-5 h-5 mr-2" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),!a(r)&&!a(c)?(u(),m("span",Co,"Sign up with Google")):(u(),m("span",wo,"Signing up..."))],8,ho)):S("",!0),a(x)||a(F)?(u(),m("div",No,i(a(x)||a(F)),1)):S("",!0)]))}}),{showToast:pt}=Qe(),Ze={email:y(""),password:y("")},So=()=>{vt();const d=y(!1),I=ye(()=>d.value||!Ze.email.value||!Ze.password.value);return{credential:Ze,login:async k=>{var x;d.value=!0;const r=await Ht.$_login({email:k.email,password:k.password});return console.log(r,"rse hee"),r.status===200||r.status===201?(Xe().createUser(r.data),pt({title:"Success",message:"Login was successfully",toastType:"success",duration:3e3})):pt({title:"Error",message:((x=r==null?void 0:r.data)==null?void 0:x.error)||"Something went wrong",toastType:"error",duration:3e3}),r},loading:d,isFormDisabled:I}};function Po(){xt();const{createOrder:d,loading:I}=oo(),{handlePayment:Y,paymentForm:k,loading:r,generateTxRef:x}=so(),c=y(null),F=y(""),K=y(""),R=y(!1),E=ye(()=>I.value||r.value),B=s=>s.map(l=>{let M=l.productId;return!M&&l.id&&(M=l.id.includes("-")?l.id.split("-")[0]:l.id),{product:M,quantity:l.quantity,price:l.price,size:l.size||"",color:l.color||"",discount:l.discount||0,total:l.price*l.quantity}}),xe=s=>({firstName:s.firstName,lastName:s.lastName,address:s.address,city:s.city,state:s.state,country:s.country,postalCode:s.zipCode||s.postalCode,phone:s.phone,email:s.email}),ie=s=>({isInstallment:!0,numberOfInstallments:parseInt(s.numberOfInstallments),downPayment:parseFloat(s.downPayment),installmentAmount:parseFloat(s.installmentAmount||0),interestRate:parseFloat(s.interestRate||0),totalPayable:parseFloat(s.totalPayable||0),paymentFrequency:s.paymentFrequency,paymentMethod:s.paymentMethod}),q=s=>(s==null?void 0:s.taxRate)||2.5,ue=async s=>{var l,M,O,W,J,ne;try{K.value="",F.value="",R.value=!1,console.log("Processing checkout with data:",s);const P=B(s.items),$=xe(s.deliveryDetails),G=$,H=q(s.country),C={items:P,subtotal:parseFloat(s.subtotal.toFixed(2)),tax:parseFloat(s.tax.toFixed(2)),taxRate:H,shipping:parseFloat(s.shipping.toFixed(2)),discount:0,total:parseFloat(s.total.toFixed(2)),status:"pending",paymentStatus:"pending",paymentType:s.paymentType,shippingAddress:$,billingAddress:G,paymentMethod:s.paymentMethod,paidAmount:0,refundedAmount:0,shippingMethod:s.deliveryMethod,shippingCost:parseFloat(s.shipping.toFixed(2)),shippingCarrier:s.deliveryMethod==="express"?"Express Courier":"Standard Shipping",currency:"USD",source:"web",locale:"en-US",notes:`Delivery Method: ${s.deliveryMethod}, Payment Method: ${s.paymentMethod}${s.paymentType==="installment"?", Payment Type: Installment Plan":""}`,metadata:{country:s.country,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),checkoutVersion:"2.0",paymentType:s.paymentType,deliveryMethod:s.deliveryMethod,cartItemsCount:s.items.length,hasInstallmentItems:s.items.some(_=>_.hasInstallmentOption)}};s.paymentType==="installment"&&s.installmentConfig?(C.installmentInfo=ie(s.installmentConfig),C.paidAmount=parseFloat(s.installmentConfig.downPayment),C.paymentStatus="partially_paid",C.metadata={...C.metadata,installmentDetails:{startDate:s.installmentConfig.startDate,needsFormalAgreement:s.installmentConfig.needsFormalAgreement||!1,productSize:s.installmentConfig.productSize||((l=P[0])==null?void 0:l.size),originalInterestRate:s.installmentConfig.interestRate,paymentFrequency:s.installmentConfig.paymentFrequency,calculatedAt:new Date().toISOString(),downPaymentPercentage:parseFloat(s.installmentConfig.downPayment)/parseFloat(s.total.toFixed(2))*100}},C.notes+=`, Installment Terms: ${C.installmentInfo.numberOfInstallments} payments of $${(M=C.installmentInfo.installmentAmount)==null?void 0:M.toFixed(2)}`):C.installmentInfo={isInstallment:!1};const V=new Date;s.deliveryMethod==="express"?V.setDate(V.getDate()+3):V.setDate(V.getDate()+7),C.estimatedDelivery=V,console.log("Sending order payload to backend:",C);const T=await d(C);if(console.log(T.data._id,"res here"),!T||!((O=T==null?void 0:T.data)!=null&&O._id))return K.value="Failed to create order",{success:!1,error:((W=T==null?void 0:T.data)==null?void 0:W.message)||"Failed to create order"};console.log("Order created successfully:",T),c.value=T;let Z=T.total;s.paymentType==="installment"&&s.installmentConfig&&(Z=parseFloat(s.installmentConfig.downPayment)||s.immediatePayment||0,console.log("Installment payment - charging down payment:",Z));const N=await he(T,Z,s.paymentType);return{success:!0,order:T,paymentAmount:Z,paymentType:s.paymentType,paymentResult:N}}catch(P){console.error("Checkout process failed:",P);const $=((ne=(J=P==null?void 0:P.response)==null?void 0:J.data)==null?void 0:ne.message)||(P==null?void 0:P.message)||"Checkout process failed";return K.value=$,{success:!1,error:$}}},he=async(s,l,M)=>{var O,W,J,ne,P,$,G,H,C,V,T,Z,N,_,Q;console.log(s,"order object before payment processing");try{console.log("Processing payment for order:",s.data._id,"Amount:",l),k.value.amount=l;const j=x();k.value.tx_ref=j,k.value.meta={orderId:(O=s==null?void 0:s.data)==null?void 0:O._id,orderNumber:(W=s==null?void 0:s.data)==null?void 0:W.orderNumber,paymentType:M,...M==="installment"&&{isDownPayment:!0,installmentPlan:(J=s==null?void 0:s.data)==null?void 0:J.installmentInfo,remainingAmount:((ne=s==null?void 0:s.data)==null?void 0:ne.total)-l}},k.value.customer={email:(($=(P=s==null?void 0:s.data)==null?void 0:P.shippingAddress)==null?void 0:$.email)||"",phone_number:((H=(G=s==null?void 0:s.data)==null?void 0:G.shippingAddress)==null?void 0:H.phone)||"",name:`${((V=(C=s==null?void 0:s.data)==null?void 0:C.shippingAddress)==null?void 0:V.firstName)||""} ${((Z=(T=s==null?void 0:s.data)==null?void 0:T.shippingAddress)==null?void 0:Z.lastName)||""}`.trim()},k.value.title=`Order ${(N=s==null?void 0:s.data)==null?void 0:N.orderNumber}`,k.value.description=M==="installment"?`Down payment for installment order ${(_=s==null?void 0:s.data)==null?void 0:_.orderNumber}`:`Payment for order ${(Q=s==null?void 0:s.data)==null?void 0:Q.orderNumber}`,console.log("Payment form configured:",k.value);const f=await Y(s==null?void 0:s.data);return console.log(f,"Final payment result"),{success:!0,paymentReference:j,amount:l,paymentResult:f}}catch(j){return console.error("Payment processing failed:",j),F.value=j.message||"Payment processing failed",{success:!1,error:j.message||"Payment processing failed"}}};return{processCheckout:ue,verifyPayment:async(s,l)=>{var M,O,W;try{return!s&&!l?{success:!1,error:"No payment reference provided"}:(console.log("Verifying payment:",{flw_ref:s,tx_ref:l}),R.value=!0,{success:!0,flw_ref:s,tx_ref:l,orderId:((M=c.value)==null?void 0:M._id)||"",orderNumber:((O=c.value)==null?void 0:O.orderNumber)||"",paymentType:((W=c.value)==null?void 0:W.paymentType)||"full"})}catch(J){return console.error("Payment verification failed:",J),{success:!1,error:J.message||"Payment verification failed"}}},createInstallmentPlan:async(s,l)=>{try{return console.log("Creating installment plan for order:",s,l),{success:!0,installmentPlanId:`plan-${s}-${Date.now()}`,message:"Installment plan created successfully"}}catch(M){return console.error("Failed to create installment plan:",M),{success:!1,error:M.message||"Failed to create installment plan"}}},resetCheckout:()=>{c.value=null,F.value="",K.value="",R.value=!1},orderResponse:c,getPaymentSummary:()=>{var l;if(!c.value)return null;const s=c.value;return{orderNumber:s.orderNumber,total:s.total,paymentType:s.paymentType,installmentInfo:s.installmentInfo,items:s.items,paidAmount:s.paymentType==="installment"?((l=s.installmentInfo)==null?void 0:l.downPayment)||0:s.total}},isLoading:E,orderLoading:I,paymentLoading:r,orderCreationError:K,paymentError:F,paymentComplete:R,paymentForm:k}}const pe={$_create_shipping_config(d){return me.post("/shipping-tax/shipping",d)},$_create_tax_config(d){return me.post("/shipping-tax/tax",d)},$_get_all_shipping_configs(){return me.get("/shipping-tax/shipping")},$_get_all_tax_configs(){return me.get("/shipping-tax/tax")},$_update_shipping_config(d,I){return me.patch(`/shipping-tax/shipping/${d}`,I)},$_update_tax_config(d,I){return me.patch(`/shipping-tax/tax/${d}`,I)},$_delete_shipping_config(d){return me.delete(`/shipping-tax/shipping/${d}`)},$_delete_tax_config(d){return me.delete(`/shipping-tax/tax/${d}`)}},Ao=()=>{const d=y(null),I=async()=>{try{return(await pe.$_get_all_tax_configs()).data}catch(x){throw d.value=x.message||"Failed to fetch tax configs",d.value}},Y=async x=>{try{return(await pe.$_create_tax_config({...x})).data}catch(c){throw d.value=c.message||"Failed to create tax config",d.value}},k=async(x,c)=>{try{return(await pe.$_update_tax_config(x,{countryCode:c.countryCode||"",countryName:c.countryName||"",vatRate:c.vatRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(F){throw d.value=F.message||"Failed to update tax config",d.value}},r=async x=>{try{return(await pe.$_delete_tax_config(x)).data}catch(c){throw d.value=c.message||"Failed to delete tax config",d.value}};return Se(()=>{I()}),{error:d,fetchTaxConfigs:I,createTaxConfig:Y,updateTaxConfig:k,deleteTaxConfig:r}},Io=()=>{const d=y(null),I=async()=>{try{const x=await pe.$_get_all_shipping_configs();return console.log(x,"fetching00000000000000000"),x.data}catch(x){throw d.value=x.message||"Failed to fetch shipping configs",d.value}},Y=async x=>{try{return(await pe.$_create_shipping_config({...x})).data}catch(c){throw d.value=c.message||"Failed to create shipping config",d.value}},k=async(x,c)=>{try{return(await pe.$_update_shipping_config(x,{countryCode:c.countryCode||"",countryName:c.countryName||"",shippingRate:c.shippingRate||0,isActive:c.isActive!==void 0?c.isActive:!0})).data}catch(F){throw d.value=F.message||"Failed to update shipping config",d.value}},r=async x=>{try{const c=await pe.$_delete_shipping_config(x);return console.log(c,"config here"),c.data}catch(c){throw d.value=c.message||"Failed to delete shipping config",d.value}};return Se(()=>{I()}),{error:d,fetchShippingConfigs:I,createShippingConfig:Y,updateShippingConfig:k,deleteShippingConfig:r}},To={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100"},ko={key:0,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},Mo={class:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200 text-center"},Eo={class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full flex items-center justify-center"},Fo={key:1,class:"container mx-auto px-4 py-16 min-h-screen flex items-center justify-center"},Ro={class:"max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border border-slate-200"},Oo={class:"text-center mb-8"},Do={class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-full flex items-center justify-center"},Lo={class:"bg-slate-50 rounded-xl p-6 mb-8"},jo={class:"flex justify-between items-center mb-3"},Uo={class:"font-bold text-slate-800"},$o={class:"flex justify-between items-center mb-3"},Go={class:"font-bold text-slate-800"},Vo={key:0,class:"flex justify-between items-center mb-3"},zo={class:"font-bold text-emerald-600"},Bo={class:"flex justify-between items-center"},qo={class:"text-slate-600 font-medium"},Yo={class:"font-bold text-xl text-slate-800"},Ho={key:2,class:"container mx-auto px-4 py-8 lg:py-12"},Ko={class:"max-w-2xl mx-auto mb-12"},Jo={class:"flex items-center justify-between relative"},Zo={class:"absolute top-4 left-0 right-0 h-0.5 bg-slate-200"},Wo={class:"relative flex flex-col items-center"},Xo={class:"relative flex flex-col items-center"},Qo={class:"relative flex flex-col items-center"},es={class:"lg:grid space-y-6 lg:space-y-0 grid-cols-5 gap-8 lg:max-w-7xl mx-auto"},ts={class:"lg:col-span-3"},os={key:0,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},ss={class:"flex items-center mb-6"},ns={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},as={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ls={class:"space-y-2"},rs={class:"space-y-2"},is={class:"space-y-2"},us={class:"space-y-2"},ds={class:"space-y-2"},cs={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ms={class:"space-y-2"},ys={class:"space-y-2"},ps={class:"space-y-2"},fs={class:"space-y-2"},gs=["value"],vs={type:"submit",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},bs={key:1,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},xs={class:"flex items-center mb-6"},hs={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Cs={class:"space-y-4 mb-8"},ws={class:"flex items-center"},Ns={key:0,class:"w-3 h-3 rounded-full bg-white"},_s={class:"flex-1"},Ss={class:"flex justify-between items-center mb-1"},Ps={class:"font-bold text-slate-800"},As={class:"flex gap-2"},Is={key:2,class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-8"},Ts={class:"flex items-center mb-6"},ks={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Ms={class:"mb-8"},Es={class:"space-y-4"},Fs={class:"flex items-center"},Rs={key:0,class:"w-3 h-3 rounded-full bg-white"},Os={class:"flex-1"},Ds={class:"flex justify-between items-center mb-1"},Ls={class:"font-bold text-emerald-600"},js={class:"w-10 h-10 bg-emerald-100 rounded-md flex items-center justify-center ml-4"},Us={class:"flex items-center"},$s={key:0,class:"w-3 h-3 rounded-full bg-white"},Gs={class:"flex-1"},Vs={class:"flex justify-between items-center mb-1"},zs={class:"font-bold text-blue-600"},Bs={class:"w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center ml-4"},qs={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Ys={class:"flex items-center"},Hs={class:"mt-2 text-xs text-yellow-700"},Ks={key:0,class:"mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200"},Js={class:"text-lg font-semibold text-slate-800 mb-6 flex items-center"},Zs={class:"space-y-6"},Ws={class:"bg-white p-4 rounded-lg border border-blue-200"},Xs={class:"flex justify-between items-center mb-2"},Qs={class:"text-lg font-bold text-slate-800"},en={class:"space-y-3"},tn=["value"],on={class:"space-y-3"},sn={class:"space-y-3"},nn={class:"block text-sm font-semibold text-slate-700"},an={class:"relative"},ln=["min","max"],rn={class:"flex justify-between text-xs text-slate-500"},un={class:"space-y-3"},dn=["min"],cn={class:"space-y-3"},mn={class:"space-y-3"},yn={class:"space-y-2"},pn={class:"flex items-center"},fn={class:"flex items-center"},gn={key:0,class:"bg-white p-6 rounded-lg border border-blue-200"},vn={class:"space-y-3"},bn={class:"flex justify-between"},xn={class:"font-semibold"},hn={class:"flex justify-between"},Cn={class:"font-semibold"},wn={class:"flex justify-between"},Nn={class:"font-semibold"},_n={class:"flex justify-between"},Sn={class:"font-semibold"},Pn={class:"flex justify-between"},An={class:"font-semibold"},In={class:"border-t pt-3"},Tn={class:"flex justify-between"},kn={class:"font-bold text-lg"},Mn={class:"mb-8"},En={class:"space-y-4"},Fn={class:"flex items-center"},Rn={key:0,class:"w-3 h-3 rounded-full bg-white"},On={class:"w-10 h-10 bg-slate-100 rounded-md flex items-center justify-center"},Dn={class:"lg:flex space-y-6 lg:space-y-0 gap-4"},Ln=["disabled"],jn={class:"lg:col-span-2"},Un={class:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4 lg:p-6 sticky top-6"},$n={class:"flex items-center mb-6"},Gn={class:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center mr-4"},Vn={key:0,class:"space-y-4 mb-6 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},zn={class:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0"},Bn=["src","alt"],qn={class:"flex-1 min-w-0"},Yn={class:"font-semibold text-slate-800 text-sm truncate"},Hn={class:"text-sm text-slate-600"},Kn={class:"flex items-center gap-2 mt-1"},Jn={key:0,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},Zn={key:1,class:"text-xs block px-2 py-1 bg-slate-100 rounded-full text-slate-600"},Wn={key:2,class:"text-xs px-2 py-1 block bg-emerald-100 text-emerald-700 rounded-full"},Xn={class:"flex flex-wrap items-center gap-3 mt-2"},Qn={class:"flex items-center gap-2"},ea=["onClick","disabled"],ta={class:"text-sm font-semibold text-center min-w-[2rem]"},oa=["onClick"],sa=["onClick"],na={class:"text-right"},aa={class:"font-semibold text-slate-800"},la={class:"border-t border-slate-200 pt-4 space-y-3"},ra={class:"flex justify-between text-sm"},ia={class:"font-semibold text-slate-800"},ua={class:"flex justify-between text-sm"},da={class:"font-semibold text-slate-800"},ca={class:"flex justify-between text-sm"},ma={class:"text-slate-600"},ya={class:"font-semibold text-slate-800"},pa={key:0,class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},fa={class:"flex justify-between text-xs text-blue-700 mb-1"},ga={class:"flex justify-between text-xs text-blue-700 mb-1"},va={class:"flex justify-between text-xs text-blue-700"},ba={key:1,class:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg"},xa={key:0},ha={class:"flex justify-between font-bold text-lg pt-3 border-t border-slate-200"},Ca={class:"text-slate-800"},wa={class:"text-slate-800"},Na={key:2,class:"bg-emerald-50 p-3 rounded-lg border border-emerald-200"},_a={class:"flex justify-between font-semibold text-emerald-800"},Sa={class:"mt-6 pt-4 border-t border-slate-200"},Pa={class:"flex items-center text-sm text-slate-600 mb-3"},Aa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm"},Ia={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative"},Ta={key:0},ka={class:"space-y-3"},Ma={key:1},Ea={class:"mb-4"},Fa={class:"space-y-2"},Ra={class:"space-y-2"},Oa=["disabled"],Da={class:"text-center"},La={key:2},ja={class:"mb-4"},Ua={class:"grid grid-cols-2 gap-4"},$a={class:"space-y-2"},Ga={class:"space-y-2"},Va={class:"space-y-2"},za={class:"space-y-2"},Ba={class:"space-y-2"},qa=["disabled"],Ya={class:"text-center"},Ha=2.5,ft=1,gt=3,Ka=bt({__name:"checkout",setup(d){const{userCurrency:I,exchangeRates:Y,initializeUserCurrency:k,convertFromUSD:r}=ao(),x=y({});y("USD");const c=y("NGN");y(null),ye(()=>Object.keys(Y.value).sort()),Se(async()=>{await k(),F()}),be([I,Y],()=>{F()});const F=()=>{I.value&&Object.keys(Y.value).length>0&&(x.value=r(100).formattedAmount)};be(I,o=>{c.value=o});const K=xt(),R=Kt(),{processCheckout:E,isLoading:B,paymentComplete:xe}=Po(),ie=y(!1),{showToast:q}=Qe(),ue=o=>{o.success&&(ie.value=!1)},{removeFromCart:he,updateCartItemQuantity:Pe}=Wt(),{signup:Ae}=Xt(),{login:Ie}=So(),{isLoggedIn:v}=Xe(),{setItem:s,getItem:l,removeItem:M}=no(),{fetchShippingConfigs:O}=Io(),{fetchTaxConfigs:W}=Ao(),J=y([]),ne=y([]),P=y(null),$=y(0),G=y(0),H=y(!1),C=y(1),V=y("check"),T=y(!1),Z=y(!1),N=y([]),_=y({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:""}),Q=y("standard"),j=y("flutterwave"),f=y("full"),Oe=y(""),b=y({numberOfInstallments:"",paymentFrequency:"",downPayment:0,startDate:"",paymentMethod:"",needsFormalAgreement:!1,interestRate:0,totalAmount:0}),D=y({downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0}),ee=y(null),te=y({firstName:"",lastName:"",email:"",password:"",phone:"",role:"customer"}),Ce=y({email:"",password:""}),L={CART:"art-gallery-cart",CHECKOUT_STEP:"checkout-step",DELIVERY_DETAILS:"checkout-delivery-details",DELIVERY_METHOD:"checkout-delivery-method",PAYMENT_METHOD:"checkout-payment-method",PAYMENT_TYPE:"checkout-payment-type",INSTALLMENT_CONFIG:"checkout-installment-config",SELECTED_COUNTRY:"checkout-selected-country",SHIPPING_CONFIG:"checkout-shipping-config",TAX_CONFIG:"checkout-tax-config",GUEST_MODE:"checkout-guest-mode"},ht=()=>{const o=R.query.paymentType;o&&["full","installment"].includes(o)?(f.value=o,console.log("Payment type initialized from query params:",f.value)):(f.value="full",console.log("Payment type defaulted to full payment"))},we=ye(()=>{console.log("Checking installment options for cart items:",N.value);const o=N.value.some(e=>{var w;const p=e.hasInstallmentOption===!0&&e.installmentConfig&&e.installmentConfig.enabled===!0;return console.log(`Item ${e.id}: hasInstallmentOption=${e.hasInstallmentOption}, config enabled=${(w=e.installmentConfig)==null?void 0:w.enabled}, result=${p}`),p});return console.log("Overall hasInstallmentOptions:",o),o}),Ct=ye(()=>N.value.filter(o=>o.hasInstallmentOption===!0&&o.installmentConfig&&o.installmentConfig.enabled===!0)),De=ye(()=>{const o=new Set;N.value.forEach(p=>{var w;if(p.hasInstallmentOption===!0&&((w=p.installmentConfig)==null?void 0:w.enabled)===!0){const n=p.installmentConfig;n.availableTerms&&Array.isArray(n.availableTerms)&&n.availableTerms.forEach(U=>o.add(U))}});const e=Array.from(o).sort((p,w)=>p-w);return console.log("Available installment terms:",e),e}),wt=()=>{if(!we.value||De.value.length===0)return 0;const o=X(),e=Math.max(...De.value),p=N.value.find(le=>le.hasInstallmentOption===!0&&le.installmentConfig&&le.installmentConfig.enabled===!0);if(!(p!=null&&p.installmentConfig))return o/e;const w=p.installmentConfig,n=w.minimumDownPaymentPercentage||20,U=o*n/100,g=o-U,ae=(w.interestRate||0)/12/100;if(ae>0){const le=Math.pow(1+ae,e);return g*ae*le/(le-1)}else return g/e},Nt=o=>{if(!ee.value){const g=X(),ae=g*.2;return(g-ae)/o}const e=X(),p=ee.value.minimumDownPaymentPercentage||20,w=e*p/100,n=e-w,U=(ee.value.interestRate||0)/12/100;if(U>0){const g=Math.pow(1+U,o);return n*U*g/(g-1)}else return n/o},Le=()=>{const o=N.value.find(e=>e.hasInstallmentOption===!0&&e.installmentConfig&&e.installmentConfig.enabled===!0);return console.log("Current installment config from item:",o==null?void 0:o.installmentConfig),(o==null?void 0:o.installmentConfig)||null};be(N,()=>{ee.value=Le(),console.log("Updated currentInstallmentConfig:",ee.value)},{deep:!0});const et=()=>{var o;return((o=ee.value)==null?void 0:o.minimumDownPaymentPercentage)||20},tt=()=>{var o;return((o=ee.value)==null?void 0:o.maximumDownPaymentPercentage)||80},fe=()=>X()*et()/100,Te=()=>X()*tt()/100,ot=()=>{var o;return((o=ee.value)==null?void 0:o.interestRate)||0},_t=()=>new Date().toISOString().split("T")[0],ge=()=>{if(console.log("Calculating installment details..."),console.log("Config:",b.value),!b.value.numberOfInstallments||!b.value.downPayment){console.log("Missing required fields for calculation"),D.value={downPayment:0,installmentAmount:0,totalInterest:0,totalPayable:0,remainingAmount:0};return}const o=X(),e=Number(b.value.downPayment),p=o-e,w=parseInt(b.value.numberOfInstallments),n=ot(),U=n/12/100;console.log("Calculation inputs:",{totalAmount:o,downPayment:e,remainingAmount:p,numberOfInstallments:w,annualInterestRate:n,monthlyInterestRate:U});let g=0,ae=0;if(U>0){const it=Math.pow(1+U,w);g=p*U*it/(it-1),ae=g*w-p}else g=p/w,ae=0;const le=e+g*w;console.log("Calculation results:",{installmentAmount:g,totalInterest:ae,totalPayable:le}),D.value={downPayment:e,installmentAmount:g,totalInterest:ae,totalPayable:le,remainingAmount:p},b.value.totalAmount=o,b.value.interestRate=n},je=ye(()=>{if(console.log("Checking payment config validity..."),console.log("Payment type:",f.value),console.log("Payment method:",j.value),f.value==="full"){const o=j.value!=="";return console.log("Full payment valid:",o),o}else if(f.value==="installment"){const o=b.value,e=j.value!==""&&o.numberOfInstallments!==""&&o.paymentFrequency!==""&&o.downPayment>0&&o.startDate!==""&&o.paymentMethod!==""&&o.downPayment>=fe()&&o.downPayment<=Te()&&typeof o.needsFormalAgreement=="boolean";return console.log("Installment payment validation:",{paymentMethod:j.value!=="",numberOfInstallments:o.numberOfInstallments!=="",paymentFrequency:o.paymentFrequency!=="",downPayment:o.downPayment>0,startDate:o.startDate!=="",installmentPaymentMethod:o.paymentMethod!=="",downPaymentRange:o.downPayment>=fe()&&o.downPayment<=Te(),formalAgreement:typeof o.needsFormalAgreement=="boolean",overall:e}),e}return!1}),St=()=>B.value?"Processing...":f.value==="installment"?`Pay Down Payment - ${r(D.value.downPayment).formattedAmount}`:`Complete Order - ${r(X()).formattedAmount}`,Ue=o=>{if(f.value=o,o==="installment"&&(ee.value=Le(),ee.value)){b.value.downPayment=fe();const e=new Date;e.setDate(e.getDate()+30),b.value.startDate=e.toISOString().split("T")[0],Re(()=>{ge()})}de()},Pt=()=>{try{if(localStorage){const o=localStorage.getItem(L.CART);if(o){const e=JSON.parse(o);if(Array.isArray(e))return N.value=e,console.log("Loaded cart from storage:",e),e}}}catch(o){console.error("Failed to load cart from localStorage:",o)}return[]},$e=()=>{try{localStorage&&localStorage.setItem(L.CART,JSON.stringify(N.value))}catch(o){console.error("Failed to save cart to localStorage:",o)}},de=()=>{try{localStorage&&(s(L.CHECKOUT_STEP,C.value.toString()),s(L.DELIVERY_METHOD,Q.value),s(L.PAYMENT_METHOD,j.value),s(L.PAYMENT_TYPE,f.value),s(L.INSTALLMENT_CONFIG,JSON.stringify(b.value)),s(L.DELIVERY_DETAILS,JSON.stringify(_.value)),P.value&&s(L.SELECTED_COUNTRY,JSON.stringify({countryInfo:P.value,shippingFee:$.value,taxRate:G.value})))}catch(o){console.error("Failed to persist checkout data:",o)}},ce=()=>{de()},At=()=>{try{if(localStorage){const o=l(L.CHECKOUT_STEP);if(o&&!isNaN(Number(o))){const g=Number(o);g>=ft&&g<=gt&&(C.value=g)}const e=l(L.DELIVERY_METHOD);e&&["standard","express","pickup"].includes(e)&&(Q.value=e);const p=l(L.PAYMENT_METHOD);if(p&&["flutterwave","interswitch","manual"].includes(p)&&(j.value=p),f.value==="full"){const g=l(L.PAYMENT_TYPE);g&&["full","installment"].includes(g)&&(f.value=g)}const w=l(L.INSTALLMENT_CONFIG);if(w)try{const g=JSON.parse(w);Object.assign(b.value,g)}catch(g){console.error("Failed to parse saved installment config",g)}const n=l(L.DELIVERY_DETAILS);if(n)try{const g=JSON.parse(n);Object.assign(_.value,g)}catch(g){console.error("Failed to parse saved delivery details",g)}const U=l(L.SELECTED_COUNTRY);if(U)try{const g=JSON.parse(U);P.value=g.countryInfo,$.value=g.shippingFee||0,G.value=g.taxRate||0}catch(g){console.error("Failed to parse saved country data",g)}}}catch(o){console.error("Failed to load persisted checkout data:",o)}},It=()=>{try{localStorage&&Object.values(L).forEach(o=>{M(o)})}catch(o){console.error("Failed to clear persisted checkout data:",o)}},st=y([{countryCode:"NG",countryName:"Nigeria"},{countryCode:"US",countryName:"United States"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"CA",countryName:"Canada"},{countryCode:"AU",countryName:"Australia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"FR",countryName:"France"},{countryCode:"IT",countryName:"Italy"},{countryCode:"ES",countryName:"Spain"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"AT",countryName:"Austria"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"NO",countryName:"Norway"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"FI",countryName:"Finland"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"GR",countryName:"Greece"},{countryCode:"PL",countryName:"Poland"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"RO",countryName:"Romania"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"MT",countryName:"Malta"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"JP",countryName:"Japan"},{countryCode:"KR",countryName:"South Korea"},{countryCode:"CN",countryName:"China"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"IN",countryName:"India"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"IR",countryName:"Iran"},{countryCode:"IQ",countryName:"Iraq"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"OM",countryName:"Oman"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"SY",countryName:"Syria"},{countryCode:"IL",countryName:"Israel"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"RU",countryName:"Russia"},{countryCode:"BY",countryName:"Belarus"},{countryCode:"UA",countryName:"Ukraine"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"PA",countryName:"Panama"},{countryCode:"CU",countryName:"Cuba"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"VE",countryName:"Venezuela"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"LY",countryName:"Libya"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"SZ",countryName:"Eswatini"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"ST",countryName:"São Tomé and Príncipe"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"CG",countryName:"Republic of the Congo"},{countryCode:"CD",countryName:"Democratic Republic of the Congo"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"TD",countryName:"Chad"},{countryCode:"NE",countryName:"Niger"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"ML",countryName:"Mali"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"TG",countryName:"Togo"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"AO",countryName:"Angola"}]),ke=ye(()=>N.value.reduce((o,e)=>o+e.price*e.quantity,0)),Ne=()=>$.value*(Q.value==="express"?Ha:1),Ge=()=>{const o=ke.value,e=Ne();return(o+e)*(G.value/100)},X=()=>{const o=ke.value,e=Ne(),p=Ge();return o+e+p},Tt=async()=>{if(!H.value){H.value=!0;try{const[o,e]=await Promise.all([O(),W()]);o&&(J.value=o),e&&(ne.value=e)}catch(o){console.error("Failed to load shipping and tax configs:",o),q({title:"Configuration Error",message:"Failed to load shipping and tax information. Using default rates.",toastType:"warning",duration:5e3})}finally{H.value=!1}}},kt=()=>{const o=_.value.country,e=st.value.find(p=>p.countryCode===o);if(e){P.value=e;const p=J.value.find(n=>n.countryCode===o&&n.isActive);console.log(p,"selected shipping config"),p?$.value=p.shippingRate:$.value=o==="NG"?0:25;const w=ne.value.find(n=>n.countryCode===o&&n.isActive);if(w)G.value=w.vatRate;else{const n={NG:7.5,US:8.5,GB:20,CA:13,AU:10,DE:19,FR:20};G.value=n[o]||0}de()}},Mt=o=>{Q.value=o,de()},Et=o=>{j.value=o,de()},nt=()=>{C.value<gt&&(C.value++,de())},at=()=>{C.value>ft&&(C.value--,de())},lt=(o,e)=>{const p=N.value.findIndex(w=>w.id===o);p!==-1&&e>0&&(N.value[p].quantity=e,$e(),Pe(o,e))},Ft=o=>{N.value=N.value.filter(e=>e.id!==o),$e(),he(o),q({title:"Item Removed",message:"Item has been removed from your cart",toastType:"info",duration:3e3})},Me=()=>{ie.value=!1,V.value="check"},Rt=()=>{s(L.GUEST_MODE,"true"),Me()},Ot=async()=>{T.value=!0;try{const o=await Ae(te.value);o.success?(q({title:"Account Created",message:"Your account has been created successfully!",toastType:"success",duration:5e3}),Me()):q({title:"Signup Failed",message:o.message||"Failed to create account",toastType:"error",duration:5e3})}catch(o){console.error("Signup error:",o),q({title:"Signup Error",message:"An error occurred during signup",toastType:"error",duration:5e3})}finally{T.value=!1}},Dt=async()=>{Z.value=!0;try{const o=await Ie(Ce.value);o.status===200||o.status===201?(q({title:"Welcome Back",message:"You have been signed in successfully!",toastType:"success",duration:5e3}),Me()):q({title:"Sign In Failed",message:o.message||"Invalid credentials",toastType:"error",duration:5e3})}catch(o){console.error("Signin error:",o),q({title:"Sign In Error",message:"An error occurred during sign in",toastType:"error",duration:5e3})}finally{Z.value=!1}},Lt=async()=>{if(console.log("Processing payment..."),console.log("Payment type:",f.value),console.log("Payment config valid:",je.value),!je.value){q({title:"Invalid Configuration",message:"Please complete all required fields before proceeding",toastType:"error",duration:5e3});return}try{const o={items:N.value,deliveryDetails:_.value,deliveryMethod:Q.value,paymentMethod:j.value,paymentType:f.value,subtotal:ke.value,shipping:Ne(),tax:Ge(),total:X(),country:P.value,installmentConfig:f.value==="installment"?{...b.value,summary:D.value}:null};console.log("Order data prepared:",o);const e=await E(o);if(console.log("Checkout result:",e),e.success)Oe.value=e.orderId||rt(),N.value=[],$e(),It(),q({title:"Order Successful",message:`Your order #${Oe.value} has been placed successfully!`,toastType:"success",duration:5e3});else throw console.log(e,"result message here"),new Error(e.error||"Payment processing failed")}catch(o){console.error("Payment processing error:",o),q({title:"Payment Failed",message:o.message||"An error occurred while processing your payment",toastType:"error",duration:5e3})}},rt=()=>{const o=Date.now().toString().slice(-6),e=Math.random().toString(36).substring(2,5).toUpperCase();return`ORD${o}${e}`},jt=o=>{const e=o.target;e.src="/placeholder.svg?height=64&width=64"},Ut=()=>{const o=l?l(L.GUEST_MODE)==="true":!1,e=localStorage?localStorage.getItem("token"):null;!v.value&&!o&&!e&&(ie.value=!0)};return be(()=>R.query,o=>{if(o.paymentType&&["full","installment"].includes(o.paymentType)){const e=o.paymentType;f.value!==e&&(f.value=e,Ue(e))}},{immediate:!0}),be(f,o=>{const e={...R.query};o!==e.paymentType&&K.push({query:{...e,paymentType:o}})},{immediate:!1}),be(()=>b.value,()=>{f.value==="installment"&&ge(),de()},{deep:!0}),Se(async()=>{if(console.log("Checkout page mounted"),Re(()=>{Ut()}),ht(),Pt(),At(),await Tt(),ee.value=Le(),f.value==="installment"&&we.value){b.value.downPayment=fe();const o=new Date;o.setDate(o.getDate()+30),b.value.startDate=o.toISOString().split("T")[0],Re(()=>{ge()})}console.log("Checkout initialization complete"),console.log("Cart items:",N.value),console.log("Has installment options:",we.value),console.log("Selected payment type:",f.value)}),(o,e)=>{const p=$t,w=_o;return u(),m("div",To,[e[115]||(e[115]=t("div",{class:"fixed inset-0 opacity-5 pointer-events-none"},[t("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),!N.value||N.value.length===0?(u(),m("div",ko,[t("div",Mo,[t("div",Eo,[h(a(Qt),{class:"w-12 h-12 text-slate-400"})]),e[32]||(e[32]=t("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"Your cart is empty",-1)),e[33]||(e[33]=t("p",{class:"text-slate-600 mb-8"},"Add some amazing products to your cart to continue with checkout.",-1)),h(p,{to:"/artworks",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"},{default:_e(()=>[h(a(Je),{class:"w-4 h-4 mr-2"}),e[31]||(e[31]=re(" Browse Products "))]),_:1,__:[31]})])])):a(xe)?(u(),m("div",Fo,[t("div",Ro,[t("div",Oo,[t("div",Do,[h(a(eo),{class:"w-10 h-10 text-emerald-600"})]),e[34]||(e[34]=t("h2",{class:"text-3xl font-bold text-slate-800 mb-4"},"Order Confirmed!",-1)),e[35]||(e[35]=t("p",{class:"text-slate-600 mb-2"},"Thank you for your purchase",-1)),e[36]||(e[36]=t("p",{class:"text-slate-500 text-sm"},"We've sent a confirmation email with your order details",-1))]),t("div",Lo,[t("div",jo,[e[37]||(e[37]=t("span",{class:"text-slate-600 font-medium"},"Order Number",-1)),t("span",Uo,"#"+i(Oe.value||rt()),1)]),t("div",$o,[e[38]||(e[38]=t("span",{class:"text-slate-600 font-medium"},"Payment Type",-1)),t("span",Go,i(f.value==="installment"?"Installment Plan":"Full Payment"),1)]),f.value==="installment"?(u(),m("div",Vo,[e[39]||(e[39]=t("span",{class:"text-slate-600 font-medium"},"Down Payment",-1)),t("span",zo,i(a(r)(D.value.downPayment).formattedAmount),1)])):S("",!0),t("div",Bo,[t("span",qo,i(f.value==="installment"?"Total Order Value":"Total Amount"),1),t("span",Yo,i(a(r)(X()).formattedAmount),1)])]),h(p,{to:"/",class:"w-full py-4 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},{default:_e(()=>e[40]||(e[40]=[re(" Continue Shopping ")])),_:1,__:[40]})])])):(u(),m("div",Ho,[e[102]||(e[102]=t("div",{class:"text-center mt-20 mb-12"},[t("h1",{class:"text-xl lg:text-3xl font-bold text-slate-800 mb-4"},"Secure Checkout"),t("p",{class:"text-slate-600 max-w-2xl mx-auto"},"Complete your purchase securely. Your information is protected with industry-standard encryption.")],-1)),t("div",Ko,[t("div",Jo,[t("div",Zo,[t("div",{class:"h-full bg-gradient-to-r from-slate-800 to-slate-900 transition-all duration-500 ease-out",style:Jt({width:`${(C.value-1)/2*100}%`})},null,4)]),t("div",Wo,[t("div",{class:oe(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",C.value>=1?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[h(a(ct),{class:"w-4 h-4"})],2),e[41]||(e[41]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Details",-1))]),t("div",Xo,[t("div",{class:oe(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",C.value>=2?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[h(a(mt),{class:"w-4 h-4"})],2),e[42]||(e[42]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Shipping",-1))]),t("div",Qo,[t("div",{class:oe(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 z-10",C.value>=3?"bg-slate-800 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-400"])},[h(a(Fe),{class:"w-4 h-4"})],2),e[43]||(e[43]=t("span",{class:"text-xs font-medium mt-2 text-slate-600"},"Payment",-1))])])]),t("div",es,[t("div",ts,[h(ze,{name:"slide-fade",mode:"out-in"},{default:_e(()=>[C.value===1?(u(),m("div",os,[t("div",ss,[t("div",ns,[h(a(ct),{class:"w-5 h-5 text-slate-600"})]),e[44]||(e[44]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Customer Details",-1))]),t("form",{onSubmit:Ye(nt,["prevent"]),class:"space-y-6"},[t("div",as,[t("div",ls,[e[45]||(e[45]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),A(t("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=n=>_.value.firstName=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your first name",onInput:ce},null,544),[[z,_.value.firstName]])]),t("div",rs,[e[46]||(e[46]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),A(t("input",{id:"lastName","onUpdate:modelValue":e[1]||(e[1]=n=>_.value.lastName=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your last name",onInput:ce},null,544),[[z,_.value.lastName]])])]),t("div",is,[e[47]||(e[47]=t("label",{for:"email",class:"block text-sm font-semibold text-slate-700"},"Email Address",-1)),A(t("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=n=>_.value.email=n),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",onInput:ce},null,544),[[z,_.value.email]])]),t("div",us,[e[48]||(e[48]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone Number",-1)),A(t("input",{id:"phone","onUpdate:modelValue":e[3]||(e[3]=n=>_.value.phone=n),type:"tel",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your phone number",onInput:ce},null,544),[[z,_.value.phone]])]),t("div",ds,[e[49]||(e[49]=t("label",{for:"address",class:"block text-sm font-semibold text-slate-700"},"Street Address",-1)),A(t("input",{id:"address","onUpdate:modelValue":e[4]||(e[4]=n=>_.value.address=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your street address",onInput:ce},null,544),[[z,_.value.address]])]),t("div",cs,[t("div",ms,[e[50]||(e[50]=t("label",{for:"city",class:"block text-sm font-semibold text-slate-700"},"City",-1)),A(t("input",{id:"city","onUpdate:modelValue":e[5]||(e[5]=n=>_.value.city=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"City",onInput:ce},null,544),[[z,_.value.city]])]),t("div",ys,[e[51]||(e[51]=t("label",{for:"state",class:"block text-sm font-semibold text-slate-700"},"State",-1)),A(t("input",{id:"state","onUpdate:modelValue":e[6]||(e[6]=n=>_.value.state=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"State",onInput:ce},null,544),[[z,_.value.state]])]),t("div",ps,[e[52]||(e[52]=t("label",{for:"zipCode",class:"block text-sm font-semibold text-slate-700"},"ZIP Code",-1)),A(t("input",{id:"zipCode","onUpdate:modelValue":e[7]||(e[7]=n=>_.value.zipCode=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"ZIP",onInput:ce},null,544),[[z,_.value.zipCode]])])]),t("div",fs,[e[54]||(e[54]=t("label",{for:"country",class:"block text-sm font-semibold text-slate-700"},"Country",-1)),A(t("select",{id:"country","onUpdate:modelValue":e[8]||(e[8]=n=>_.value.country=n),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200 bg-white",onChange:kt},[e[53]||(e[53]=t("option",{value:""},"Select Country",-1)),(u(!0),m(Be,null,qe(st.value,n=>(u(),m("option",{key:n.countryCode,value:n.countryCode},i(n.countryName),9,gs))),128))],544),[[Ee,_.value.country]])]),t("button",vs,[e[55]||(e[55]=re(" Continue to Shipping ")),h(a(yt),{class:"w-5 h-5 ml-2"})])],32)])):C.value===2?(u(),m("div",bs,[t("div",xs,[t("div",hs,[h(a(mt),{class:"w-5 h-5 text-slate-600"})]),e[56]||(e[56]=t("h2",{class:"text-xl lg:text-2xl font-bold text-slate-800"},"Shipping Method",-1))]),t("div",Cs,[t("div",{class:oe(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",Q.value==="standard"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[9]||(e[9]=n=>Mt("standard"))},[t("div",ws,[t("div",{class:oe(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",Q.value==="standard"?"border-slate-800 bg-slate-800":"border-slate-300"])},[Q.value==="standard"?(u(),m("div",Ns)):S("",!0)],2),t("div",_s,[t("div",Ss,[e[57]||(e[57]=t("span",{class:"font-semibold text-slate-800"},"Express Shipping",-1)),t("span",Ps,i(a(r)($.value).formattedAmount),1)]),e[58]||(e[58]=t("p",{class:"text-sm text-slate-600"},"Delivery within 5-7 business days",-1))])])],2)]),t("div",As,[t("button",{onClick:at,class:"flex-1 py-3 border-2 text-sm border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[h(a(Je),{class:"w-4 h-4 mr-2"}),e[59]||(e[59]=re(" Back "))]),t("button",{onClick:nt,class:"flex-1 py-3 px-3 text-sm bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center"},[e[60]||(e[60]=re(" Continue to Payment ")),h(a(yt),{class:"w-4 h-4 ml-2"})])])])):C.value===3?(u(),m("div",Is,[t("div",Ts,[t("div",ks,[h(a(Fe),{class:"w-5 h-5 text-slate-600"})]),e[61]||(e[61]=t("h2",{class:"text-lg lg:text-2xl font-bold text-slate-800"},"Payment Options",-1))]),t("div",Ms,[e[67]||(e[67]=t("h3",{class:"text-base lg:text-lg font-semibold text-slate-800 mb-4"},"Choose Payment Type",-1)),t("div",Es,[t("div",{class:oe(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",f.value==="full"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[10]||(e[10]=n=>Ue("full"))},[t("div",Fs,[t("div",{class:oe(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",f.value==="full"?"border-slate-800 bg-slate-800":"border-slate-300"])},[f.value==="full"?(u(),m("div",Rs)):S("",!0)],2),t("div",Os,[t("div",Ds,[e[62]||(e[62]=t("span",{class:"font-semibold text-slate-800"},"Pay Full Amount",-1)),t("span",Ls,i(a(r)(X()).formattedAmount),1)]),e[63]||(e[63]=t("p",{class:"text-sm text-slate-600"},"Complete payment now with no additional fees",-1))]),t("div",js,[h(a(Fe),{class:"w-6 h-6 text-emerald-600"})])])],2),we.value?(u(),m("div",{key:0,class:oe(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",f.value==="installment"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[11]||(e[11]=n=>Ue("installment"))},[t("div",Us,[t("div",{class:oe(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",f.value==="installment"?"border-slate-800 bg-slate-800":"border-slate-300"])},[f.value==="installment"?(u(),m("div",$s)):S("",!0)],2),t("div",Gs,[t("div",Vs,[e[64]||(e[64]=t("span",{class:"font-semibold text-slate-800"},"Installment Plan",-1)),t("span",zs,"From "+i(a(r)(wt()).formattedAmount)+"/month",1)]),e[65]||(e[65]=t("p",{class:"text-sm text-slate-600"},"Split your payment into manageable installments",-1))]),t("div",Bs,[h(a(lo),{class:"w-6 h-6 text-blue-600"})])])],2)):S("",!0),we.value?S("",!0):(u(),m("div",qs,[t("div",Ys,[h(a(ro),{class:"w-5 h-5 text-yellow-600 mr-2"}),e[66]||(e[66]=t("span",{class:"text-sm text-yellow-800"},"No installment options available for current cart items",-1))]),t("div",Hs,[t("p",null,"Cart items with installment options: "+i(Ct.value.length),1),t("p",null,"Total cart items: "+i(N.value.length),1)])]))])]),h(ze,{name:"fade"},{default:_e(()=>[f.value==="installment"?(u(),m("div",Ks,[t("h3",Js,[h(a(co),{class:"w-5 h-5 mr-2 text-blue-600"}),e[68]||(e[68]=re(" Configure Your Installment Plan "))]),t("div",Zs,[t("div",Ws,[t("div",Xs,[e[69]||(e[69]=t("span",{class:"text-sm font-medium text-slate-600"},"Total Amount Agreed",-1)),t("span",Qs,i(a(r)(X()).formattedAmount),1)]),e[70]||(e[70]=t("p",{class:"text-xs text-slate-500"},"This is the total amount you agree to pay including interest",-1))]),t("div",en,[e[72]||(e[72]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Preferred number of installments? ",-1)),A(t("select",{"onUpdate:modelValue":e[12]||(e[12]=n=>b.value.numberOfInstallments=n),onChange:ge,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},[e[71]||(e[71]=t("option",{value:""},"Select installment terms",-1)),(u(!0),m(Be,null,qe(De.value,n=>(u(),m("option",{key:n,value:n},i(n)+" months (Est. "+i(a(r)(Nt(n)).formattedAmount)+"/month) ",9,tn))),128))],544),[[Ee,b.value.numberOfInstallments]])]),t("div",on,[e[74]||(e[74]=t("label",{class:"block text-sm font-semibold text-slate-700"}," How often would you like to pay? ",-1)),A(t("select",{"onUpdate:modelValue":e[13]||(e[13]=n=>b.value.paymentFrequency=n),onChange:ge,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},e[73]||(e[73]=[t("option",{value:""},"Select payment frequency",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"biweekly"},"Bi-weekly (Every 2 weeks)",-1),t("option",{value:"monthly"},"Monthly",-1)]),544),[[Ee,b.value.paymentFrequency]])]),t("div",sn,[t("label",nn," Down Payment Amount ("+i(et())+"% - "+i(tt())+"%) ",1),t("div",an,[e[75]||(e[75]=t("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500"},null,-1)),A(t("input",{"onUpdate:modelValue":e[14]||(e[14]=n=>b.value.downPayment=n),onInput:ge,type:"number",min:fe(),max:Te(),step:"0.01",class:"w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter down payment amount",required:""},null,40,ln),[[z,b.value.downPayment,void 0,{number:!0}]])]),t("div",rn,[t("span",null,"Min: "+i(a(r)(fe()).formattedAmount),1),t("span",null,"Max: "+i(a(r)(Te()).formattedAmount),1)])]),t("div",un,[e[76]||(e[76]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Start date for the first payment? ",-1)),A(t("input",{"onUpdate:modelValue":e[15]||(e[15]=n=>b.value.startDate=n),type:"date",min:_t(),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},null,8,dn),[[z,b.value.startDate]])]),t("div",cn,[e[78]||(e[78]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Preferred payment method? ",-1)),A(t("select",{"onUpdate:modelValue":e[16]||(e[16]=n=>b.value.paymentMethod=n),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:""},e[77]||(e[77]=[t("option",{value:""},"Select payment method",-1),t("option",{value:"auto_deduction"},"Auto Deduction (Recommended)",-1),t("option",{value:"manual"},"Manual Payment",-1)]),512),[[Ee,b.value.paymentMethod]])]),t("div",mn,[e[81]||(e[81]=t("label",{class:"block text-sm font-semibold text-slate-700"}," Do you need a formal agreement for this plan? ",-1)),t("div",yn,[t("label",pn,[A(t("input",{"onUpdate:modelValue":e[17]||(e[17]=n=>b.value.needsFormalAgreement=n),type:"radio",value:!0,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[dt,b.value.needsFormalAgreement]]),e[79]||(e[79]=t("span",{class:"ml-2 text-sm text-slate-700"},"Yes, I need a formal agreement",-1))]),t("label",fn,[A(t("input",{"onUpdate:modelValue":e[18]||(e[18]=n=>b.value.needsFormalAgreement=n),type:"radio",value:!1,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[dt,b.value.needsFormalAgreement]]),e[80]||(e[80]=t("span",{class:"ml-2 text-sm text-slate-700"},"No, proceed without formal agreement",-1))])])]),D.value.installmentAmount>0?(u(),m("div",gn,[e[88]||(e[88]=t("h4",{class:"font-semibold text-slate-800 mb-4"},"Installment Plan Summary",-1)),t("div",vn,[t("div",bn,[e[82]||(e[82]=t("span",{class:"text-sm text-slate-600"},"Down Payment (Today)",-1)),t("span",xn,i(a(r)(D.value.downPayment).formattedAmount),1)]),t("div",hn,[e[83]||(e[83]=t("span",{class:"text-sm text-slate-600"},"Installment Amount",-1)),t("span",Cn,i(a(r)(D.value.installmentAmount).formattedAmount),1)]),t("div",wn,[e[84]||(e[84]=t("span",{class:"text-sm text-slate-600"},"Number of Payments",-1)),t("span",Nn,i(b.value.numberOfInstallments),1)]),t("div",_n,[e[85]||(e[85]=t("span",{class:"text-sm text-slate-600"},"Interest Rate",-1)),t("span",Sn,i(ot())+"% annually",1)]),t("div",Pn,[e[86]||(e[86]=t("span",{class:"text-sm text-slate-600"},"Total Interest",-1)),t("span",An,i(a(r)(D.value.totalInterest).formattedAmount),1)]),t("div",In,[t("div",Tn,[e[87]||(e[87]=t("span",{class:"font-semibold text-slate-800"},"Total Payable",-1)),t("span",kn,i(a(r)(D.value.totalPayable).formattedAmount),1)])])])])):S("",!0)])])):S("",!0)]),_:1}),t("div",Mn,[e[90]||(e[90]=t("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Payment Gateway",-1)),t("div",En,[t("div",{class:oe(["border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-md",j.value==="flutterwave"?"border-slate-800 bg-slate-50 shadow-md":"border-slate-200 hover:border-slate-300"]),onClick:e[19]||(e[19]=n=>Et("flutterwave"))},[t("div",Fn,[t("div",{class:oe(["w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center transition-all duration-200",j.value==="flutterwave"?"border-slate-800 bg-slate-800":"border-slate-300"])},[j.value==="flutterwave"?(u(),m("div",Rn)):S("",!0)],2),e[89]||(e[89]=t("div",{class:"flex-1"},[t("span",{class:"font-semibold text-slate-800"},"Pay with Card"),t("p",{class:"text-sm text-slate-600"},"Secure payment via Flutterwave")],-1)),t("div",On,[h(a(Fe),{class:"w-6 h-6 text-slate-600"})])])],2)])]),t("div",Dn,[t("button",{onClick:at,class:"flex-1 py-3 border-2 w-full border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium flex items-center justify-center"},[h(a(Je),{class:"w-4 h-4 mr-2"}),e[91]||(e[91]=re(" Back "))]),t("button",{onClick:Lt,disabled:a(B)||!je.value,class:"flex-1 py-3 w-full bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[a(B)?(u(),He(a(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):S("",!0),re(" "+i(St()),1)],8,Ln)])])):S("",!0)]),_:1})]),t("div",jn,[t("div",Un,[t("div",$n,[t("div",Gn,[h(a(mo),{class:"w-5 h-5 text-slate-600"})]),e[92]||(e[92]=t("h2",{class:"text-lg lg:text-xl font-bold text-slate-800"},"Order Summary",-1))]),N.value&&N.value.length>0?(u(),m("div",Vn,[(u(!0),m(Be,null,qe(N.value,n=>(u(),m("div",{key:n.id,class:"flex gap-4 p-4 border border-slate-100 rounded-xl hover:bg-slate-50 transition-all duration-200 group"},[t("div",zn,[t("img",{src:n.image||"/placeholder.svg?height=64&width=64",alt:n.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:jt},null,40,Bn)]),t("div",qn,[t("h4",Yn,i(n.title),1),t("p",Hn,i(a(r)(n.price).formattedAmount),1),t("div",Kn,[n.size?(u(),m("span",Jn,i(n.size),1)):S("",!0),n.color?(u(),m("span",Zn,i(n.color),1)):S("",!0),n.hasInstallmentOption?(u(),m("span",Wn,"Installments")):S("",!0)]),t("div",Xn,[t("div",Qn,[t("button",{onClick:U=>lt(n.id,Math.max(1,n.quantity-1)),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors",disabled:n.quantity<=1},[h(a(io),{class:"w-4 h-4"})],8,ea),t("span",ta,i(n.quantity),1),t("button",{onClick:U=>lt(n.id,n.quantity+1),class:"w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-slate-100 transition-colors"},[h(a(uo),{class:"w-4 h-4"})],8,oa)]),t("button",{onClick:U=>Ft(n.id),class:"ml-auto w-9 h-9 rounded-lg border border-slate-200 flex items-center justify-center hover:bg-red-50 hover:border-red-200 hover:text-red-600 transition-colors"},[h(a(yo),{class:"w-4 h-4"})],8,sa)])]),t("div",na,[t("span",aa,i(a(r)(n.price*n.quantity).formattedAmount),1)])]))),128))])):S("",!0),t("div",la,[t("div",ra,[e[93]||(e[93]=t("span",{class:"text-slate-600"},"Subtotal",-1)),t("span",ia,i(a(r)(ke.value).formattedAmount),1)]),t("div",ua,[e[94]||(e[94]=t("span",{class:"text-slate-600"},"Shipping",-1)),t("span",da,i(Ne()===0?"Free":`${a(r)(Ne()).formattedAmount}`),1)]),t("div",ca,[t("span",ma,"Tax ("+i(G.value)+"%)",1),t("span",ya,i(a(r)(Ge()).formattedAmount),1)]),f.value==="installment"&&D.value.installmentAmount>0?(u(),m("div",pa,[e[97]||(e[97]=t("div",{class:"text-xs font-semibold text-blue-800 mb-2"},"Installment Plan",-1)),t("div",fa,[e[95]||(e[95]=t("span",null,"Down Payment",-1)),t("span",null,i(a(r)(D.value.downPayment).formattedAmount),1)]),t("div",ga,[t("span",null,i(b.value.numberOfInstallments)+" × "+i(a(r)(D.value.installmentAmount).formattedAmount),1),t("span",null,i(a(r)(D.value.installmentAmount*b.value.numberOfInstallments).formattedAmount),1)]),t("div",va,[e[96]||(e[96]=t("span",null,"Total Interest",-1)),t("span",null,i(a(r)(D.value.totalInterest).formattedAmount),1)])])):S("",!0),P.value?(u(),m("div",ba,[t("p",null,"Shipping to: "+i(P.value.countryName),1),t("p",null,"Tax Rate: "+i(G.value)+"%",1),f.value==="installment"?(u(),m("p",xa,"Payment Type: Installment Plan")):S("",!0)])):S("",!0),t("div",ha,[t("span",Ca,i(f.value==="installment"?"Total Payable":"Total"),1),t("span",wa,i(f.value==="installment"&&D.value.totalPayable>0?a(r)(D.value.totalPayable).formattedAmount:a(r)(X()).formattedAmount),1)]),f.value==="installment"&&D.value.downPayment>0?(u(),m("div",Na,[t("div",_a,[e[98]||(e[98]=t("span",null,"Today's Payment",-1)),t("span",null,i(a(r)(D.value.downPayment).formattedAmount),1)]),e[99]||(e[99]=t("p",{class:"text-xs text-emerald-600 mt-1"},"Down payment due now",-1))])):S("",!0)]),t("div",Sa,[t("div",Pa,[h(a(to),{class:"w-4 h-4 mr-2"}),e[100]||(e[100]=t("span",null,"Secure 256-bit SSL encryption",-1))]),e[101]||(e[101]=We('<div class="flex gap-2" data-v-be782bda><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-be782bda><span class="text-xs font-bold text-slate-600" data-v-be782bda>VISA</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-be782bda><span class="text-xs font-bold text-slate-600" data-v-be782bda>MC</span></div><div class="w-10 h-6 bg-slate-100 rounded flex items-center justify-center" data-v-be782bda><span class="text-xs font-bold text-slate-600" data-v-be782bda>AMEX</span></div></div>',1))])])])])])),h(ze,{name:"modal"},{default:_e(()=>[ie.value?(u(),m("div",Aa,[t("div",Ia,[t("button",{onClick:Me,class:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center hover:bg-slate-200 transition-colors"},[h(a(po),{class:"w-4 h-4"})]),V.value==="check"?(u(),m("div",Ta,[e[103]||(e[103]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-4"},"Welcome!",-1)),e[104]||(e[104]=t("p",{class:"text-slate-600 text-center mb-6"},"Sign in to track your orders and save your preferences, or continue as a guest.",-1)),t("div",ka,[t("button",{onClick:e[20]||(e[20]=n=>V.value="signin"),class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium"}," Sign In "),t("button",{onClick:e[21]||(e[21]=n=>V.value="signup"),class:"w-full py-3 border-2 border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-all duration-300 font-medium"}," Create Account "),t("button",{onClick:Rt,class:"w-full py-3 text-slate-600 hover:text-slate-800 transition-colors font-medium"}," Continue as Guest ")])])):V.value==="signin"?(u(),m("div",Ma,[e[107]||(e[107]=t("h2",{class:"text-2xl font-bold text-center text-slate-800 mb-6"},"Sign In",-1)),t("div",Ea,[h(w,{onCallback:ue,authType:"login"})]),t("form",{onSubmit:Ye(Dt,["prevent"]),class:"space-y-4"},[t("div",Fa,[e[105]||(e[105]=t("label",{for:"signinEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),A(t("input",{id:"signinEmail","onUpdate:modelValue":e[22]||(e[22]=n=>Ce.value.email=n),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[z,Ce.value.email]])]),t("div",Ra,[e[106]||(e[106]=t("label",{for:"signinPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),A(t("input",{id:"signinPassword","onUpdate:modelValue":e[23]||(e[23]=n=>Ce.value.password=n),type:"password",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"},null,512),[[z,Ce.value.password]])]),t("button",{type:"submit",disabled:Z.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[Z.value?(u(),He(a(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):S("",!0),re(" "+i(Z.value?"Signing In...":"Sign In"),1)],8,Oa),t("div",Da,[t("button",{type:"button",onClick:e[24]||(e[24]=n=>V.value="signup"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Don't have an account? Sign up ")])],32)])):V.value==="signup"?(u(),m("div",La,[e[114]||(e[114]=t("h2",{class:"text-2xl text-center font-bold text-slate-800 mb-6"},"Create Account",-1)),t("div",ja,[h(w,{onCallback:ue,authType:"signup"})]),t("form",{onSubmit:Ye(Ot,["prevent"]),class:"space-y-4"},[t("div",Ua,[t("div",$a,[e[108]||(e[108]=t("label",{for:"firstName",class:"block text-sm font-semibold text-slate-700"},"First Name",-1)),A(t("input",{id:"firstName","onUpdate:modelValue":e[25]||(e[25]=n=>te.value.firstName=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"First name"},null,512),[[z,te.value.firstName]])]),t("div",Ga,[e[109]||(e[109]=t("label",{for:"lastName",class:"block text-sm font-semibold text-slate-700"},"Last Name",-1)),A(t("input",{id:"lastName","onUpdate:modelValue":e[26]||(e[26]=n=>te.value.lastName=n),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Last name"},null,512),[[z,te.value.lastName]])])]),t("div",Va,[e[110]||(e[110]=t("label",{for:"signupEmail",class:"block text-sm font-semibold text-slate-700"},"Email",-1)),A(t("input",{id:"signupEmail","onUpdate:modelValue":e[27]||(e[27]=n=>te.value.email=n),type:"email",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"},null,512),[[z,te.value.email]])]),t("div",za,[e[111]||(e[111]=t("label",{for:"signupPassword",class:"block text-sm font-semibold text-slate-700"},"Password",-1)),A(t("input",{id:"signupPassword","onUpdate:modelValue":e[28]||(e[28]=n=>te.value.password=n),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"},null,512),[[z,te.value.password]]),e[112]||(e[112]=t("p",{class:"text-xs text-slate-500"},"Password must be at least 6 characters",-1))]),t("div",Ba,[e[113]||(e[113]=t("label",{for:"phone",class:"block text-sm font-semibold text-slate-700"},"Phone (Optional)",-1)),A(t("input",{id:"phone","onUpdate:modelValue":e[29]||(e[29]=n=>te.value.phone=n),type:"tel",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number"},null,512),[[z,te.value.phone]])]),t("button",{type:"submit",disabled:T.value,class:"w-full py-3 bg-gradient-to-r from-slate-800 to-slate-900 text-white rounded-xl hover:from-slate-900 hover:to-black transition-all duration-300 font-medium flex items-center justify-center disabled:opacity-50"},[T.value?(u(),He(a(Ke),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):S("",!0),re(" "+i(T.value?"Creating Account...":"Create Account"),1)],8,qa),t("div",Ya,[t("button",{type:"button",onClick:e[30]||(e[30]=n=>V.value="signin"),class:"text-slate-600 hover:text-slate-800 font-medium"}," Already have an account? Sign in ")])],32)])):S("",!0)])])):S("",!0)]),_:1})])}}}),tl=Zt(Ka,[["__scopeId","data-v-be782bda"]]);export{tl as default};
