import{r as s,P as a}from"./Dbrg7ok7.js";const f={NG:"NGN",US:"USD",GB:"GBP",CA:"CAD",AU:"AUD",IN:"INR",JP:"JPY",CN:"CNY",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",NL:"EUR",BE:"EUR",AT:"EUR",IE:"EUR",PT:"EUR",GR:"EUR",FI:"EUR",LU:"EUR",BR:"BRL",MX:"MXN",AR:"ARS",CL:"CLP",CO:"COP",PE:"PEN",ZA:"ZAR",EG:"EGP",MA:"MAD",KE:"KES",GH:"GHS",UG:"UGX",TZ:"TZS",RW:"RWF",ET:"ETB",RU:"RUB",TR:"TRY",SA:"SAR",AE:"AED",IL:"ILS",EG:"EGP",JO:"JOD",KW:"KWD",QA:"QAR",BH:"BHD",OM:"OMR",LB:"LBP",SY:"SYP",IQ:"IQD",IR:"IRR",AF:"AFN",PK:"PKR",BD:"BDT",LK:"LKR",MM:"MMK",TH:"THB",VN:"VND",KH:"KHR",LA:"LAK",MY:"MYR",SG:"SGD",ID:"IDR",PH:"PHP",KR:"KRW",TW:"TWD",HK:"HKD",MO:"MOP",NZ:"NZD",FJ:"FJD",PG:"PGK",WS:"WST",TO:"TOP",VU:"VUV",SB:"SBD"},A={NGN:{style:"currency",currency:"NGN",minimumFractionDigits:0},USD:{style:"currency",currency:"USD",minimumFractionDigits:2},GBP:{style:"currency",currency:"GBP",minimumFractionDigits:2},EUR:{style:"currency",currency:"EUR",minimumFractionDigits:2},JPY:{style:"currency",currency:"JPY",minimumFractionDigits:0},INR:{style:"currency",currency:"INR",minimumFractionDigits:0},CAD:{style:"currency",currency:"CAD",minimumFractionDigits:2},AUD:{style:"currency",currency:"AUD",minimumFractionDigits:2}},I=()=>{const N="63729107bf850afc2fee0ef1",P="https://v6.exchangerate-api.com/v6",i=s("USD"),u=s("US"),c=s({}),l=s(!1),R=s(null),E=s(null),S=async()=>{try{const e=await(await fetch("https://ipinfo.io/json/")).json();return console.log(e,"json response here up[dated"),{country:e.country||"United States",countryCode:e.country||e.countryCode||"US",currency:e.currency||"USD"}}catch(r){return console.error("Failed to get user location:",r),{country:"United States",countryCode:"US",currency:"USD"}}},U=async(r="USD")=>{try{l.value=!0,R.value=null;const e=await fetch(`${P}/${N}/latest/${r}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(t.result==="success")c.value=t.conversion_rates,E.value=new Date(t.time_last_update_utc);else throw new Error("Failed to fetch exchange rates")}catch(e){R.value=e instanceof Error?e.message:"Unknown error occurred",console.error("Error fetching exchange rates:",e)}finally{l.value=!1}},d=async()=>{try{const r=await S();u.value=r.countryCode;const e=f[r.countryCode]||r.currency||"USD";i.value=e,await U("USD")}catch(r){console.error("Error initializing user currency:",r),i.value="USD",u.value="US"}},g=(r,e)=>{const t=e||i.value,o=c.value[t]||1,n=r*o,y=A[t]||{style:"currency",currency:t,minimumFractionDigits:2},D=t==="NGN"?"en-NG":t==="EUR"?"de-DE":t==="GBP"?"en-GB":t==="JPY"?"ja-JP":t==="INR"?"en-IN":"en-US",m=new Intl.NumberFormat(D,y).format(n);return{convertedAmount:n,currency:t,exchangeRate:o,formattedAmount:m}},G=async(r,e,t)=>{e!=="USD"&&!c.value[e]&&await U(e);let o,n;if(e==="USD")n=c.value[t]||1,o=r*n;else if(t==="USD")n=1/(c.value[e]||1),o=r*n;else{const m=1/(c.value[e]||1),B=c.value[t]||1;n=m*B,o=r*n}const y=A[t]||{style:"currency",currency:t,minimumFractionDigits:2},D=new Intl.NumberFormat("en-US",y).format(o);return{convertedAmount:o,currency:t,exchangeRate:n,formattedAmount:D}},v=r=>({USD:"$",EUR:"€",GBP:"£",JPY:"¥",NGN:"₦",INR:"₹",CAD:"C$",AUD:"A$",CNY:"¥",KRW:"₩",BRL:"R$",RUB:"₽"})[r]||r;return{userCurrency:a(i),userCountry:a(u),exchangeRates:a(c),isLoading:a(l),error:a(R),lastUpdated:a(E),initializeUserCurrency:d,convertFromUSD:g,convertCurrency:G,fetchExchangeRates:U,getCurrencySymbol:v,getUserLocation:S}};export{I as u};
